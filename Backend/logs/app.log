2025-09-30 19:27:13,357 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-09-30 19:27:13,364 | INFO | main | Redis event bus started
2025-09-30 19:29:10,622 | INFO | main | Redis event bus stopped
2025-09-30 19:29:36,484 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-09-30 19:29:36,485 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-09-30 19:29:36,485 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-09-30 19:29:52,309 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-09-30 19:29:52,311 | INFO | main | Redis event bus started
2025-09-30 19:30:18,657 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-09-30 19:30:18,674 | INFO | app.tasks.test_task | Creating Customer Service Agent for user 1
2025-09-30 19:30:18,694 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 19:30:19,221 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:30:19,227 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 19:30:19,208 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 19:30:19,508 | INFO | app.tasks.test_task | Agent data: name='Customer Support Bot' avatar=None model='gpt-4o' description=None base_prompt='You are a helpful customer service agent' tone='friendly' short_term_memory=False long_term_memory=False status='active' company_name='PT. lord suroso' industry='Teknologi AI' company_description='tidak ada' address='jln.kwitang no 4, Jakarta Pusat' email='suroso@gmail.com' website=None fallback_email='siti@gmail.com'
2025-09-30 19:30:19,819 | INFO | app.tasks.test_task | New agent: <Agent name=Customer Support Bot user_id=1>
2025-09-30 19:30:20,068 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 19:30:20,083 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:30:20,086 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 19:30:20,245 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 19:30:20,260 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 19:30:20,274 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 19:30:20,274 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:30:20,298 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 19:30:20,278 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_30
2025-09-30 19:30:20,307 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 19:30:20,308 | INFO | app.utils.agent_utils | Initializing Customer Service AI agent for agent 30
2025-09-30 19:30:20,323 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:30:20,327 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 19:30:20,311 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 19:30:38,842 | INFO | app.utils.agent_utils | Customer Service AI agent initialized for agent 30
2025-09-30 19:30:38,852 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 19:30:38,858 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_30\products.csv (type: txt)
2025-09-30 19:30:38,859 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 19:30:38,882 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:30:38,885 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 19:30:38,885 | INFO | app.AI.document_store.RAG | Successfully loaded document: products.csv
2025-09-30 19:30:38,888 | INFO | app.AI.customer_service | Successfully loaded document: products.csv
2025-09-30 19:30:41,361 | INFO | app.AI.customer_service | Successfully added document 'products.csv' with ID '39'
2025-09-30 19:30:41,363 | INFO | app.utils.agent_utils | Added document products.csv to agent 30
2025-09-30 19:30:41,371 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_30\FAQ.pdf (type: pdf)
2025-09-30 19:30:43,225 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-09-30 19:30:43,228 | INFO | app.AI.customer_service | Successfully loaded document: FAQ.pdf
2025-09-30 19:30:44,058 | INFO | app.AI.customer_service | Successfully added document 'FAQ.pdf' with ID '40'
2025-09-30 19:30:44,059 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent 30
2025-09-30 19:30:44,072 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 19:30:44,078 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 19:30:44,094 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:30:44,113 | INFO | app.utils.event_utils | Published event.agent.success event for agent 2 for user 1
2025-09-30 19:30:44,112 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 19:30:44,119 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-09-30 19:30:44,138 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:30:44,140 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-09-30 19:37:07,359 | INFO | main | Redis event bus stopped
2025-09-30 19:37:44,958 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-09-30 19:37:44,964 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-09-30 19:37:44,965 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-09-30 19:38:22,441 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-09-30 19:38:22,442 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-09-30 19:38:22,442 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-09-30 19:38:47,582 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-09-30 19:38:47,587 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-09-30 19:38:47,588 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-09-30 19:39:07,724 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-09-30 19:39:07,728 | INFO | main | Redis event bus started
2025-09-30 19:39:32,814 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-09-30 19:39:32,824 | INFO | app.tasks.test_task | Creating Customer Service Agent for user 1
2025-09-30 19:39:32,885 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 19:39:32,952 | INFO | app.tasks.test_task | Agent data: name='Customer Support Bot' avatar=None model='gpt-4o' description=None base_prompt='You are a helpful customer service agent' tone='friendly' short_term_memory=False long_term_memory=False status='active' company_name='PT. lord suroso' industry='Teknologi AI' company_description='tidak ada' address='jln.kwitang no 4, Jakarta Pusat' email='suroso@gmail.com' website=None fallback_email='siti@gmail.com'
2025-09-30 19:39:33,427 | INFO | app.tasks.test_task | New agent: <Agent name=Customer Support Bot user_id=1>
2025-09-30 19:39:33,872 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 19:39:33,872 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:39:34,187 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 19:39:34,023 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 19:39:34,297 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 19:39:34,301 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:39:34,726 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 19:39:34,643 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 19:39:34,791 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 19:39:34,792 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_31
2025-09-30 19:39:34,803 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:39:34,811 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 19:39:34,830 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 19:39:34,846 | INFO | app.utils.agent_utils | Initializing Customer Service AI agent for agent 31
2025-09-30 19:39:34,853 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 19:39:34,853 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:39:34,856 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 19:39:49,474 | INFO | app.utils.agent_utils | Customer Service AI agent initialized for agent 31
2025-09-30 19:39:49,626 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 19:39:49,628 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_31\products.csv (type: txt)
2025-09-30 19:39:49,655 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 19:39:49,657 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:39:49,663 | INFO | app.AI.document_store.RAG | Successfully loaded document: products.csv
2025-09-30 19:39:49,663 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 19:39:49,665 | INFO | app.AI.customer_service | Successfully loaded document: products.csv
2025-09-30 19:39:53,775 | INFO | app.AI.customer_service | Successfully added document 'products.csv' with ID '41'
2025-09-30 19:39:53,924 | INFO | app.utils.agent_utils | Added document products.csv to agent 31
2025-09-30 19:39:53,956 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_31\FAQ.pdf (type: pdf)
2025-09-30 19:39:55,580 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-09-30 19:39:55,581 | INFO | app.AI.customer_service | Successfully loaded document: FAQ.pdf
2025-09-30 19:39:56,628 | INFO | app.AI.customer_service | Successfully added document 'FAQ.pdf' with ID '42'
2025-09-30 19:39:56,631 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent 31
2025-09-30 19:39:56,647 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 19:39:56,652 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 19:39:56,662 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:39:56,664 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 19:39:56,716 | INFO | app.utils.event_utils | Published event.agent.success event for agent 2 for user 1
2025-09-30 19:39:56,725 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:39:56,725 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-09-30 19:39:56,727 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-09-30 19:43:37,905 | INFO | main | Redis event bus stopped
2025-09-30 19:45:37,793 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-09-30 19:45:37,797 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-09-30 19:45:37,802 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-09-30 19:46:11,111 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-09-30 19:46:11,113 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-09-30 19:46:11,118 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-09-30 19:46:26,964 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-09-30 19:46:26,965 | INFO | main | Redis event bus started
2025-09-30 19:47:08,615 | WARNING | app.dependencies.auth | Access attempt without token
2025-09-30 19:47:20,681 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-09-30 19:47:31,892 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-09-30 19:47:31,908 | INFO | app.tasks.test_task | Creating Customer Service Agent for user 1
2025-09-30 19:47:31,922 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 19:47:31,973 | INFO | app.tasks.test_task | Agent data: name='Customer Support Bot' avatar=None model='gpt-4o' description=None base_prompt='You are a helpful customer service agent' tone='friendly' short_term_memory=False long_term_memory=False status='active' company_name='PT. lord suroso' industry='Teknologi AI' company_description='tidak ada' address='jln.kwitang no 4, Jakarta Pusat' email='suroso@gmail.com' website=None fallback_email='siti@gmail.com'
2025-09-30 19:47:32,219 | INFO | app.tasks.test_task | New agent: <Agent name=Customer Support Bot user_id=1>
2025-09-30 19:47:32,241 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:47:32,243 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 19:47:32,230 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 19:47:32,353 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 19:47:32,363 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 19:47:32,374 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 19:47:32,367 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:47:32,386 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 19:47:32,379 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 19:47:32,392 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_32
2025-09-30 19:47:32,408 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 19:47:32,411 | INFO | app.utils.agent_utils | Initializing Customer Service AI agent for agent 32
2025-09-30 19:47:32,416 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:47:32,425 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 19:47:32,418 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 19:47:32,437 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:47:32,442 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 19:47:52,228 | INFO | app.utils.agent_utils | Customer Service AI agent initialized for agent 32
2025-09-30 19:47:52,232 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 19:47:52,238 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:47:52,237 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 19:47:52,240 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 19:47:52,239 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_32\products.csv (type: txt)
2025-09-30 19:47:52,258 | INFO | app.AI.document_store.RAG | Successfully loaded document: products.csv
2025-09-30 19:47:52,263 | INFO | app.AI.customer_service | Successfully loaded document: products.csv
2025-09-30 19:47:54,192 | INFO | app.AI.customer_service | Successfully added document 'products.csv' with ID '43'
2025-09-30 19:47:54,418 | INFO | app.utils.agent_utils | Added document products.csv to agent 32
2025-09-30 19:47:54,833 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_32\FAQ.pdf (type: pdf)
2025-09-30 19:47:56,772 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-09-30 19:47:56,776 | INFO | app.AI.customer_service | Successfully loaded document: FAQ.pdf
2025-09-30 19:47:58,376 | INFO | app.AI.customer_service | Successfully added document 'FAQ.pdf' with ID '44'
2025-09-30 19:47:58,378 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent 32
2025-09-30 19:47:58,387 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 19:47:58,390 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 19:47:58,390 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:47:58,392 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 19:47:58,411 | INFO | app.utils.event_utils | Published event.agent.success event for agent 2 for user 1
2025-09-30 19:47:58,421 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 19:47:58,422 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-09-30 19:47:58,422 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-09-30 19:52:29,609 | INFO | main | Redis event bus stopped
2025-09-30 19:53:39,308 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-09-30 19:53:39,321 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-09-30 19:53:39,324 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-09-30 20:00:32,386 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-09-30 20:00:32,392 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-09-30 20:00:32,398 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-09-30 20:01:02,379 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-09-30 20:01:02,383 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-09-30 20:01:02,384 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-09-30 20:01:18,541 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-09-30 20:01:18,542 | INFO | main | Redis event bus started
2025-09-30 20:01:58,617 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-09-30 20:01:58,670 | INFO | app.tasks.test_task | Creating Customer Service Agent for user 1
2025-09-30 20:01:58,720 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 20:01:59,880 | INFO | app.tasks.test_task | Agent data: name='Customer Support Bot' avatar=None model='gpt-4o' description=None base_prompt='You are a helpful customer service agent' tone='friendly' short_term_memory=False long_term_memory=False status='active' company_name='PT. lord suroso' industry='Teknologi AI' company_description='tidak ada' address='jln.kwitang no 4, Jakarta Pusat' email='suroso@gmail.com' website=None fallback_email='siti@gmail.com'
2025-09-30 20:02:00,418 | INFO | app.tasks.test_task | New agent: <Agent name=Customer Support Bot user_id=1>
2025-09-30 20:02:00,753 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 20:02:00,772 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 20:02:00,776 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 20:02:00,836 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 20:02:00,919 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 20:02:00,920 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 20:02:00,932 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 20:02:00,925 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 20:02:01,054 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 20:02:01,115 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 20:02:00,988 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_33
2025-09-30 20:02:01,055 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 20:02:01,561 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 20:02:01,570 | INFO | app.utils.agent_utils | Initializing Customer Service AI agent for agent 33
2025-09-30 20:02:01,623 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 20:02:01,636 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 20:02:01,623 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 20:02:18,819 | INFO | app.utils.agent_utils | Customer Service AI agent initialized for agent 33
2025-09-30 20:02:18,827 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 20:02:18,832 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_33\products.csv (type: csv)
2025-09-30 20:02:18,835 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 20:02:18,848 | INFO | app.tasks.test_task | Processing csv file: products.csv
2025-09-30 20:02:18,855 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 20:02:18,857 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 20:02:19,194 | INFO | app.tasks.test_task | Created database documents/user_1/agent_33\products.db from products.csv
2025-09-30 20:02:19,206 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_33\FAQ.pdf (type: pdf)
2025-09-30 20:02:19,220 | INFO | app.tasks.test_task | Processing pdf file for RAG: FAQ.pdf
2025-09-30 20:02:20,971 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-09-30 20:02:20,975 | INFO | app.AI.customer_service | Successfully loaded document: FAQ.pdf
2025-09-30 20:02:24,005 | INFO | app.AI.customer_service | Successfully added document 'FAQ.pdf' with ID '46'
2025-09-30 20:02:24,311 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent 33
2025-09-30 20:02:24,366 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 20:02:24,394 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 20:02:24,414 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 20:02:24,423 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 20:02:24,560 | INFO | app.utils.event_utils | Published event.agent.success event for agent 2 for user 1
2025-09-30 20:02:24,670 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 20:02:24,806 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-09-30 20:02:24,645 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-09-30 20:03:44,489 | WARNING | app.controllers.agent_controller | Agent not found
2025-09-30 20:06:56,408 | INFO | main | Redis event bus stopped
2025-09-30 20:08:38,980 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-09-30 20:08:39,072 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-09-30 20:08:39,131 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-09-30 20:09:32,404 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-09-30 20:09:32,407 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-09-30 20:09:32,408 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-09-30 20:09:52,499 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-09-30 20:09:52,501 | INFO | main | Redis event bus started
2025-09-30 20:13:31,441 | WARNING | app.controllers.agent_controller | Agent not found
2025-09-30 20:14:10,822 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-09-30 20:14:10,853 | INFO | app.tasks.test_task | Creating Customer Service Agent for user 1
2025-09-30 20:14:10,875 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 20:14:11,828 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 20:14:11,820 | INFO | app.tasks.test_task | Agent data: name='Customer Support Bot' avatar=None model='gpt-4o' description=None base_prompt='You are a helpful customer service agent' tone='friendly' short_term_memory=False long_term_memory=False status='active' company_name='PT. lord suroso' industry='Teknologi AI' company_description='tidak ada' address='jln.kwitang no 4, Jakarta Pusat' email='suroso@gmail.com' website=None fallback_email='siti@gmail.com'
2025-09-30 20:14:11,880 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 20:14:11,909 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 20:14:12,169 | INFO | app.tasks.test_task | New agent: <Agent name=Customer Support Bot user_id=1>
2025-09-30 20:14:12,417 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 20:14:12,428 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 20:14:12,429 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 20:14:12,439 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 20:14:12,436 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 20:14:12,506 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 20:14:12,519 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 20:14:12,523 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 20:14:12,520 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_34
2025-09-30 20:14:12,558 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 20:14:12,571 | INFO | app.utils.agent_utils | Initializing Customer Service AI agent for agent 34
2025-09-30 20:14:12,580 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 20:14:12,580 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 20:14:12,587 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 20:14:30,031 | INFO | app.utils.agent_utils | Customer Service AI agent initialized for agent 34
2025-09-30 20:14:30,038 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 20:14:30,046 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 20:14:30,047 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_34\products.csv (type: csv)
2025-09-30 20:14:30,051 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 20:14:30,053 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 20:14:30,062 | INFO | app.tasks.test_task | Processing csv file: products.csv
2025-09-30 20:14:30,430 | INFO | app.tasks.test_task | Created database documents/user_1/agent_34\products.db from products.csv
2025-09-30 20:14:30,454 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_34\FAQ.pdf (type: pdf)
2025-09-30 20:14:30,465 | INFO | app.tasks.test_task | Processing pdf file for RAG: FAQ.pdf
2025-09-30 20:14:33,451 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-09-30 20:14:33,457 | INFO | app.AI.customer_service | Successfully loaded document: FAQ.pdf
2025-09-30 20:14:36,263 | INFO | app.AI.customer_service | Successfully added document 'FAQ.pdf' with ID '48'
2025-09-30 20:14:36,264 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent 34
2025-09-30 20:14:36,274 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-09-30 20:14:36,281 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-09-30 20:14:36,290 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 20:14:36,386 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-09-30 20:14:37,049 | INFO | app.utils.event_utils | Published event.agent.success event for agent 2 for user 1
2025-09-30 20:14:37,416 | INFO | app.events.redis_event | Sending the message to handler function
2025-09-30 20:14:37,454 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-09-30 20:14:37,415 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-09-30 20:15:24,801 | WARNING | app.controllers.agent_controller | Agent not found
2025-09-30 20:15:47,952 | WARNING | app.controllers.agent_controller | Agent not found
2025-10-01 17:41:36,272 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-01 17:41:36,289 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1
2025-10-01 17:41:36,304 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-01 17:41:36,314 | ERROR | app.tasks.test_task | Error creating Simple RAG Agent: 1 validation error for CreateSimpleRAGAgent
status
  Field required [type=missing, input_value={'name': 'test', 'descrip...'tidak ada base prompt'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-10-01 17:41:37,071 | INFO | app.utils.event_utils | Published event.agent.failure event for agent 2 for user 1
2025-10-01 17:41:37,151 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-01 17:41:37,330 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.failure.user:1
2025-10-01 17:43:18,835 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-01 17:43:18,844 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1
2025-10-01 17:43:18,849 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-01 17:43:18,852 | INFO | app.tasks.test_task | Agent data: name='test' avatar=None model='gpt-3.5-turbo' description='test' base_prompt='tidak ada base prompt' tone='friendly' short_term_memory=False long_term_memory=False status='active'
2025-10-01 17:43:18,949 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-01 17:43:18,955 | INFO | app.tasks.test_task | New agent: <Agent name=test user_id=1>
2025-10-01 17:43:20,203 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-01 17:43:20,211 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_35
2025-10-01 17:43:20,210 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-01 17:43:20,317 | INFO | app.utils.event_utils | Published event.agent.success event for agent 2 for user 1
2025-10-01 17:43:20,360 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-01 17:43:20,395 | INFO | app.utils.agent_utils | Initializing AI agent for agent 35
2025-10-01 17:43:31,451 | ERROR | app.dependencies.redis_storage | Error while storing agent 35 in Redis: cannot pickle '_thread.RLock' object
2025-10-01 17:56:08,476 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-01 17:56:08,484 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1
2025-10-01 17:56:08,489 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-01 17:56:08,491 | INFO | app.tasks.test_task | Agent data: name='test' avatar=None model='gpt-3.5-turbo' description='test' base_prompt='tidak ada base prompt' tone='friendly' short_term_memory=False long_term_memory=False status='active'
2025-10-01 17:56:08,558 | INFO | app.tasks.test_task | New agent: <Agent name=test user_id=1>
2025-10-01 17:56:08,572 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-01 17:56:08,749 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-01 17:56:08,766 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-01 17:56:08,770 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_36
2025-10-01 17:56:08,770 | INFO | app.utils.agent_utils | Initializing AI agent for agent 36
2025-10-01 17:56:18,647 | ERROR | app.dependencies.redis_storage | Error while storing agent 36 in Redis: cannot pickle '_thread.RLock' object
2025-10-01 17:56:18,647 | INFO | app.utils.agent_utils | Stored agent 36 in Redis
2025-10-01 17:56:18,667 | INFO | app.utils.agent_utils | AI agent initialized for agent 36
2025-10-01 17:56:18,699 | INFO | app.utils.event_utils | Published event.agent.success event for agent 2 for user 1
2025-10-01 17:56:18,715 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-01 18:55:53,147 | INFO | app.dependencies.redis_storage | Agent 1 stored in Redis
2025-10-01 18:56:32,955 | INFO | app.dependencies.redis_storage | Agent 1 retrieved from Redis
2025-10-01 19:48:49,235 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-01 19:48:49,241 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-01 19:48:49,249 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-01 19:49:18,528 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-01 19:49:18,530 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-01 19:49:18,531 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-01 19:49:34,934 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-01 19:49:34,938 | INFO | main | Redis event bus started
2025-10-01 19:50:57,881 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-01 19:50:57,882 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-01 19:52:46,429 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-01 19:52:47,002 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-01 19:52:48,313 | INFO | main | Redis event bus stopped
2025-10-01 19:53:16,124 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-01 19:53:16,248 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-01 19:53:16,789 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-01 19:53:40,253 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-01 19:53:40,262 | INFO | main | Redis event bus started
2025-10-01 19:53:45,573 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-01 19:53:45,573 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-01 19:55:37,895 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-01 19:55:57,798 | ERROR | app.controllers.simple_rag_controller | Unexpected error while creating Simple RAG Agent: invalid literal for int() with base 10: 'ysVHD'
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\simple_rag_controller.py", line 93, in create_simple_rag_agent
    directory_path = create_agent_directory(user_id, int(agent_data_dict['id']))
                                                     ~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'ysVHD'
2025-10-01 19:55:57,830 | ERROR | app.utils.error_utils | Unexpected error during creating Simple RAG Agent: invalid literal for int() with base 10: 'ysVHD'
2025-10-01 19:56:56,368 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-01 19:56:56,446 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-01 19:56:56,723 | INFO | main | Redis event bus stopped
2025-10-01 19:57:38,588 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-01 19:57:38,610 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-01 19:57:38,629 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-01 19:58:04,774 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-01 19:58:04,777 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-01 19:58:04,778 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-01 19:58:23,202 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-01 19:58:23,205 | INFO | main | Redis event bus started
2025-10-01 19:58:27,256 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-01 19:58:27,256 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-01 19:58:42,830 | ERROR | app.controllers.simple_rag_controller | Unexpected error while creating Simple RAG Agent: invalid literal for int() with base 10: 'MwkfE'
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\simple_rag_controller.py", line 93, in create_simple_rag_agent
    directory_path = create_agent_directory(user_id, int(agent_data_dict['id']))
                                                     ~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'MwkfE'
2025-10-01 19:58:42,888 | ERROR | app.utils.error_utils | Unexpected error during creating Simple RAG Agent: invalid literal for int() with base 10: 'MwkfE'
2025-10-01 19:59:22,059 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-01 19:59:22,066 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-01 19:59:22,609 | INFO | main | Redis event bus stopped
2025-10-01 19:59:34,647 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-01 19:59:34,648 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-01 19:59:34,652 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-01 20:00:19,856 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-01 20:00:19,862 | INFO | main | Redis event bus started
2025-10-01 20:00:27,485 | INFO | main | Redis event bus stopped
2025-10-01 20:02:25,477 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-01 20:02:25,482 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-01 20:02:25,483 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-01 20:03:11,777 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-01 20:03:11,782 | INFO | main | Redis event bus started
2025-10-01 20:04:14,070 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-01 20:04:14,078 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-01 20:04:23,242 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_m3lpj
2025-10-01 20:04:30,499 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-01 20:04:30,511 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: m3lpj
2025-10-01 20:04:30,587 | INFO | app.utils.event_utils | Published event.agent.progress event for agent m3lpj for user 1
2025-10-01 20:04:30,821 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='m3lpj'
2025-10-01 20:04:31,821 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-01 20:04:32,182 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-01 20:04:32,358 | ERROR | app.tasks.test_task | Error creating Simple RAG Agent: (pymysql.err.DataError) (1366, "Incorrect integer value: 'm3lpj' for column 'id' at row 1")
[SQL: INSERT INTO agents (id, user_id, name, avatar, model, `role`, status, base_prompt, short_term_memory, long_term_memory, tone) VALUES (%(id)s, %(user_id)s, %(name)s, %(avatar)s, %(model)s, %(role)s, %(status)s, %(base_prompt)s, %(short_term_memory)s, %(long_term_memory)s, %(tone)s)]
[parameters: {'id': 'm3lpj', 'user_id': 1, 'name': 'ketiga', 'avatar': None, 'model': 'gpt-3.5-turbo', 'role': 'simple RAG agent', 'status': 'active', 'base_prompt': 'pp', 'short_term_memory': 0, 'long_term_memory': 0, 'tone': 'friendly'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-10-01 20:04:32,493 | INFO | app.utils.event_utils | Published event.agent.failure event for agent 2 for user 1
2025-10-01 20:04:32,705 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.failure.user:1
2025-10-01 20:05:13,756 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-01 20:05:13,762 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-01 20:05:13,858 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.progress', 'user_id': 1, 'agent_id': 'm3lpj', 'payload': {'current': 20, 'total': 100, 'status': 'Initialize agent'}, 'timestamp': '2025-10-01T13:04:31.236253'}
2025-10-01 20:05:13,928 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-01 20:05:14,055 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_FAILURE
2025-10-01 20:05:14,089 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.failure', 'user_id': 1, 'agent_id': 2, 'payload': {'current': 100, 'total': 100, 'status': 'Agent creation is failed'}, 'timestamp': '2025-10-01T13:04:32.704120'}
2025-10-01 20:06:07,934 | WARNING | main | Validation error: [{'type': 'int_parsing', 'loc': ('path', 'agent_id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': 'm3lpj'}]
2025-10-01 20:06:51,880 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-01 20:06:51,905 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-02 12:51:58,449 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 12:51:58,452 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 12:51:58,453 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 12:56:46,522 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 12:56:46,526 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 12:56:46,532 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 12:57:09,484 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 12:57:09,508 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 12:57:09,525 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 12:57:25,292 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 12:57:25,293 | INFO | main | Redis event bus started
2025-10-02 12:57:30,277 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-02 12:57:30,299 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-02 12:58:36,606 | WARNING | app.controllers.auth_controller | Email not found: khaerul@gmail.com
2025-10-02 12:58:55,005 | INFO | app.controllers.auth_controller | New user registered with email: khaerul@gmail.com
2025-10-02 12:59:02,121 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-02 12:59:15,711 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_pIhBK
2025-10-02 12:59:34,198 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-02 12:59:34,225 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: pIhBK
2025-10-02 12:59:34,462 | INFO | app.utils.event_utils | Published event.agent.progress event for agent pIhBK for user 1
2025-10-02 12:59:34,693 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='pIhBK'
2025-10-02 12:59:36,534 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 12:59:36,402 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-02 12:59:37,786 | INFO | app.utils.event_utils | Published event.agent.progress event for agent pIhBK for user 1
2025-10-02 12:59:38,041 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 12:59:38,039 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_pIhBK
2025-10-02 12:59:38,239 | INFO | app.utils.agent_utils | Initializing AI agent for agent pIhBK
2025-10-02 12:59:38,249 | INFO | app.utils.event_utils | Published event.agent.progress event for agent pIhBK for user 1
2025-10-02 12:59:38,862 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_pIhBK\FAQ.pdf (type: pdf)
2025-10-02 12:59:40,147 | ERROR | app.utils.agent_utils | AI agent not found for agent pIhBK
2025-10-02 12:59:40,817 | INFO | app.utils.event_utils | Published event.agent.success event for agent pIhBK for user 1
2025-10-02 12:59:41,226 | ERROR | app.tasks.test_task | Error creating Simple RAG Agent: name 'agents' is not defined
2025-10-02 12:59:41,419 | INFO | app.utils.event_utils | Published event.agent.failure event for agent 2 for user 1
2025-10-02 13:00:29,975 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 13:00:30,057 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 13:00:30,076 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.progress', 'user_id': 1, 'agent_id': 'pIhBK', 'payload': {'current': 20, 'total': 100, 'status': 'Initialize agent'}, 'timestamp': '2025-10-02T05:59:34.813970'}
2025-10-02 13:00:30,222 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 13:00:30,234 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 13:00:30,236 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.progress', 'user_id': 1, 'agent_id': 'pIhBK', 'payload': {'current': 40, 'total': 100, 'status': 'Initializing Simple RAG Agent'}, 'timestamp': '2025-10-02T05:59:38.037321'}
2025-10-02 13:00:33,563 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 13:00:33,560 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 13:00:33,583 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 13:00:33,586 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.progress', 'user_id': 1, 'agent_id': 'pIhBK', 'payload': {'current': 60, 'total': 100, 'status': 'Adding Document to Simple RAG Agent'}, 'timestamp': '2025-10-02T06:00:33.276165'}
2025-10-02 13:00:33,925 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-02 13:00:33,932 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 13:00:33,930 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.failure.user:1
2025-10-02 13:00:33,935 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-02 13:00:33,939 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.success', 'user_id': 1, 'agent_id': 'pIhBK', 'payload': {'current': 100, 'total': 100, 'status': 'Agent creation is completed'}, 'timestamp': '2025-10-02T06:00:33.290273'}
2025-10-02 13:00:33,956 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 13:00:33,962 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_FAILURE
2025-10-02 13:00:33,965 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.failure', 'user_id': 1, 'agent_id': 2, 'payload': {'current': 100, 'total': 100, 'status': 'Agent creation is failed'}, 'timestamp': '2025-10-02T06:00:33.296597'}
2025-10-02 13:02:05,908 | WARNING | main | Validation error: [{'type': 'int_parsing', 'loc': ('path', 'agent_id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': 'pIhBK'}]
2025-10-02 13:02:40,591 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-02 13:02:42,172 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-02 13:02:45,112 | INFO | main | Redis event bus stopped
2025-10-02 13:03:41,402 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 13:03:41,405 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 13:03:41,407 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 13:13:40,421 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 13:13:40,423 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 13:13:40,424 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 13:14:16,926 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 13:14:16,928 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 13:14:16,929 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 13:14:45,688 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 13:14:45,690 | INFO | main | Redis event bus started
2025-10-02 13:15:25,545 | INFO | main | Redis event bus stopped
2025-10-02 13:16:39,137 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 13:16:39,161 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 13:16:39,223 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 13:17:54,540 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 13:17:54,542 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 13:17:54,543 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 13:18:18,051 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 13:18:18,052 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 13:18:18,053 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 13:18:32,670 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 13:18:32,673 | INFO | main | Redis event bus started
2025-10-02 13:18:38,684 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-02 13:18:38,729 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-02 13:19:13,684 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_aXwl2
2025-10-02 13:19:17,020 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-02 13:19:17,056 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: aXwl2
2025-10-02 13:19:17,096 | INFO | app.utils.event_utils | Published event.agent.progress event for agent aXwl2 for user 1
2025-10-02 13:19:17,271 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='aXwl2'
2025-10-02 13:19:18,382 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 13:19:18,591 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-02 13:19:19,103 | INFO | app.utils.event_utils | Published event.agent.progress event for agent aXwl2 for user 1
2025-10-02 13:19:19,192 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 13:19:19,156 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_aXwl2
2025-10-02 13:19:19,225 | INFO | app.utils.agent_utils | Initializing AI agent for agent aXwl2
2025-10-02 13:19:20,294 | INFO | app.utils.event_utils | Published event.agent.progress event for agent aXwl2 for user 1
2025-10-02 13:19:20,372 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_aXwl2\FAQ.pdf (type: pdf)
2025-10-02 13:19:22,107 | INFO | app.utils.file_utils | Rollback: Removed file documents/user_1/agent_aXwl2\FAQ.pdf
2025-10-02 13:19:22,248 | ERROR | app.tasks.test_task | Error creating Simple RAG Agent: add_document_to_agent() got an unexpected keyword argument 'agent_id'
2025-10-02 13:19:22,366 | INFO | app.utils.event_utils | Published event.agent.failure event for agent 2 for user 1
2025-10-02 13:20:51,264 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 13:20:52,924 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 13:20:52,946 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.progress', 'user_id': 1, 'agent_id': 'aXwl2', 'payload': {'current': 20, 'total': 100, 'status': 'Initialize agent'}, 'timestamp': '2025-10-02T06:19:17.325890'}
2025-10-02 13:20:53,555 | ERROR | app.events.event_handler | Error while send agent progress: 
2025-10-02 13:20:53,558 | ERROR | app.events.redis_event | Error while handler the message: 
2025-10-02 13:20:53,558 | ERROR | app.events.redis_event | Error while running the listening loop: 
2025-10-02 13:20:56,350 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-02 13:20:56,805 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-02 13:20:57,583 | INFO | main | Redis event bus stopped
2025-10-02 13:21:39,670 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 13:21:39,672 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 13:21:39,684 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 13:22:07,437 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 13:22:07,438 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 13:22:07,439 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 13:22:25,301 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 13:22:25,306 | INFO | main | Redis event bus started
2025-10-02 13:22:30,308 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-02 13:22:30,309 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-02 13:22:46,222 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_XuaLt
2025-10-02 13:22:47,942 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-02 13:22:48,285 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: XuaLt
2025-10-02 13:22:48,292 | INFO | app.utils.event_utils | Published event.agent.progress event for agent XuaLt for user 1
2025-10-02 13:22:48,314 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='XuaLt'
2025-10-02 13:22:49,664 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-02 13:22:51,801 | INFO | app.utils.event_utils | Published event.agent.progress event for agent XuaLt for user 1
2025-10-02 13:22:52,615 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 13:22:52,622 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_XuaLt
2025-10-02 13:22:53,176 | INFO | app.utils.agent_utils | Initializing AI agent for agent XuaLt
2025-10-02 13:22:53,423 | INFO | app.utils.event_utils | Published event.agent.progress event for agent XuaLt for user 1
2025-10-02 13:22:53,747 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_XuaLt\FAQ.pdf (type: pdf)
2025-10-02 13:22:53,766 | INFO | app.utils.file_utils | Rollback: Removed file documents/user_1/agent_XuaLt\FAQ.pdf
2025-10-02 13:22:54,349 | ERROR | app.tasks.test_task | Error creating Simple RAG Agent: name 'agent' is not defined
2025-10-02 13:22:54,380 | INFO | app.utils.event_utils | Published event.agent.failure event for agent 2 for user 1
2025-10-02 13:23:59,293 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 13:23:59,467 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 13:23:59,517 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.progress', 'user_id': 1, 'agent_id': 'XuaLt', 'payload': {'current': 20, 'total': 100, 'status': 'Initialize agent'}, 'timestamp': '2025-10-02T06:22:49.177313'}
2025-10-02 13:24:01,662 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-02 13:24:01,895 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-02 13:24:03,629 | INFO | main | Redis event bus stopped
2025-10-02 13:24:27,797 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 13:24:27,799 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 13:24:27,800 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 13:25:01,250 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 13:25:01,252 | INFO | main | Redis event bus started
2025-10-02 13:25:19,114 | WARNING | app.utils.error_utils | Agent not found: agent_id XuaLt for user khaerul@gmail.com
2025-10-02 13:30:26,360 | INFO | main | Redis event bus stopped
2025-10-02 13:31:08,474 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 13:31:08,476 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 13:31:08,477 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 13:31:26,516 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 13:31:26,519 | INFO | main | Redis event bus started
2025-10-02 13:32:59,680 | INFO | main | Redis event bus stopped
2025-10-02 13:33:42,746 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 13:33:42,750 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 13:33:42,754 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 13:34:07,246 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 13:34:07,251 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 13:34:07,260 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 13:34:34,575 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 13:34:34,582 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 13:34:34,599 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 13:34:57,211 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 13:34:57,212 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 13:34:57,213 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 13:35:16,986 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 13:35:17,030 | INFO | main | Redis event bus started
2025-10-02 13:35:25,109 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-02 13:35:25,110 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-02 13:35:49,400 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_ikDoc
2025-10-02 13:35:49,851 | INFO | app.dependencies.redis_storage | Agent ikDoc stored in Redis
2025-10-02 13:35:51,106 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-02 13:35:51,132 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: ikDoc
2025-10-02 13:35:51,145 | INFO | app.utils.event_utils | Published event.agent.progress event for agent ikDoc for user 1
2025-10-02 13:35:51,431 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='ikDoc'
2025-10-02 13:35:51,660 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 13:35:51,930 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-02 13:35:52,766 | INFO | app.utils.event_utils | Published event.agent.progress event for agent ikDoc for user 1
2025-10-02 13:35:52,784 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_ikDoc
2025-10-02 13:35:52,855 | INFO | app.utils.event_utils | Published event.agent.progress event for agent ikDoc for user 1
2025-10-02 13:35:52,830 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 13:35:52,893 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_ikDoc\FAQ.pdf (type: pdf)
2025-10-02 13:35:52,898 | INFO | app.utils.agent_utils | Initializing AI agent for agent ikDoc
2025-10-02 13:35:53,980 | ERROR | app.utils.agent_utils | AI agent not found for agent ikDoc
2025-10-02 13:35:54,996 | INFO | app.utils.event_utils | Published event.agent.success event for agent ikDoc for user 1
2025-10-02 13:36:25,529 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 13:36:25,642 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 13:36:25,761 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.progress', 'user_id': 1, 'agent_id': 'ikDoc', 'payload': {'current': 20, 'total': 100, 'status': 'Initialize agent'}, 'timestamp': '2025-10-02T06:35:51.454565'}
2025-10-02 13:36:26,105 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 13:36:26,109 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 13:36:26,110 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.progress', 'user_id': 1, 'agent_id': 'ikDoc', 'payload': {'current': 40, 'total': 100, 'status': 'Initializing Simple RAG Agent'}, 'timestamp': '2025-10-02T06:35:52.783725'}
2025-10-02 13:36:30,533 | INFO | app.utils.agent_utils | AI agent initialized for agent ikDoc
2025-10-02 13:36:30,555 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 13:36:30,543 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 13:36:30,573 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 13:36:30,578 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.progress', 'user_id': 1, 'agent_id': 'ikDoc', 'payload': {'current': 60, 'total': 100, 'status': 'Adding Document to Simple RAG Agent'}, 'timestamp': '2025-10-02T06:36:30.536449'}
2025-10-02 13:36:30,641 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 13:36:30,641 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-02 13:36:30,642 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-02 13:36:30,644 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.success', 'user_id': 1, 'agent_id': 'ikDoc', 'payload': {'current': 100, 'total': 100, 'status': 'Agent creation is completed'}, 'timestamp': '2025-10-02T06:36:30.538449'}
2025-10-02 13:37:56,127 | INFO | app.controllers.agent_controller | Agent 'ketiga' (ID: ikDoc) invoked successfully by user khaerul@gmail.com
2025-10-02 13:37:56,138 | ERROR | app.middlewares.error_handler | Unexpected error: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\middlewares\error_handler.py", line 17, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    raise app_exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\app\routes\agent_route.py", line 120, in invokeAgent
    response = await invoke_agent(agent_id, agent_invoke, current_user, db)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-10-02 13:40:02,554 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-02 13:40:02,765 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-02 13:40:03,937 | INFO | main | Redis event bus stopped
2025-10-02 13:44:42,558 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 13:44:42,651 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 13:44:42,656 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 13:45:10,397 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 13:45:10,398 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 13:45:10,399 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 13:45:25,396 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 13:45:25,398 | INFO | main | Redis event bus started
2025-10-02 13:45:30,042 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-02 13:45:30,043 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-02 13:45:52,977 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Ckup7
2025-10-02 13:45:55,777 | INFO | app.dependencies.redis_storage | Agent Ckup7 stored in Redis
2025-10-02 13:45:56,340 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-02 13:45:56,410 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: Ckup7
2025-10-02 13:45:56,617 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Ckup7 for user 1
2025-10-02 13:45:56,825 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='Ckup7'
2025-10-02 13:45:57,153 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 13:45:57,535 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-02 13:46:00,082 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Ckup7 for user 1
2025-10-02 13:46:00,933 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 13:46:00,934 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Ckup7
2025-10-02 13:46:01,698 | INFO | app.utils.agent_utils | Initializing AI agent for agent Ckup7
2025-10-02 13:47:08,364 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 13:47:08,496 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 13:47:08,537 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.progress', 'user_id': 1, 'agent_id': 'Ckup7', 'payload': {'current': 20, 'total': 100, 'status': 'Initialize agent'}, 'timestamp': '2025-10-02T06:45:56.896912'}
2025-10-02 13:47:08,667 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 13:47:08,704 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 13:47:08,799 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.progress', 'user_id': 1, 'agent_id': 'Ckup7', 'payload': {'current': 40, 'total': 100, 'status': 'Initializing Simple RAG Agent'}, 'timestamp': '2025-10-02T06:46:00.931197'}
2025-10-02 13:47:18,504 | INFO | app.utils.agent_utils | AI agent initialized for agent Ckup7
2025-10-02 13:47:19,980 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Ckup7 for user 1
2025-10-02 13:47:19,993 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_Ckup7\FAQ.pdf (type: pdf)
2025-10-02 13:47:20,152 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 13:47:20,164 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 13:47:20,228 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 13:47:20,262 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.progress', 'user_id': 1, 'agent_id': 'Ckup7', 'payload': {'current': 60, 'total': 100, 'status': 'Adding Document to Simple RAG Agent'}, 'timestamp': '2025-10-02T06:47:20.129525'}
2025-10-02 13:47:22,459 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-02 13:47:27,376 | INFO | app.AI.simple_RAG_agent | Successfully added document 'FAQ.pdf' with ID '5'
2025-10-02 13:47:27,710 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent Ckup7
2025-10-02 13:47:28,717 | INFO | app.utils.event_utils | Published event.agent.success event for agent Ckup7 for user 1
2025-10-02 13:47:29,090 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-02 13:47:29,108 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 13:47:29,122 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-02 13:47:29,130 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.success', 'user_id': 1, 'agent_id': 'Ckup7', 'payload': {'current': 100, 'total': 100, 'status': 'Agent creation is completed'}, 'timestamp': '2025-10-02T06:47:28.750366'}
2025-10-02 13:48:29,072 | INFO | app.controllers.agent_controller | Agent 'ketiga' (ID: Ckup7) invoked successfully by user khaerul@gmail.com
2025-10-02 13:48:56,447 | INFO | app.controllers.agent_controller | Agent 'ketiga' (ID: Ckup7) invoked successfully by user khaerul@gmail.com
2025-10-02 13:50:13,170 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-02 13:50:13,173 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-02 13:50:13,299 | INFO | main | Redis event bus stopped
2025-10-02 20:35:01,252 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 20:35:01,254 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 20:35:01,255 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 20:35:33,337 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 20:35:33,339 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 20:35:33,339 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 20:35:49,543 | ERROR | main | Error starting Redis event bus: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-10-02 20:37:53,583 | ERROR | app.dependencies.redis_storage | Error while getting all agents from Redis: Error 22 connecting to localhost:6379. The remote computer refused the network connection.
2025-10-02 20:38:39,655 | ERROR | app.AI.document_store.RAG | Failed to add document 'peler.pdf': 404: Document 'peler.pdf' not found or could not be loaded.
2025-10-02 20:39:20,158 | ERROR | app.AI.document_store.RAG | Failed to add document 'FAQ.pdf': 404: Document 'FAQ.pdf' not found or could not be loaded.
2025-10-02 20:46:10,848 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-02 20:46:59,837 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-02 20:48:11,312 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-02 20:48:14,125 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '1'
2025-10-02 21:12:39,110 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 21:12:39,114 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 21:12:39,115 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 21:13:04,901 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 21:13:04,902 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 21:13:04,903 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 21:13:19,819 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 21:13:19,821 | INFO | main | Redis event bus started
2025-10-02 21:13:28,680 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-02 21:13:44,603 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Ie22T
2025-10-02 21:13:44,783 | INFO | app.dependencies.redis_storage | Agent Ie22T stored in Redis
2025-10-02 21:14:20,084 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-02 21:14:20,086 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: None
2025-10-02 21:14:20,118 | INFO | app.utils.event_utils | Published event.agent.progress event for agent None for user 1
2025-10-02 21:14:20,127 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id=None
2025-10-02 21:14:20,199 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-02 21:14:20,212 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:14:20,212 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:14:20,216 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:14:20,262 | ERROR | app.tasks.test_task | Error creating Simple RAG Agent: (pymysql.err.OperationalError) (1364, "Field 'id' doesn't have a default value")
[SQL: INSERT INTO agents (user_id, name, avatar, model, `role`, status, base_prompt, short_term_memory, long_term_memory, tone) VALUES (%(user_id)s, %(name)s, %(avatar)s, %(model)s, %(role)s, %(status)s, %(base_prompt)s, %(short_term_memory)s, %(long_term_memory)s, %(tone)s)]
[parameters: {'user_id': 1, 'name': 'ketiga', 'avatar': None, 'model': 'gpt-3.5-turbo', 'role': 'simple RAG agent', 'status': 'active', 'base_prompt': 'pp', 'short_term_memory': 0, 'long_term_memory': 0, 'tone': 'friendly'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-10-02 21:14:20,273 | INFO | app.utils.event_utils | Published event.agent.failure event for agent 2 for user 1
2025-10-02 21:14:20,313 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.failure.user:1
2025-10-02 21:14:20,320 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:14:20,330 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_FAILURE
2025-10-02 21:15:31,505 | INFO | main | Redis event bus stopped
2025-10-02 21:15:59,252 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 21:15:59,254 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 21:15:59,254 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 21:16:28,647 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 21:16:28,649 | INFO | main | Redis event bus started
2025-10-02 21:17:08,818 | INFO | main | Redis event bus stopped
2025-10-02 21:17:24,623 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 21:17:24,626 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 21:17:24,628 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 21:17:28,924 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-02 21:17:28,932 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: Ie22T
2025-10-02 21:17:28,937 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Ie22T for user 1
2025-10-02 21:17:28,939 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='Ie22T'
2025-10-02 21:17:29,024 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-02 21:17:29,036 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:17:29,050 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Ie22T for user 1
2025-10-02 21:17:29,056 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:17:29,055 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Ie22T
2025-10-02 21:17:29,065 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Ie22T for user 1
2025-10-02 21:17:29,072 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:17:29,078 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_Ie22T\FAQ.pdf (type: pdf)
2025-10-02 21:17:38,288 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-02 21:17:42,843 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '6'
2025-10-02 21:17:42,913 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent Ie22T
2025-10-02 21:17:43,598 | INFO | app.utils.event_utils | Published event.agent.success event for agent Ie22T for user 1
2025-10-02 21:17:43,644 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-02 21:17:45,087 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 21:17:45,089 | INFO | main | Redis event bus started
2025-10-02 21:18:24,191 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_ax405
2025-10-02 21:18:24,457 | INFO | app.dependencies.redis_storage | Agent ax405 stored in Redis
2025-10-02 21:18:24,482 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-02 21:18:24,533 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: None
2025-10-02 21:18:24,709 | INFO | app.utils.event_utils | Published event.agent.progress event for agent None for user 1
2025-10-02 21:18:24,742 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:18:24,720 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id=None
2025-10-02 21:18:24,743 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:18:24,940 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-02 21:18:24,723 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:18:25,498 | INFO | app.utils.event_utils | Published event.agent.progress event for agent None for user 1
2025-10-02 21:18:25,502 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_None
2025-10-02 21:18:25,604 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:18:25,696 | INFO | app.utils.event_utils | Published event.agent.progress event for agent None for user 1
2025-10-02 21:18:25,734 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_None\FAQ.pdf (type: pdf)
2025-10-02 21:18:25,697 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:18:25,963 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:18:25,887 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:18:26,071 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:18:26,072 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:18:26,776 | INFO | app.utils.file_utils | Rollback: Removed file documents/user_1/agent_None\FAQ.pdf
2025-10-02 21:18:27,298 | ERROR | app.tasks.test_task | Error creating Simple RAG Agent: (pymysql.err.OperationalError) (1364, "Field 'id' doesn't have a default value")
[SQL: INSERT INTO agents (user_id, name, avatar, model, `role`, status, base_prompt, short_term_memory, long_term_memory, tone) VALUES (%(user_id)s, %(name)s, %(avatar)s, %(model)s, %(role)s, %(status)s, %(base_prompt)s, %(short_term_memory)s, %(long_term_memory)s, %(tone)s)]
[parameters: {'user_id': 1, 'name': 'ketiga', 'avatar': None, 'model': 'gpt-3.5-turbo', 'role': 'simple RAG agent', 'status': 'active', 'base_prompt': 'pp', 'short_term_memory': 0, 'long_term_memory': 0, 'tone': 'friendly'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-10-02 21:18:27,799 | INFO | app.utils.event_utils | Published event.agent.failure event for agent 2 for user 1
2025-10-02 21:18:27,904 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.failure.user:1
2025-10-02 21:18:27,887 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:18:28,055 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_FAILURE
2025-10-02 21:20:08,998 | INFO | main | Redis event bus stopped
2025-10-02 21:20:25,642 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 21:20:25,643 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 21:20:25,644 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 21:20:39,915 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 21:20:39,931 | INFO | main | Redis event bus started
2025-10-02 21:21:22,746 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-02 21:21:22,749 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: ax405
2025-10-02 21:21:22,752 | INFO | app.utils.event_utils | Published event.agent.progress event for agent ax405 for user 1
2025-10-02 21:21:22,753 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='ax405'
2025-10-02 21:21:22,829 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:21:22,829 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:21:22,831 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:21:22,827 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-02 21:21:22,858 | INFO | app.utils.event_utils | Published event.agent.progress event for agent ax405 for user 1
2025-10-02 21:21:23,219 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_ax405
2025-10-02 21:21:23,221 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:21:23,220 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:21:23,224 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:21:23,231 | INFO | app.utils.event_utils | Published event.agent.progress event for agent ax405 for user 1
2025-10-02 21:21:23,243 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:21:23,244 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:21:23,255 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:21:23,254 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_ax405\FAQ.pdf (type: pdf)
2025-10-02 21:21:28,886 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-02 21:21:31,259 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '7'
2025-10-02 21:21:31,282 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent ax405
2025-10-02 21:21:31,474 | INFO | app.utils.event_utils | Published event.agent.success event for agent ax405 for user 1
2025-10-02 21:21:31,502 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:21:31,503 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-02 21:21:31,492 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-02 21:21:42,591 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_6xnI1
2025-10-02 21:21:42,759 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-02 21:21:42,783 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: 6xnI1
2025-10-02 21:21:43,088 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 6xnI1 for user 1
2025-10-02 21:21:43,112 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='6xnI1'
2025-10-02 21:21:43,261 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-02 21:21:43,421 | INFO | app.dependencies.redis_storage | Agent 6xnI1 stored in Redis
2025-10-02 21:21:43,428 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:21:43,429 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:21:43,420 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:21:43,654 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 6xnI1 for user 1
2025-10-02 21:21:43,670 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_6xnI1
2025-10-02 21:21:43,704 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:21:43,689 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:21:43,777 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:21:43,921 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 6xnI1 for user 1
2025-10-02 21:21:44,023 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_6xnI1\FAQ.pdf (type: pdf)
2025-10-02 21:21:44,058 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:21:44,084 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:21:44,046 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:21:50,785 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-02 21:21:52,690 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '8'
2025-10-02 21:21:52,692 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent 6xnI1
2025-10-02 21:21:52,746 | INFO | app.utils.event_utils | Published event.agent.success event for agent 6xnI1 for user 1
2025-10-02 21:21:52,761 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-02 21:21:52,771 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:21:52,984 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-02 21:21:53,490 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-02 21:21:53,513 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: 6xnI1
2025-10-02 21:21:53,527 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 6xnI1 for user 1
2025-10-02 21:21:53,540 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:21:53,530 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='6xnI1'
2025-10-02 21:21:53,531 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:21:53,541 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:21:53,562 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-02 21:21:53,573 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 6xnI1 for user 1
2025-10-02 21:21:53,580 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_6xnI1
2025-10-02 21:21:53,581 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:21:53,592 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:21:53,597 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:21:53,597 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 6xnI1 for user 1
2025-10-02 21:21:53,620 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:21:53,613 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:21:53,622 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:21:53,627 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_6xnI1\FAQ.pdf (type: pdf)
2025-10-02 21:21:53,695 | INFO | app.utils.file_utils | Rollback: Removed file documents/user_1/agent_6xnI1\FAQ.pdf
2025-10-02 21:21:53,731 | ERROR | app.tasks.test_task | Error creating Simple RAG Agent: (pymysql.err.IntegrityError) (1062, "Duplicate entry '6xnI1' for key 'agents.PRIMARY'")
[SQL: INSERT INTO agents (id, user_id, name, avatar, model, `role`, status, base_prompt, short_term_memory, long_term_memory, tone) VALUES (%(id)s, %(user_id)s, %(name)s, %(avatar)s, %(model)s, %(role)s, %(status)s, %(base_prompt)s, %(short_term_memory)s, %(long_term_memory)s, %(tone)s)]
[parameters: {'id': '6xnI1', 'user_id': 1, 'name': 'ketiga', 'avatar': None, 'model': 'gpt-3.5-turbo', 'role': 'simple RAG agent', 'status': 'active', 'base_prompt': 'pp', 'short_term_memory': 0, 'long_term_memory': 0, 'tone': 'friendly'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-02 21:21:53,759 | INFO | app.utils.event_utils | Published event.agent.failure event for agent 2 for user 1
2025-10-02 21:21:53,890 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:21:53,891 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_FAILURE
2025-10-02 21:21:53,911 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.failure.user:1
2025-10-02 21:23:08,887 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_wuAbI
2025-10-02 21:23:09,153 | INFO | app.dependencies.redis_storage | Agent wuAbI stored in Redis
2025-10-02 21:23:09,436 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-02 21:23:09,447 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: wuAbI
2025-10-02 21:23:10,094 | INFO | app.utils.event_utils | Published event.agent.progress event for agent wuAbI for user 1
2025-10-02 21:23:10,228 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='wuAbI'
2025-10-02 21:23:10,328 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:23:10,331 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:23:10,324 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:23:10,380 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-02 21:23:10,385 | INFO | app.utils.event_utils | Published event.agent.progress event for agent wuAbI for user 1
2025-10-02 21:23:10,389 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_wuAbI
2025-10-02 21:23:10,405 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:23:10,422 | INFO | app.utils.event_utils | Published event.agent.progress event for agent wuAbI for user 1
2025-10-02 21:23:10,429 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:23:10,429 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:23:10,451 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:23:10,515 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_wuAbI\FAQ.pdf (type: pdf)
2025-10-02 21:23:10,556 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:23:10,581 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:23:18,796 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-02 21:23:21,075 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '9'
2025-10-02 21:23:21,089 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent wuAbI
2025-10-02 21:23:21,131 | INFO | app.utils.event_utils | Published event.agent.success event for agent wuAbI for user 1
2025-10-02 21:23:21,143 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-02 21:23:21,143 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:23:21,156 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-02 21:23:21,253 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-02 21:23:21,263 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: wuAbI
2025-10-02 21:23:21,311 | INFO | app.utils.event_utils | Published event.agent.progress event for agent wuAbI for user 1
2025-10-02 21:23:21,351 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:23:21,345 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='wuAbI'
2025-10-02 21:23:21,352 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:23:21,361 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-02 21:23:21,419 | INFO | app.utils.event_utils | Published event.agent.progress event for agent wuAbI for user 1
2025-10-02 21:23:21,440 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_wuAbI
2025-10-02 21:23:21,455 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:23:21,469 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:23:21,505 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:23:21,510 | INFO | app.utils.event_utils | Published event.agent.progress event for agent wuAbI for user 1
2025-10-02 21:23:21,556 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_wuAbI\FAQ.pdf (type: pdf)
2025-10-02 21:23:21,582 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:23:21,571 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:23:21,589 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:23:21,618 | INFO | app.utils.file_utils | Rollback: Removed file documents/user_1/agent_wuAbI\FAQ.pdf
2025-10-02 21:23:21,645 | ERROR | app.tasks.test_task | Error creating Simple RAG Agent: (pymysql.err.IntegrityError) (1062, "Duplicate entry 'wuAbI' for key 'agents.PRIMARY'")
[SQL: INSERT INTO agents (id, user_id, name, avatar, model, `role`, status, base_prompt, short_term_memory, long_term_memory, tone) VALUES (%(id)s, %(user_id)s, %(name)s, %(avatar)s, %(model)s, %(role)s, %(status)s, %(base_prompt)s, %(short_term_memory)s, %(long_term_memory)s, %(tone)s)]
[parameters: {'id': 'wuAbI', 'user_id': 1, 'name': 'ketiga', 'avatar': None, 'model': 'gpt-3.5-turbo', 'role': 'simple RAG agent', 'status': 'active', 'base_prompt': 'pp', 'short_term_memory': 0, 'long_term_memory': 0, 'tone': 'friendly'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-02 21:23:21,682 | INFO | app.utils.event_utils | Published event.agent.failure event for agent 2 for user 1
2025-10-02 21:23:21,707 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:23:22,012 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_FAILURE
2025-10-02 21:23:21,725 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.failure.user:1
2025-10-02 21:25:17,089 | INFO | main | Redis event bus stopped
2025-10-02 21:25:40,101 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 21:25:40,102 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 21:25:40,103 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 21:26:13,846 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 21:26:13,848 | INFO | main | Redis event bus started
2025-10-02 21:30:22,189 | INFO | main | Redis event bus stopped
2025-10-02 21:31:46,343 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 21:31:46,345 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 21:31:46,346 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 21:32:11,560 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 21:32:11,565 | INFO | main | Redis event bus started
2025-10-02 21:32:28,679 | INFO | main | Redis event bus stopped
2025-10-02 21:32:45,347 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 21:32:45,348 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 21:32:45,349 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 21:33:04,469 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 21:33:04,475 | INFO | main | Redis event bus started
2025-10-02 21:33:36,159 | INFO | main | Redis event bus stopped
2025-10-02 21:33:47,665 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 21:33:47,667 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 21:33:47,668 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 21:34:02,145 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 21:34:02,147 | INFO | main | Redis event bus started
2025-10-02 21:34:30,061 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_jg903
2025-10-02 21:34:31,103 | INFO | app.dependencies.redis_storage | Agent jg903 stored in Redis
2025-10-02 21:34:31,740 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-02 21:34:32,024 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: jg903
2025-10-02 21:34:32,534 | INFO | app.utils.event_utils | Published event.agent.progress event for agent jg903 for user 1
2025-10-02 21:34:32,857 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='jg903'
2025-10-02 21:34:33,774 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:34:33,780 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:34:33,779 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:34:33,953 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-02 21:34:33,967 | INFO | app.utils.event_utils | Published event.agent.progress event for agent jg903 for user 1
2025-10-02 21:34:33,973 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_jg903
2025-10-02 21:34:33,977 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:34:33,989 | INFO | app.utils.event_utils | Published event.agent.progress event for agent jg903 for user 1
2025-10-02 21:34:33,994 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-02 21:34:33,995 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:34:34,009 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:34:34,034 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_jg903\FAQ.pdf (type: pdf)
2025-10-02 21:34:34,042 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:34:34,053 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-02 21:34:45,762 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-02 21:34:47,625 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '10'
2025-10-02 21:34:47,635 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent jg903
2025-10-02 21:34:47,692 | INFO | app.utils.event_utils | Published event.agent.success event for agent jg903 for user 1
2025-10-02 21:34:47,766 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-02 21:34:47,863 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-02 21:34:47,752 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-02 21:35:43,695 | INFO | main | Redis event bus stopped
2025-10-02 21:36:03,289 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 21:36:03,295 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 21:36:03,297 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 21:38:54,102 | INFO | app.dependencies.redis_storage | Agent jg903 retrieved from Redis
2025-10-02 21:55:32,898 | INFO | app.dependencies.redis_storage | Agent jg903 retrieved from Redis
2025-10-02 21:55:44,831 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 21:55:44,833 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 21:55:44,834 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 21:56:22,029 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 21:56:22,030 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 21:56:22,031 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 21:56:38,648 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 21:56:38,650 | INFO | main | Redis event bus started
2025-10-02 21:57:35,830 | ERROR | app.middlewares.error_handler | Unexpected error: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\encoders.py", line 324, in jsonable_encoder
    data = dict(obj)
TypeError: 'coroutine' object is not iterable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\encoders.py", line 329, in jsonable_encoder
    data = vars(obj)
TypeError: vars() argument must have __dict__ attribute

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\middlewares\error_handler.py", line 17, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    raise app_exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\routing.py", line 328, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\routing.py", line 202, in serialize_response
    return jsonable_encoder(response_content)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\encoders.py", line 289, in jsonable_encoder
    encoded_value = jsonable_encoder(
        value,
    ...<4 lines>...
        sqlalchemy_safe=sqlalchemy_safe,
    )
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\encoders.py", line 332, in jsonable_encoder
    raise ValueError(errors) from e
ValueError: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]
2025-10-02 21:58:32,012 | INFO | main | Redis event bus stopped
2025-10-02 21:59:07,749 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 21:59:07,774 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 21:59:07,776 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 21:59:34,043 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 21:59:34,049 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 21:59:34,050 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 21:59:50,381 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 21:59:50,385 | INFO | main | Redis event bus started
2025-10-02 22:00:01,499 | ERROR | app.utils.error_utils | Unexpected error during invoking agent: 'jg903'
2025-10-02 22:00:18,512 | ERROR | app.utils.error_utils | Unexpected error during invoking agent: 'jg903'
2025-10-02 22:02:05,861 | INFO | main | Redis event bus stopped
2025-10-02 22:02:32,680 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 22:02:32,684 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 22:02:32,687 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 22:02:49,318 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 22:02:49,320 | INFO | main | Redis event bus started
2025-10-02 22:03:01,689 | ERROR | app.utils.error_utils | Unexpected error during invoking agent: 'jg903'
2025-10-02 22:05:30,924 | INFO | main | Redis event bus stopped
2025-10-02 22:09:51,826 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 22:09:51,874 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 22:09:51,916 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 22:10:26,340 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 22:10:26,341 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 22:10:26,342 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 22:11:10,107 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 22:11:10,161 | INFO | main | Redis event bus started
2025-10-02 22:11:19,682 | INFO | app.dependencies.redis_storage | Agent jg903 retrieved from Redis
2025-10-02 22:11:51,626 | INFO | app.controllers.agent_controller | Agent built from redis: <app.AI.simple_RAG_agent.Agent object at 0x000002200F205010>
2025-10-02 22:11:53,408 | INFO | app.controllers.agent_controller | Agent 'ketiga' (ID: jg903) invoked successfully by user khaerul@gmail.com
2025-10-02 22:12:10,812 | INFO | app.dependencies.redis_storage | Agent jg903 retrieved from Redis
2025-10-02 22:12:25,712 | INFO | app.controllers.agent_controller | Agent built from redis: <app.AI.simple_RAG_agent.Agent object at 0x00000220109882D0>
2025-10-02 22:12:47,083 | INFO | app.controllers.agent_controller | Agent 'ketiga' (ID: jg903) invoked successfully by user khaerul@gmail.com
2025-10-02 22:14:53,787 | INFO | main | Redis event bus stopped
2025-10-02 22:15:08,926 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-02 22:15:08,929 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-02 22:15:08,931 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-02 22:15:32,949 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*']
2025-10-02 22:15:32,953 | INFO | main | Redis event bus started
2025-10-02 22:15:53,597 | WARNING | app.dependencies.auth | Access attempt without token
2025-10-02 22:16:05,525 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-02 22:16:14,473 | INFO | app.dependencies.redis_storage | Agent jg903 retrieved from Redis
2025-10-02 22:16:51,688 | INFO | app.controllers.agent_controller | Agent built from redis: <app.AI.simple_RAG_agent.Agent object at 0x000001F9F797B0E0>
2025-10-02 22:16:54,566 | INFO | app.controllers.agent_controller | Agent 'ketiga' (ID: jg903) invoked successfully by user khaerul@gmail.com
2025-10-02 22:17:18,538 | INFO | app.controllers.agent_controller | Agent 'ketiga' (ID: jg903) invoked successfully by user khaerul@gmail.com
2025-10-02 22:17:35,355 | INFO | app.controllers.agent_controller | Agent 'ketiga' (ID: jg903) invoked successfully by user khaerul@gmail.com
2025-10-02 22:18:21,548 | INFO | main | Redis event bus stopped
2025-10-03 09:01:44,868 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-03 09:01:44,891 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-03 09:01:44,893 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-03 09:01:44,894 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-03 09:02:12,925 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-03 09:02:12,933 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-03 09:02:12,934 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-03 09:02:12,935 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-03 09:02:26,256 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-03 09:02:26,257 | INFO | main | Redis event bus started
2025-10-03 09:03:34,137 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-03 09:03:34,160 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-03 09:03:51,590 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-03 09:04:02,168 | WARNING | app.controllers.agent_controller | Agent not found
2025-10-03 09:05:12,674 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-03 09:05:12,856 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-03 09:05:13,472 | INFO | main | Redis event bus stopped
2025-10-03 09:05:25,910 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-03 09:05:25,911 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-03 09:05:25,913 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-03 09:05:25,914 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-03 09:05:48,298 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-03 09:05:48,303 | INFO | main | Redis event bus started
2025-10-03 09:06:22,415 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_tN727
2025-10-03 09:06:24,230 | INFO | app.dependencies.redis_storage | Agent tN727 stored in Redis
2025-10-03 09:06:26,759 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-03 09:06:26,792 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: tN727
2025-10-03 09:06:26,928 | INFO | app.utils.event_utils | Published event.agent.progress event for agent tN727 for user 1
2025-10-03 09:06:26,951 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='tN727'
2025-10-03 09:06:27,231 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-03 09:06:27,396 | INFO | app.utils.event_utils | Published event.agent.progress event for agent tN727 for user 1
2025-10-03 09:06:27,409 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_tN727
2025-10-03 09:06:27,442 | INFO | app.utils.event_utils | Published event.agent.progress event for agent tN727 for user 1
2025-10-03 09:06:27,457 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_tN727\FAQ.pdf (type: pdf)
2025-10-03 09:06:27,535 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-03 09:06:27,523 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-03 09:06:27,594 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-03 09:06:29,783 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-03 09:06:29,882 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-03 09:06:29,807 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-03 09:06:29,901 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-03 09:06:29,915 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-03 09:06:29,919 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-03 09:06:35,391 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-03 09:06:35,398 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-03 09:06:38,741 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-03 09:06:43,575 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '11'
2025-10-03 09:06:43,580 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent tN727
2025-10-03 09:06:43,603 | INFO | app.utils.event_utils | Published event.agent.success event for agent tN727 for user 1
2025-10-03 09:06:43,620 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-03 09:06:43,635 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-03 09:06:43,639 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-03 09:06:43,639 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.success', 'user_id': 1, 'agent_id': 'tN727', 'payload': {'current': 100, 'total': 100, 'status': 'Agent creation is completed'}, 'timestamp': '2025-10-03T02:06:43.617915'}
2025-10-03 09:07:25,782 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.invoke.user:1
2025-10-03 09:07:25,796 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-03 09:07:25,811 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_INVOKE
2025-10-03 09:07:25,815 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.invoke', 'user_id': 1, 'agent_id': 'tN727', 'payload': {'message': 'Building the agent...'}, 'timestamp': '2025-10-03T02:07:25.512442'}
2025-10-03 09:07:25,825 | INFO | app.dependencies.redis_storage | Agent tN727 retrieved from Redis
2025-10-03 09:07:47,893 | INFO | app.controllers.agent_controller | Agent built from redis: <app.AI.simple_RAG_agent.Agent object at 0x00000271CD79B380>
2025-10-03 09:07:48,105 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.invoke.user:1
2025-10-03 09:07:50,939 | INFO | app.controllers.agent_controller | Agent 'ketiga' (ID: tN727) invoked successfully by user khaerul@gmail.com
2025-10-03 09:07:50,943 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-03 09:07:50,950 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_INVOKE
2025-10-03 09:07:50,951 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.invoke', 'user_id': 1, 'agent_id': 'tN727', 'payload': {'message': 'Reasoning...'}, 'timestamp': '2025-10-03T02:07:48.092595'}
2025-10-03 09:08:10,393 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-03 09:08:10,398 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-03 09:08:10,498 | INFO | main | Redis event bus stopped
2025-10-03 19:40:39,089 | ERROR | app.dependencies.redis_storage | Error while getting all agents from Redis: Error 22 connecting to localhost:6379. The remote computer refused the network connection.
2025-10-03 19:46:03,518 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-03 19:46:03,703 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-03 19:46:03,777 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-03 19:46:03,784 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-03 19:49:43,760 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-03 19:49:43,764 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-03 19:49:43,767 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-03 19:49:43,768 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-03 19:51:58,546 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-03 19:51:58,588 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-03 19:51:58,600 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-03 19:51:58,650 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-03 20:06:00,046 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-03 20:06:00,139 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-03 20:06:00,221 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-03 20:06:00,371 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-03 20:07:07,319 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-03 20:07:07,385 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-03 20:07:07,386 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-03 20:07:07,659 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-03 20:07:59,272 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-03 20:07:59,294 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-03 20:07:59,357 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-03 20:07:59,440 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-03 20:08:26,977 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-03 20:08:26,981 | INFO | main | Redis event bus started
2025-10-03 20:08:52,471 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-03 20:09:24,667 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_vW546
2025-10-03 20:09:27,369 | INFO | app.dependencies.redis_storage | Agent vW546 stored in Redis
2025-10-03 20:09:28,323 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-03 20:09:28,357 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: vW546
2025-10-03 20:09:28,373 | INFO | app.utils.event_utils | Published event.agent.progress event for agent vW546 for user 1
2025-10-03 20:09:28,538 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='vW546'
2025-10-03 20:09:29,807 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-03 20:09:29,797 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-03 20:09:30,194 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-03 20:09:30,207 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-03 20:09:30,232 | INFO | app.utils.event_utils | Published event.agent.progress event for agent vW546 for user 1
2025-10-03 20:09:30,395 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-03 20:09:30,394 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-03 20:09:30,439 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-03 20:09:30,363 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_vW546
2025-10-03 20:09:30,498 | INFO | app.utils.event_utils | Published event.agent.progress event for agent vW546 for user 1
2025-10-03 20:09:30,549 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-03 20:09:30,552 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_vW546\FAQ.pdf (type: pdf)
2025-10-03 20:09:30,716 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-03 20:09:30,538 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-03 20:09:50,565 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-03 20:09:57,865 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '12'
2025-10-03 20:09:57,918 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent vW546
2025-10-03 20:09:58,102 | INFO | app.utils.event_utils | Published event.agent.success event for agent vW546 for user 1
2025-10-03 20:09:58,181 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-03 20:09:58,191 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-03 20:09:58,193 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-03 20:18:22,086 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-03 20:18:22,231 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-03 20:19:01,703 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-03 20:19:01,720 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-03 20:19:01,749 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-03 20:19:01,815 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-03 20:19:26,094 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-03 20:19:26,136 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-03 20:19:44,948 | ERROR | app.websocket.ws_route | Error in agent invoke: (pymysql.err.DataError) (1265, "Data truncated for column 'user_platform' at row 1")
[SQL: INSERT INTO user_agents (id, agent_id, username, user_platform) VALUES (%(id)s, %(agent_id)s, %(username)s, %(user_platform)s)]
[parameters: {'id': 'vW546', 'agent_id': 'vW546', 'username': 'WebSocket User', 'user_platform': 'websocket'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-10-03 20:20:16,233 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-03 20:20:16,462 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-03 20:20:16,463 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-03 20:20:16,463 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-03 20:21:24,384 | INFO | main | Redis event bus stopped
2025-10-03 20:22:03,099 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-03 20:22:03,101 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-03 20:22:03,103 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-03 20:22:03,107 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-03 20:22:54,778 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-03 20:22:54,813 | INFO | main | Redis event bus started
2025-10-03 20:22:54,978 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-03 20:22:55,025 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-03 20:23:45,242 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-03 20:23:45,314 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-03 20:23:45,526 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-03 20:23:45,528 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-03 20:23:57,061 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-03 20:23:57,068 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-03 20:24:07,585 | INFO | app.dependencies.redis_storage | Agent vW546 retrieved from Redis
2025-10-03 20:24:48,503 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.NO_STATUS_RCVD: 1005>, '')
2025-10-03 20:24:48,509 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-03 20:24:48,540 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-03 20:24:48,555 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-03 20:25:35,884 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-03 20:25:35,886 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-03 20:25:56,519 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-03 20:25:56,560 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-03 20:25:56,591 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-03 20:25:56,593 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-03 20:26:35,261 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-03 20:26:35,324 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-03 20:28:05,330 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-03 20:28:05,331 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-03 20:28:05,430 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-03 20:28:06,013 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-03 20:28:25,642 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-03 20:28:25,644 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-03 20:31:12,841 | ERROR | app.websocket.ws_route | Error in agent invoke: (1012, None)
2025-10-03 20:31:13,031 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-03 20:31:13,037 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-03 20:31:13,039 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-03 20:31:13,305 | INFO | main | Redis event bus stopped
2025-10-03 20:32:19,896 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-03 20:32:20,029 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-03 20:32:20,094 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-03 20:32:20,158 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-03 20:33:07,438 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-03 20:33:07,495 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-03 20:33:07,668 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-03 20:33:07,952 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-03 20:34:01,951 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-03 20:34:02,440 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-03 20:34:02,629 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-03 20:34:02,640 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-03 20:34:32,397 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-03 20:34:32,433 | INFO | main | Redis event bus started
2025-10-03 20:34:46,103 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-03 20:34:46,119 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-03 20:34:49,945 | INFO | app.dependencies.redis_storage | Agent vW546 retrieved from Redis
2025-10-03 20:37:28,803 | ERROR | app.websocket.ws_route | Error in agent invoke: (1012, None)
2025-10-03 20:37:28,828 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-03 20:37:28,832 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-03 20:37:28,834 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-03 20:37:30,174 | INFO | main | Redis event bus stopped
2025-10-04 08:24:22,874 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:24:22,877 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:24:22,877 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:24:22,877 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:24:45,858 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:24:45,860 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:24:45,862 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:24:45,863 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:25:01,115 | ERROR | main | Error starting Redis event bus: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-10-04 08:26:57,203 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-04 08:27:12,249 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_69203
2025-10-04 08:28:42,160 | ERROR | main | Error stopping Redis event bus: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-10-04 08:29:11,297 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:29:11,308 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:29:11,319 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:29:11,320 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:29:36,242 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:29:36,243 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:29:36,244 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:29:36,244 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:29:53,514 | ERROR | main | Error starting Redis event bus: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-10-04 08:30:00,101 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_96931
2025-10-04 08:31:05,520 | ERROR | main | Error stopping Redis event bus: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-10-04 08:31:12,648 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:31:12,654 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:31:12,656 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:31:12,679 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:31:36,690 | ERROR | main | Error starting Redis event bus: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-10-04 08:31:37,026 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Ps959
2025-10-04 08:33:28,194 | ERROR | main | Error stopping Redis event bus: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-10-04 08:33:37,012 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:33:37,017 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:33:37,018 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:33:37,019 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:34:10,568 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:34:10,770 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:34:10,789 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:34:10,797 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:34:29,341 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:34:29,342 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:34:29,343 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:34:29,343 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:34:45,007 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:34:45,008 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:34:45,009 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:34:45,009 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:35:01,352 | ERROR | main | Error starting Redis event bus: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-10-04 08:35:09,032 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_YE921
2025-10-04 08:35:09,142 | ERROR | app.utils.file_utils | Failed to create database for products.csv: [Errno 2] No such file or directory: 'documents/user_1/agent_YE921\\products.csv'
2025-10-04 08:35:09,150 | ERROR | app.utils.file_utils | Error processing dataset info for products.csv: [Errno 2] No such file or directory: 'documents/user_1/agent_YE921\\products.csv'
2025-10-04 08:35:09,157 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-04 08:36:08,116 | ERROR | main | Error stopping Redis event bus: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-10-04 08:36:23,008 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:36:23,010 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:36:23,011 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:36:23,011 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:36:39,915 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:36:39,916 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:36:39,917 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:36:39,917 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:36:55,147 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:36:55,148 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:36:55,149 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:36:55,150 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:37:10,728 | ERROR | main | Error starting Redis event bus: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-10-04 08:37:16,981 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_c9689
2025-10-04 08:37:18,428 | INFO | app.utils.file_utils | Created database documents/user_1/agent_c9689\products.db from products.csv
2025-10-04 08:37:18,958 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-04 08:43:37,154 | ERROR | main | Error stopping Redis event bus: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-10-04 08:43:45,825 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:43:45,827 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:43:45,828 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:43:45,830 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:44:11,164 | ERROR | main | Error starting Redis event bus: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-10-04 08:45:26,590 | ERROR | main | Error stopping Redis event bus: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-10-04 08:45:34,005 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:45:34,007 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:45:34,008 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:45:34,009 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:47:21,621 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:47:21,622 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:47:21,622 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:47:21,623 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:48:39,129 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:48:39,130 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:48:39,131 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:48:39,132 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:49:19,604 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:49:19,608 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:49:19,609 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:49:19,612 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:49:36,845 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:49:36,846 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:49:36,847 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:49:36,848 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:49:54,798 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:49:54,799 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:49:54,800 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:49:54,801 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:51:07,012 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:51:07,013 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:51:07,013 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:51:07,014 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:52:30,411 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:52:30,412 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:52:30,413 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:52:30,413 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:52:55,867 | ERROR | main | Error starting Redis event bus: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-10-04 08:57:20,645 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:57:20,649 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:57:20,649 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:57:20,650 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:57:41,943 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 08:57:41,946 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 08:57:41,949 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 08:57:41,950 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 08:57:56,789 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 08:57:56,791 | INFO | main | Redis event bus started
2025-10-04 08:59:02,093 | INFO | main | Redis event bus stopped
2025-10-04 10:45:25,692 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 10:45:25,697 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 10:45:25,698 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 10:45:25,698 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 10:46:25,742 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 10:46:25,743 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 10:46:25,743 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 10:46:25,744 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 10:46:49,975 | ERROR | main | Error starting Redis event bus: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-10-04 10:48:43,346 | INFO | main | Redis event bus stopped
2025-10-04 10:49:03,679 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 10:49:03,688 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 10:49:03,690 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 10:49:03,691 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 10:49:36,522 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 10:49:36,527 | INFO | main | Redis event bus started
2025-10-04 10:50:03,439 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-04 10:50:10,057 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Hg020
2025-10-04 10:50:11,332 | INFO | app.utils.file_utils | Created database documents/user_1/agent_Hg020\products.db from products.csv
2025-10-04 10:50:11,765 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-04 10:50:39,820 | INFO | app.dependencies.redis_storage | Agent Hg020 stored in Redis
2025-10-04 10:51:35,259 | INFO | main | Redis event bus stopped
2025-10-04 10:52:47,916 | INFO | app.dependencies.redis_storage | Agent Hg020 retrieved from Redis
2025-10-04 11:17:15,073 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:17:15,093 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:17:15,093 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:17:15,094 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:17:52,219 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:17:52,220 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:17:52,221 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:17:52,222 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:18:08,440 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 11:18:08,442 | INFO | main | Redis event bus started
2025-10-04 11:19:48,418 | INFO | main | Redis event bus stopped
2025-10-04 11:20:04,539 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:20:04,541 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:20:04,545 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:20:04,585 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:20:19,960 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 11:20:19,965 | INFO | main | Redis event bus started
2025-10-04 11:20:30,918 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_gO822
2025-10-04 11:20:31,941 | INFO | app.utils.file_utils | Created database documents/user_1/agent_gO822\products.db from products.csv
2025-10-04 11:20:32,069 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-04 11:20:32,187 | INFO | app.dependencies.redis_storage | Agent gO822 stored in Redis
2025-10-04 11:20:33,829 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-04 11:20:33,852 | INFO | app.tasks.test_task | Creating Customer Service Agent for user 1
2025-10-04 11:20:34,094 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 11:20:34,500 | INFO | app.tasks.test_task | Agent data: id='gO822' name='Customer Support Bot' avatar=None model='gpt-4o' description=None base_prompt='You are a helpful customer service agent' tone='friendly' short_term_memory=False long_term_memory=False status='active' company_name='PT. lord suroso' industry='Teknologi AI' company_description='tidak ada' address='jln.kwitang no 4, Jakarta Pusat' email='suroso@gmail.com' website=None fallback_email='siti@gmail.com'
2025-10-04 11:20:34,839 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 11:20:34,841 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 11:20:34,830 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 11:20:35,323 | INFO | app.tasks.test_task | New agent: <Agent name=Customer Support Bot user_id=1>
2025-10-04 11:20:35,354 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 11:20:35,384 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 11:20:35,393 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 11:20:35,741 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 11:20:36,070 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 11:20:36,076 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 11:20:36,081 | ERROR | app.tasks.test_task | Error creating Customer Service Agent: invalid literal for int() with base 10: 'gO822'
2025-10-04 11:20:36,091 | INFO | app.utils.event_utils | Published event.agent.failure event for agent 2 for user 1
2025-10-04 11:20:36,097 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 11:20:36,103 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 11:20:36,122 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.failure.user:1
2025-10-04 11:20:36,120 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 11:20:36,202 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_FAILURE
2025-10-04 11:21:38,524 | INFO | main | Redis event bus stopped
2025-10-04 11:22:06,086 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:22:06,180 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:22:06,248 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:22:06,368 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:22:24,977 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 11:22:24,980 | INFO | main | Redis event bus started
2025-10-04 11:22:33,621 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_z0517
2025-10-04 11:22:33,953 | INFO | app.utils.file_utils | Created database documents/user_1/agent_z0517\products.db from products.csv
2025-10-04 11:22:34,269 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-04 11:22:34,493 | INFO | app.dependencies.redis_storage | Agent z0517 stored in Redis
2025-10-04 11:23:07,005 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-04 11:23:07,006 | INFO | app.tasks.test_task | Creating Customer Service Agent for user 1
2025-10-04 11:23:07,016 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 11:23:07,017 | INFO | app.tasks.test_task | Agent data: id='z0517' name='Customer Support Bot' avatar=None model='gpt-4o' description=None base_prompt='You are a helpful customer service agent' tone='friendly' short_term_memory=False long_term_memory=False status='active' company_name='PT. lord suroso' industry='Teknologi AI' company_description='tidak ada' address='jln.kwitang no 4, Jakarta Pusat' email='suroso@gmail.com' website=None fallback_email='siti@gmail.com'
2025-10-04 11:23:07,093 | INFO | app.tasks.test_task | New agent: <Agent name=Customer Support Bot user_id=1>
2025-10-04 11:23:07,099 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 11:23:07,101 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 11:23:07,124 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 11:23:07,134 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 11:23:07,131 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 11:23:07,150 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 11:23:07,156 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 11:23:07,206 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 11:23:07,210 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_z0517
2025-10-04 11:23:07,217 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 11:23:07,223 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 11:23:07,211 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 11:23:07,226 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 11:23:07,243 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 11:23:07,253 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 11:23:07,243 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 11:23:07,257 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 11:23:07,276 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 11:23:07,290 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 11:23:07,322 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 11:23:07,286 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_z0517\FAQ.pdf (type: pdf)
2025-10-04 11:23:07,466 | INFO | app.tasks.test_task | Processing pdf file for RAG: FAQ.pdf
2025-10-04 11:23:18,436 | ERROR | app.AI.document_store.RAG | Error loading document 'FAQ.pdf': Cannot read an empty file
2025-10-04 11:23:18,438 | ERROR | app.AI.document_store.RAG | Failed to add document 'FAQ.pdf': 500: Failed to load document 'FAQ.pdf': Cannot read an empty file
2025-10-04 11:23:18,467 | ERROR | app.tasks.test_task | Error creating Customer Service Agent: 500: Internal server error, please try again
2025-10-04 11:23:18,535 | INFO | app.utils.event_utils | Published event.agent.failure event for agent 2 for user 1
2025-10-04 11:23:18,577 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 11:23:18,626 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_FAILURE
2025-10-04 11:23:18,577 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.failure.user:1
2025-10-04 11:28:21,885 | INFO | main | Redis event bus stopped
2025-10-04 11:28:59,241 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:28:59,242 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:28:59,243 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:28:59,244 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:29:05,598 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:29:05,599 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:29:05,601 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:29:05,602 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:29:26,185 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:29:26,186 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:29:26,187 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:29:26,189 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:29:39,313 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 11:29:39,315 | INFO | main | Redis event bus started
2025-10-04 11:29:41,425 | INFO | main | Redis event bus stopped
2025-10-04 11:29:51,573 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:29:51,574 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:29:51,574 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:29:51,575 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:30:21,231 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 11:30:21,235 | INFO | main | Redis event bus started
2025-10-04 11:30:21,422 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_vq284
2025-10-04 11:30:21,864 | INFO | app.utils.file_utils | Created database documents/user_1/agent_vq284\products.db from products.csv
2025-10-04 11:30:21,983 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-04 11:30:22,272 | INFO | app.dependencies.redis_storage | Agent vq284 stored in Redis
2025-10-04 11:30:22,288 | ERROR | app.controllers.customer_service_controller | Unexpected error while starting Customer Service Agent creation: name 'task' is not defined
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\customer_service_controller.py", line 152, in create_customer_service_agent
    "task_id": task.id,
               ^^^^
NameError: name 'task' is not defined
2025-10-04 11:30:22,321 | ERROR | app.utils.error_utils | Unexpected error during starting Customer Service Agent creation: name 'task' is not defined
2025-10-04 11:30:57,336 | INFO | main | Redis event bus stopped
2025-10-04 11:31:05,673 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:31:05,674 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:31:05,675 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:31:05,675 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:31:20,689 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 11:31:20,691 | INFO | main | Redis event bus started
2025-10-04 11:31:29,548 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_uc458
2025-10-04 11:31:30,056 | INFO | app.utils.file_utils | Created database documents/user_1/agent_uc458\products.db from products.csv
2025-10-04 11:31:30,273 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-04 11:31:31,115 | INFO | app.dependencies.redis_storage | Agent uc458 stored in Redis
2025-10-04 11:31:31,138 | ERROR | app.controllers.customer_service_controller | Unexpected error while starting Customer Service Agent creation: name 'task' is not defined
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\customer_service_controller.py", line 153, in create_customer_service_agent
    "task_id": task.id,
               ^^^^
NameError: name 'task' is not defined
2025-10-04 11:31:31,217 | ERROR | app.utils.error_utils | Unexpected error during starting Customer Service Agent creation: name 'task' is not defined
2025-10-04 11:32:19,526 | INFO | main | Redis event bus stopped
2025-10-04 11:32:40,187 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:32:40,188 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:32:40,189 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:32:40,190 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:32:49,103 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:32:49,103 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:32:49,104 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:32:49,104 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:33:06,460 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:33:06,462 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:33:06,464 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:33:06,465 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:33:20,384 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 11:33:20,386 | INFO | main | Redis event bus started
2025-10-04 11:33:29,498 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_wd062
2025-10-04 11:33:30,709 | INFO | app.utils.file_utils | Created database documents/user_1/agent_wd062\products.db from products.csv
2025-10-04 11:33:30,798 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-04 11:33:34,122 | INFO | app.dependencies.redis_storage | Agent wd062 stored in Redis
2025-10-04 11:33:34,367 | ERROR | app.controllers.customer_service_controller | Unexpected error while starting Customer Service Agent creation: name 'task' is not defined
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\customer_service_controller.py", line 153, in create_customer_service_agent
    "task_id": task.id,
               ^^^^
NameError: name 'task' is not defined
2025-10-04 11:33:34,418 | ERROR | app.utils.error_utils | Unexpected error during starting Customer Service Agent creation: name 'task' is not defined
2025-10-04 11:34:08,931 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_eE918
2025-10-04 11:34:09,284 | INFO | app.utils.file_utils | Created database documents/user_1/agent_eE918\products.db from products.csv
2025-10-04 11:34:09,332 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-04 11:34:09,517 | INFO | app.dependencies.redis_storage | Agent eE918 stored in Redis
2025-10-04 11:34:11,330 | ERROR | app.controllers.customer_service_controller | Unexpected error while starting Customer Service Agent creation: name 'task' is not defined
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\customer_service_controller.py", line 153, in create_customer_service_agent
    "task_id": task.id,
               ^^^^
NameError: name 'task' is not defined
2025-10-04 11:34:11,392 | ERROR | app.utils.error_utils | Unexpected error during starting Customer Service Agent creation: name 'task' is not defined
2025-10-04 11:35:15,881 | INFO | main | Redis event bus stopped
2025-10-04 11:35:27,756 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:35:27,758 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:35:27,760 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:35:27,761 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:35:44,759 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 11:35:44,761 | INFO | main | Redis event bus started
2025-10-04 11:36:08,745 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Sn621
2025-10-04 11:36:10,453 | INFO | app.utils.file_utils | Created database documents/user_1/agent_Sn621\products.db from products.csv
2025-10-04 11:36:11,076 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-04 11:36:11,593 | INFO | app.dependencies.redis_storage | Agent Sn621 stored in Redis
2025-10-04 11:36:11,667 | ERROR | app.controllers.customer_service_controller | Unexpected error while starting Customer Service Agent creation: name 'task' is not defined
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\customer_service_controller.py", line 153, in create_customer_service_agent
    "task_id": task.id,
               ^^^^
NameError: name 'task' is not defined
2025-10-04 11:36:11,684 | ERROR | app.utils.error_utils | Unexpected error during starting Customer Service Agent creation: name 'task' is not defined
2025-10-04 11:39:03,348 | INFO | main | Redis event bus stopped
2025-10-04 11:39:37,615 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:39:37,616 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:39:37,617 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:39:37,617 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:39:59,760 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:39:59,761 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:39:59,762 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:39:59,762 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:40:18,487 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:40:18,488 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:40:18,489 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:40:18,490 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:40:31,590 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 11:40:31,591 | INFO | main | Redis event bus started
2025-10-04 11:40:39,910 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Ba513
2025-10-04 11:40:42,961 | INFO | app.utils.file_utils | Created database documents/user_1/agent_Ba513\products.db from products.csv
2025-10-04 11:40:43,118 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-04 11:40:44,322 | INFO | app.dependencies.redis_storage | Agent Ba513 stored in Redis
2025-10-04 11:40:44,440 | ERROR | app.controllers.customer_service_controller | Unexpected error while starting Customer Service Agent creation: name 'task' is not defined
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\customer_service_controller.py", line 171, in create_customer_service_agent
    "task_id": task.id,
               ^^^^
NameError: name 'task' is not defined
2025-10-04 11:40:44,509 | ERROR | app.utils.error_utils | Unexpected error during starting Customer Service Agent creation: name 'task' is not defined
2025-10-04 11:41:01,612 | INFO | main | Redis event bus stopped
2025-10-04 11:44:32,139 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:44:32,141 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:44:32,142 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:44:32,142 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:44:51,297 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:44:51,298 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:44:51,298 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:44:51,299 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:45:07,286 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 11:45:07,294 | INFO | main | Redis event bus started
2025-10-04 11:45:21,356 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_v7879
2025-10-04 11:45:22,822 | INFO | app.utils.file_utils | Created database documents/user_1/agent_v7879\products.db from products.csv
2025-10-04 11:45:23,272 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-04 11:45:25,421 | INFO | app.dependencies.redis_storage | Agent v7879 stored in Redis
2025-10-04 11:45:25,534 | ERROR | app.controllers.customer_service_controller | Unexpected error while starting Customer Service Agent creation: name 'task' is not defined
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\customer_service_controller.py", line 175, in create_customer_service_agent
    "task_id": task.id,
               ^^^^
NameError: name 'task' is not defined
2025-10-04 11:45:25,865 | ERROR | app.utils.error_utils | Unexpected error during starting Customer Service Agent creation: name 'task' is not defined
2025-10-04 11:45:54,379 | INFO | main | Redis event bus stopped
2025-10-04 11:46:02,800 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 11:46:02,801 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 11:46:02,802 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 11:46:02,802 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 11:46:18,853 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 11:46:18,856 | INFO | main | Redis event bus started
2025-10-04 11:46:30,295 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Lg980
2025-10-04 11:46:32,053 | INFO | app.utils.file_utils | Created database documents/user_1/agent_Lg980\products.db from products.csv
2025-10-04 11:46:32,298 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-04 11:46:34,004 | INFO | app.dependencies.redis_storage | Agent Lg980 stored in Redis
2025-10-04 11:46:36,946 | ERROR | app.controllers.customer_service_controller | Unexpected error while starting Customer Service Agent creation: name 'task' is not defined
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\customer_service_controller.py", line 175, in create_customer_service_agent
    "task_id": task.id,
               ^^^^
NameError: name 'task' is not defined
2025-10-04 11:46:36,971 | ERROR | app.utils.error_utils | Unexpected error during starting Customer Service Agent creation: name 'task' is not defined
2025-10-04 11:46:40,388 | INFO | main | Redis event bus stopped
2025-10-04 16:52:37,549 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 16:52:37,556 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 16:52:37,557 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 16:52:37,557 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 16:53:10,447 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 16:53:10,452 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 16:53:10,458 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 16:53:10,621 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 16:53:45,233 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 16:53:45,248 | INFO | main | Redis event bus started
2025-10-04 16:55:03,629 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-04 16:55:15,503 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Dt435
2025-10-04 16:55:23,716 | INFO | app.utils.file_utils | Created database documents/user_1/agent_Dt435\products.db from products.csv
2025-10-04 16:55:23,907 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-04 16:55:24,410 | INFO | app.dependencies.redis_storage | Agent Dt435 stored in Redis
2025-10-04 16:55:31,434 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-04 16:55:31,449 | INFO | app.tasks.test_task | Creating Customer Service Agent for user 1
2025-10-04 16:55:31,500 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 16:55:31,567 | INFO | app.tasks.test_task | Agent data: id='Dt435' name='Customer Support Bot' avatar=None model='gpt-4o' description=None base_prompt='You are a helpful customer service agent' tone='friendly' short_term_memory=False long_term_memory=False status='active' company_name='PT. lord suroso' industry='Teknologi AI' company_description='tidak ada' address='jln.kwitang no 4, Jakarta Pusat' email='suroso@gmail.com' website=None fallback_email='siti@gmail.com'
2025-10-04 16:55:32,528 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 16:55:32,439 | INFO | app.tasks.test_task | New agent: <Agent name=Customer Support Bot user_id=1>
2025-10-04 16:55:32,446 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 16:55:32,576 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 16:55:32,866 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 16:55:32,965 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 16:55:32,987 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 16:55:33,013 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 16:55:33,205 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 16:55:33,210 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Dt435
2025-10-04 16:55:33,212 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 16:55:33,224 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 16:55:33,243 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 16:55:33,383 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 16:55:33,527 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 16:55:33,548 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 16:55:33,883 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 16:55:33,903 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_Dt435\Kerangka Makalah.pdf (type: pdf)
2025-10-04 16:55:33,886 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 16:55:33,912 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 16:55:33,975 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 16:55:33,978 | INFO | app.tasks.test_task | Processing pdf file for RAG: Kerangka Makalah.pdf
2025-10-04 16:55:33,912 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 16:55:50,067 | INFO | app.AI.document_store.RAG | Successfully loaded document: Kerangka Makalah.pdf
2025-10-04 16:55:53,808 | INFO | app.AI.document_store.RAG | Successfully added document 'Kerangka Makalah.pdf' with ID '14'
2025-10-04 16:55:53,827 | INFO | app.utils.agent_utils | Added document Kerangka Makalah.pdf to agent Dt435
2025-10-04 16:55:53,852 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 16:55:54,106 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 16:55:54,125 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 16:55:54,131 | INFO | app.utils.event_utils | Published event.agent.success event for agent 2 for user 1
2025-10-04 16:55:54,138 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 16:55:54,166 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 16:55:54,192 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-04 16:55:54,157 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-04 16:56:25,888 | INFO | main | Redis event bus stopped
2025-10-04 16:56:55,387 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 16:56:55,388 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 16:56:55,389 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 16:56:55,390 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 16:57:40,576 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 16:57:40,579 | INFO | main | Redis event bus started
2025-10-04 16:58:21,419 | INFO | main | Redis event bus stopped
2025-10-04 16:58:35,825 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 16:58:35,826 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 16:58:35,826 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 16:58:35,827 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 16:59:07,878 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 16:59:07,879 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 16:59:07,879 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 16:59:07,880 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 16:59:39,768 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 16:59:39,771 | INFO | main | Redis event bus started
2025-10-04 16:59:59,615 | INFO | main | Redis event bus stopped
2025-10-04 17:00:16,786 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 17:00:16,787 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 17:00:16,788 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 17:00:16,789 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 17:00:35,088 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 17:00:35,091 | INFO | main | Redis event bus started
2025-10-04 17:00:56,808 | INFO | main | Redis event bus stopped
2025-10-04 17:01:06,483 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 17:01:06,484 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 17:01:06,484 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 17:01:06,485 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 17:01:29,541 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 17:01:29,543 | INFO | main | Redis event bus started
2025-10-04 17:01:43,813 | INFO | main | Redis event bus stopped
2025-10-04 17:02:19,507 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 17:02:19,514 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 17:02:19,524 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 17:02:19,525 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 17:02:38,000 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 17:02:38,002 | INFO | main | Redis event bus started
2025-10-04 17:02:56,787 | INFO | main | Redis event bus stopped
2025-10-04 17:03:42,352 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 17:03:42,355 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 17:03:42,356 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 17:03:42,356 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 17:03:44,071 | INFO | app.dependencies.redis_storage | Agent Dt435 retrieved from Redis
2025-10-04 17:03:56,707 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 17:03:56,709 | INFO | main | Redis event bus started
2025-10-04 17:04:27,678 | INFO | main | Redis event bus stopped
2025-10-04 17:04:40,660 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 17:04:40,661 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 17:04:40,662 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 17:04:40,662 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 17:04:55,543 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 17:04:55,570 | INFO | main | Redis event bus started
2025-10-04 17:05:10,126 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_f1027
2025-10-04 17:05:10,837 | INFO | app.utils.file_utils | Created database documents/user_1/agent_f1027\products.db from products.csv
2025-10-04 17:05:10,901 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-04 17:05:11,124 | INFO | app.dependencies.redis_storage | Agent f1027 stored in Redis
2025-10-04 17:05:14,907 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-04 17:05:14,928 | INFO | app.tasks.test_task | Creating Customer Service Agent for user 1
2025-10-04 17:05:14,960 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 17:05:15,084 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 17:05:15,012 | INFO | app.tasks.test_task | Agent data: id='f1027' name='Customer Support Bot' avatar=None model='gpt-4o' description=None base_prompt='You are a helpful customer service agent' tone='friendly' short_term_memory=False long_term_memory=False status='active' company_name='PT. lord suroso' industry='Teknologi AI' company_description='tidak ada' address='jln.kwitang no 4, Jakarta Pusat' email='suroso@gmail.com' website=None fallback_email='siti@gmail.com'
2025-10-04 17:05:15,089 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 17:05:15,093 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 17:05:15,135 | INFO | app.tasks.test_task | New agent: <Agent name=Customer Support Bot user_id=1>
2025-10-04 17:05:15,217 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 17:05:15,240 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 17:05:15,247 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 17:05:15,259 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 17:05:15,511 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 17:05:15,577 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_f1027
2025-10-04 17:05:15,581 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 17:05:15,599 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 17:05:15,591 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 17:05:15,611 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 17:05:15,623 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 17:05:15,674 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 17:05:15,609 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 17:05:15,631 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 17:05:15,778 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 17:05:15,779 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 17:05:15,795 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 17:05:15,784 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_f1027\Kerangka Makalah.pdf (type: pdf)
2025-10-04 17:05:16,088 | INFO | app.tasks.test_task | Processing pdf file for RAG: Kerangka Makalah.pdf
2025-10-04 17:05:22,870 | INFO | app.AI.document_store.RAG | Successfully loaded document: Kerangka Makalah.pdf
2025-10-04 17:05:26,437 | INFO | app.AI.document_store.RAG | Successfully added document 'Kerangka Makalah.pdf' with ID '15'
2025-10-04 17:05:26,456 | INFO | app.utils.agent_utils | Added document Kerangka Makalah.pdf to agent f1027
2025-10-04 17:05:26,530 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 17:05:26,631 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 17:05:26,657 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 17:05:26,643 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 17:05:26,648 | INFO | app.utils.event_utils | Published event.agent.success event for agent 2 for user 1
2025-10-04 17:05:26,680 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 17:05:26,707 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-04 17:05:26,678 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-04 17:08:15,144 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-04 17:08:15,286 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-04 17:08:17,880 | INFO | app.dependencies.redis_storage | Agent f1027 retrieved from Redis
2025-10-04 17:08:43,494 | INFO | app.AI.customer_service.workflow | Main agent processing user message: hai...
2025-10-04 17:08:43,494 | INFO | app.AI.customer_service.workflow | Main agent processing user message: hai...
2025-10-04 17:08:43,878 | WARNING | app.AI.customer_service.workflow | Attempt 1 failed: 'dict' object has no attribute 'name'. Retrying in 1.0s...
2025-10-04 17:08:43,878 | WARNING | app.AI.customer_service.workflow | Attempt 1 failed: 'dict' object has no attribute 'name'. Retrying in 1.0s...
2025-10-04 17:08:44,899 | WARNING | app.AI.customer_service.workflow | Attempt 2 failed: 'dict' object has no attribute 'name'. Retrying in 2.0s...
2025-10-04 17:08:44,899 | WARNING | app.AI.customer_service.workflow | Attempt 2 failed: 'dict' object has no attribute 'name'. Retrying in 2.0s...
2025-10-04 17:08:46,902 | ERROR | app.AI.customer_service.workflow | Max retries (3) exceeded. Last error: 'dict' object has no attribute 'name'
2025-10-04 17:08:46,902 | ERROR | app.AI.customer_service.workflow | Max retries (3) exceeded. Last error: 'dict' object has no attribute 'name'
2025-10-04 17:08:46,927 | ERROR | app.AI.customer_service.workflow | ai_service_error: 'dict' object has no attribute 'name'
2025-10-04 17:08:46,927 | ERROR | app.AI.customer_service.workflow | ai_service_error: 'dict' object has no attribute 'name'
2025-10-04 17:08:47,003 | ERROR | app.AI.customer_service.workflow | Error in main agent: 'dict' object has no attribute 'name'
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\AI\customer_service\workflow.py", line 319, in _main_agent
    response = self._retry_with_backoff(invoke_llm, max_retries=3)
  File "D:\Saas_Project\Backend\app\AI\customer_service\workflow.py", line 124, in _retry_with_backoff
    raise e
  File "D:\Saas_Project\Backend\app\AI\customer_service\workflow.py", line 118, in _retry_with_backoff
    return func()
  File "D:\Saas_Project\Backend\app\AI\customer_service\workflow.py", line 313, in invoke_llm
    prompt = self.prompts.main_agent(state.user_message, self.base_prompt, self.tone, self.company_information)
  File "D:\Saas_Project\Backend\app\AI\customer_service\prompts.py", line 92, in main_agent
    - Nama: {company_information.name}
             ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'name'
2025-10-04 17:08:47,003 | ERROR | app.AI.customer_service.workflow | Error in main agent: 'dict' object has no attribute 'name'
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\AI\customer_service\workflow.py", line 319, in _main_agent
    response = self._retry_with_backoff(invoke_llm, max_retries=3)
  File "D:\Saas_Project\Backend\app\AI\customer_service\workflow.py", line 124, in _retry_with_backoff
    raise e
  File "D:\Saas_Project\Backend\app\AI\customer_service\workflow.py", line 118, in _retry_with_backoff
    return func()
  File "D:\Saas_Project\Backend\app\AI\customer_service\workflow.py", line 313, in invoke_llm
    prompt = self.prompts.main_agent(state.user_message, self.base_prompt, self.tone, self.company_information)
  File "D:\Saas_Project\Backend\app\AI\customer_service\prompts.py", line 92, in main_agent
    - Nama: {company_information.name}
             ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'name'
2025-10-04 17:12:06,422 | ERROR | app.websocket.ws_route | Error in agent invoke: (1012, None)
2025-10-04 17:12:06,538 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-04 17:12:06,708 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-04 17:12:07,003 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-04 17:12:07,983 | INFO | main | Redis event bus stopped
2025-10-04 17:12:37,667 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 17:12:37,678 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 17:12:37,691 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 17:12:37,740 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 17:13:00,853 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 17:13:00,856 | INFO | main | Redis event bus started
2025-10-04 17:13:40,830 | INFO | main | Redis event bus stopped
2025-10-04 17:13:50,198 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 17:13:50,199 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 17:13:50,200 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 17:13:50,200 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 17:14:30,908 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 17:14:30,973 | INFO | main | Redis event bus started
2025-10-04 17:14:47,965 | INFO | main | Redis event bus stopped
2025-10-04 17:15:07,503 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 17:15:07,596 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 17:15:07,738 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 17:15:07,886 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 17:15:29,557 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 17:15:29,560 | INFO | main | Redis event bus started
2025-10-04 17:15:50,858 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_lg745
2025-10-04 17:15:51,504 | INFO | app.utils.file_utils | Created database documents/user_1/agent_lg745\products.db from products.csv
2025-10-04 17:15:51,894 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-04 17:15:52,690 | INFO | app.dependencies.redis_storage | Agent lg745 stored in Redis
2025-10-04 17:15:58,429 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-04 17:15:58,550 | INFO | app.tasks.test_task | Creating Customer Service Agent for user 1
2025-10-04 17:15:58,668 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 17:15:58,708 | INFO | app.tasks.test_task | Agent data: id='lg745' name='Customer Support Bot' avatar=None model='gpt-4o' description=None base_prompt='You are a helpful customer service agent' tone='friendly' short_term_memory=False long_term_memory=False status='active' company_name='PT. lord suroso' industry='Teknologi AI' company_description='tidak ada' address='jln.kwitang no 4, Jakarta Pusat' email='suroso@gmail.com' website=None fallback_email='siti@gmail.com'
2025-10-04 17:15:58,773 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 17:15:58,784 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 17:15:58,810 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 17:15:58,812 | INFO | app.tasks.test_task | New agent: <Agent name=Customer Support Bot user_id=1>
2025-10-04 17:15:59,358 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 17:15:59,411 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 17:15:59,413 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 17:15:59,412 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 17:15:59,602 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 17:15:59,671 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 17:15:59,662 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_lg745
2025-10-04 17:15:59,689 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 17:15:59,691 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 17:15:59,696 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 17:15:59,729 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 17:15:59,730 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 17:15:59,746 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
r:1
2025-10-04 17:15:59,801 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 17:15:59,803 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 17:15:59,802 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 17:15:59,794 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_lg745\Kerangka Makalah.pdf (type: pdf)
2025-10-04 17:15:59,870 | INFO | app.tasks.test_task | Processing pdf file for RAG: Kerangka Makalah.pdf
2025-10-04 17:16:00,500 | INFO | main | Redis event bus stopped
2025-10-04 17:16:08,122 | INFO | app.AI.document_store.RAG | Successfully loaded document: Kerangka Makalah.pdf
2025-10-04 17:16:11,237 | INFO | app.AI.document_store.RAG | Successfully added document 'Kerangka Makalah.pdf' with ID '16'
2025-10-04 17:16:11,252 | INFO | app.utils.agent_utils | Added document Kerangka Makalah.pdf to agent lg745
2025-10-04 17:16:11,385 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2 for user 1
2025-10-04 17:16:11,423 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 17:16:11,502 | INFO | app.utils.event_utils | Published event.agent.success event for agent 2 for user 1
2025-10-04 17:16:11,535 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-04 17:16:35,829 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 17:16:35,831 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 17:16:35,848 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 17:16:35,852 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 17:17:05,101 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 17:17:05,103 | INFO | main | Redis event bus started
2025-10-04 17:17:05,121 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-04 17:17:05,128 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-04 17:17:24,509 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-04 17:17:24,532 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-04 17:17:24,597 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-04 17:17:24,625 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-04 17:17:28,141 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-04 17:17:28,141 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-04 17:17:31,377 | INFO | app.dependencies.redis_storage | Agent lg745 retrieved from Redis
2025-10-04 17:17:44,828 | INFO | app.AI.customer_service.workflow | Main agent processing user message: hai...
2025-10-04 17:17:44,828 | INFO | app.AI.customer_service.workflow | Main agent processing user message: hai...
2025-10-04 17:17:46,649 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-04 17:17:46,649 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-04 17:17:53,635 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-04 17:17:53,669 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-04 17:17:53,671 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-04 17:17:53,672 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-04 17:18:11,559 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-04 17:18:11,560 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-04 17:18:16,419 | INFO | app.AI.customer_service.workflow | Main agent processing user message: Ini nama perusahaanya apa ya?...
2025-10-04 17:18:16,419 | INFO | app.AI.customer_service.workflow | Main agent processing user message: Ini nama perusahaanya apa ya?...
2025-10-04 17:18:18,426 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-04 17:18:18,426 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-04 17:18:25,778 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-04 17:18:25,800 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-04 17:18:25,805 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-04 17:18:25,807 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-04 17:19:06,886 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-04 17:19:07,184 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-04 17:19:10,883 | INFO | app.AI.customer_service.workflow | Main agent processing user message: Saya mau menanyakan tentang dokument, kira kira do...
2025-10-04 17:19:10,883 | INFO | app.AI.customer_service.workflow | Main agent processing user message: Saya mau menanyakan tentang dokument, kira kira do...
2025-10-04 17:19:12,095 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-04 17:19:12,095 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-04 17:19:18,193 | INFO | app.AI.customer_service.workflow | Validation agent processing tool message
2025-10-04 17:19:18,193 | INFO | app.AI.customer_service.workflow | Validation agent processing tool message
2025-10-04 17:19:18,199 | INFO | app.AI.customer_service.workflow | Tool message:  I'm sorry, I don't know the answer to this question as it is not included in the given context. The...
2025-10-04 17:19:18,199 | INFO | app.AI.customer_service.workflow | Tool message:  I'm sorry, I don't know the answer to this question as it is not included in the given context. The...
2025-10-04 17:19:20,669 | INFO | app.AI.customer_service.workflow | Validation result: can_answer=False, next_step=end, tokens=881
2025-10-04 17:19:20,669 | INFO | app.AI.customer_service.workflow | Validation result: can_answer=False, next_step=end, tokens=881
2025-10-04 17:20:32,528 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-04 17:20:32,537 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-04 17:20:32,537 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-04 17:20:32,539 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-04 17:20:34,863 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-04 17:20:34,864 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-04 17:20:39,094 | INFO | app.AI.customer_service.workflow | Main agent processing user message: Apa product dengan stok paling banyak...
2025-10-04 17:20:39,094 | INFO | app.AI.customer_service.workflow | Main agent processing user message: Apa product dengan stok paling banyak...
2025-10-04 17:20:39,944 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-04 17:20:39,944 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-04 17:20:43,044 | INFO | app.AI.customer_service.workflow | Validation agent processing tool message
2025-10-04 17:20:43,044 | INFO | app.AI.customer_service.workflow | Validation agent processing tool message
2025-10-04 17:20:43,112 | INFO | app.AI.customer_service.workflow | Tool message:  Saya tidak tahu, karena tidak ada informasi yang menyebutkan tentang stok yang dimiliki oleh PT Dia...
2025-10-04 17:20:43,112 | INFO | app.AI.customer_service.workflow | Tool message:  Saya tidak tahu, karena tidak ada informasi yang menyebutkan tentang stok yang dimiliki oleh PT Dia...
2025-10-04 17:20:45,511 | INFO | app.AI.customer_service.workflow | Validation result: can_answer=False, next_step=check_products_database, tokens=835
2025-10-04 17:20:45,511 | INFO | app.AI.customer_service.workflow | Validation result: can_answer=False, next_step=check_products_database, tokens=835
2025-10-04 17:20:47,827 | INFO | app.AI.customer_service.workflow | Generating query for problem: Menemukan produk yang memiliki stok paling banyak ...
2025-10-04 17:20:47,827 | INFO | app.AI.customer_service.workflow | Generating query for problem: Menemukan produk yang memiliki stok paling banyak ...
2025-10-04 17:20:49,509 | INFO | app.AI.customer_service.workflow | Generated query: SELECT product_name, stock FROM products ORDER BY stock DESC LIMIT 1;...
2025-10-04 17:20:49,509 | INFO | app.AI.customer_service.workflow | Generated query: SELECT product_name, stock FROM products ORDER BY stock DESC LIMIT 1;...
2025-10-04 17:20:49,512 | INFO | app.AI.customer_service.workflow | Target database: products
2025-10-04 17:20:49,512 | INFO | app.AI.customer_service.workflow | Target database: products
2025-10-04 17:20:49,520 | INFO | app.AI.customer_service.workflow | Estimated tokens: 743
2025-10-04 17:20:49,520 | INFO | app.AI.customer_service.workflow | Estimated tokens: 743
2025-10-04 17:20:50,062 | INFO | app.AI.customer_service.workflow | Query executed successfully, returned 1 rows
2025-10-04 17:20:50,062 | INFO | app.AI.customer_service.workflow | Query executed successfully, returned 1 rows
2025-10-04 17:20:50,073 | INFO | app.AI.customer_service.workflow | Generating final answer for user
2025-10-04 17:20:50,073 | INFO | app.AI.customer_service.workflow | Generating final answer for user
2025-10-04 17:20:53,874 | INFO | app.AI.customer_service.workflow | Final answer generated successfully
2025-10-04 17:20:53,874 | INFO | app.AI.customer_service.workflow | Final answer generated successfully
2025-10-04 17:21:23,610 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-04 17:21:23,681 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-04 17:21:23,682 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-04 17:21:23,682 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-04 17:21:28,613 | INFO | main | Redis event bus stopped
2025-10-04 18:59:40,131 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 18:59:40,174 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 18:59:40,179 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 18:59:40,179 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:00:13,906 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 19:00:13,910 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 19:00:13,911 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 19:00:13,913 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:00:32,471 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 19:00:32,524 | INFO | main | Redis event bus started
2025-10-04 19:01:34,292 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-04 19:01:42,863 | INFO | app.controllers.user_controller | khaerul@gmail.com Get user profile is successfully
2025-10-04 19:01:54,338 | INFO | app.controllers.agent_controller | Successfully retrieved agents for user khaerul@gmail.com
2025-10-04 19:04:51,906 | WARNING | main | Validation error: [{'type': 'int_parsing', 'loc': ('path', 'agent_id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': 'wuAbI'}]
2025-10-04 19:05:49,096 | INFO | main | Redis event bus stopped
2025-10-04 19:07:48,224 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 19:07:48,323 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 19:07:48,323 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 19:07:48,324 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:08:29,870 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 19:08:29,882 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 19:08:29,912 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 19:08:29,913 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:09:17,041 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 19:09:17,043 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 19:09:17,044 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 19:09:17,045 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:09:45,398 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 19:09:45,405 | INFO | main | Redis event bus started
2025-10-04 19:10:22,962 | INFO | app.controllers.customer_service_controller | Customer Service Agent 'Customer Support Bot' (ID: lg745) with company information retrieved successfully by user khaerul@gmail.com
2025-10-04 19:10:57,055 | INFO | app.controllers.company_information_controller | Successfully retrieved 3 company information records for user khaerul@gmail.com
2025-10-04 19:12:22,557 | WARNING | app.utils.error_utils | Agent not found: agent_id 2 for user khaerul@gmail.com
2025-10-04 19:13:04,155 | INFO | main | Redis event bus stopped
2025-10-04 19:13:39,120 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 19:13:39,154 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 19:13:39,183 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 19:13:39,225 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:14:32,588 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 19:14:32,862 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 19:14:32,934 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 19:14:32,980 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:14:57,672 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 19:14:57,675 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 19:14:57,677 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 19:14:57,683 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:15:24,020 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 19:15:24,060 | INFO | main | Redis event bus started
2025-10-04 19:15:35,899 | INFO | app.controllers.document_controller | Retrieved 1 documents for agent 'Customer Support Bot' (ID: lg745) by user khaerul@gmail.com
2025-10-04 19:16:58,393 | INFO | main | Redis event bus stopped
2025-10-04 19:18:08,512 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 19:18:08,618 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 19:18:08,619 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 19:18:08,620 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:18:37,431 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 19:18:37,437 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 19:18:37,475 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 19:18:37,493 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:19:07,553 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 19:19:07,567 | INFO | main | Redis event bus started
2025-10-04 19:19:19,126 | INFO | app.controllers.integration_controller | Successfully fetched all integrations: Agent ID lg745 and user khaerul@gmail.com
2025-10-04 19:19:50,164 | INFO | app.controllers.agent_controller | [UserAgents] Fetched 13 user agents for user_id=1
2025-10-04 19:21:52,051 | WARNING | main | Validation error: [{'type': 'int_parsing', 'loc': ('path', 'user_agent_id'), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': 'Ckup7'}]
2025-10-04 19:22:51,263 | INFO | main | Redis event bus stopped
2025-10-04 19:24:04,188 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 19:24:04,253 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 19:24:04,278 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 19:24:04,280 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:24:37,007 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 19:24:37,009 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 19:24:37,022 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 19:24:37,033 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:25:02,318 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 19:25:02,319 | INFO | main | Redis event bus started
2025-10-04 19:25:40,667 | INFO | app.controllers.dashboard_controller | Dashboard overview generated for user khaerul@gmail.com
2025-10-04 19:27:49,474 | INFO | main | Redis event bus stopped
2025-10-04 19:41:31,491 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 19:41:31,503 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 19:41:31,505 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 19:41:31,641 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:42:15,923 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 19:42:15,937 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 19:42:15,949 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 19:42:15,952 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:42:34,188 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 19:42:34,192 | INFO | main | Redis event bus started
2025-10-04 19:42:52,035 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-04 19:42:52,072 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-04 19:47:14,075 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-04 19:47:14,274 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-04 19:47:14,592 | INFO | main | Redis event bus stopped
2025-10-04 19:48:36,684 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 19:48:36,748 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 19:48:36,766 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 19:48:36,806 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:49:07,167 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 19:49:07,196 | INFO | main | Redis event bus started
2025-10-04 19:54:03,859 | INFO | main | Redis event bus stopped
2025-10-04 19:54:22,323 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 19:54:22,330 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 19:54:22,347 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 19:54:22,351 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:58:04,302 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 19:58:04,304 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 19:58:04,305 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 19:58:04,305 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:59:00,346 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 19:59:00,349 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 19:59:00,466 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 19:59:00,623 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:59:23,406 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 19:59:23,414 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 19:59:23,416 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 19:59:23,417 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 19:59:59,834 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 19:59:59,836 | INFO | main | Redis event bus started
2025-10-04 20:01:33,534 | INFO | main | Redis event bus stopped
2025-10-04 20:02:12,669 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:02:12,702 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:02:12,754 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:02:12,812 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:02:50,739 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:02:50,775 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:02:51,242 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:02:51,243 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:03:19,631 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 20:03:19,669 | INFO | main | Redis event bus started
2025-10-04 20:03:35,626 | INFO | main | Redis event bus stopped
2025-10-04 20:07:38,101 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:07:38,184 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:07:38,254 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:07:38,345 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:08:31,802 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:08:31,857 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:08:31,903 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:08:31,946 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:09:02,190 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:09:02,194 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:09:02,219 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:09:02,229 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:09:45,773 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 20:09:45,796 | INFO | main | Redis event bus started
2025-10-04 20:12:37,366 | INFO | main | Redis event bus stopped
2025-10-04 20:13:18,992 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:13:19,003 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:13:19,023 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:13:19,149 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:14:01,777 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 20:14:01,778 | INFO | main | Redis event bus started
2025-10-04 20:15:16,351 | INFO | main | Redis event bus stopped
2025-10-04 20:15:31,333 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:15:31,334 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:15:31,335 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:15:31,336 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:16:00,149 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 20:16:00,190 | INFO | main | Redis event bus started
2025-10-04 20:17:49,755 | INFO | main | Redis event bus stopped
2025-10-04 20:18:07,510 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:18:07,511 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:18:07,512 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:18:07,512 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:19:04,871 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:19:04,930 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:19:04,941 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:19:04,947 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:19:56,715 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 20:19:56,724 | INFO | main | Redis event bus started
2025-10-04 20:20:20,268 | INFO | main | Redis event bus stopped
2025-10-04 20:20:45,999 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:20:46,002 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:20:46,002 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:20:46,003 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:21:50,362 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:21:50,363 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:21:50,386 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:21:50,442 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:22:31,843 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 20:22:31,845 | INFO | main | Redis event bus started
2025-10-04 20:24:10,341 | INFO | main | Redis event bus stopped
2025-10-04 20:24:40,581 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:24:40,583 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:24:40,635 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:24:40,684 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:25:19,359 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:25:19,364 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:25:19,368 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:25:19,374 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:25:48,577 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:25:48,585 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:25:48,643 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:25:48,686 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:26:10,698 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 20:26:10,854 | INFO | main | Redis event bus started
2025-10-04 20:26:20,641 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-04 20:26:20,642 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-04 20:28:39,436 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-04 20:29:35,849 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Ze747
2025-10-04 20:29:42,333 | INFO | app.dependencies.redis_storage | Agent Ze747 stored in Redis
2025-10-04 20:29:43,969 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-04 20:29:44,006 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: Ze747
2025-10-04 20:29:44,027 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Ze747 for user 1
2025-10-04 20:29:44,086 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='Ze747'
2025-10-04 20:29:44,843 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-04 20:29:44,874 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 20:29:44,964 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 20:29:44,861 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 20:29:45,010 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.progress', 'user_id': 1, 'agent_id': 'Ze747', 'payload': {'current': 20, 'total': 100, 'status': 'Initialize agent'}, 'timestamp': '2025-10-04T13:29:44.197956'}
2025-10-04 20:29:44,970 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Ze747 for user 1
2025-10-04 20:29:45,073 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Ze747
2025-10-04 20:29:45,085 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 20:29:45,084 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 20:29:45,106 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 20:29:45,099 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Ze747 for user 1
2025-10-04 20:29:45,166 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.progress', 'user_id': 1, 'agent_id': 'Ze747', 'payload': {'current': 40, 'total': 100, 'status': 'Initializing Simple RAG Agent'}, 'timestamp': '2025-10-04T13:29:45.074033'}
2025-10-04 20:29:46,393 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 20:29:46,346 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 20:29:46,704 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 20:29:46,398 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_Ze747\FAQ.pdf (type: pdf)
2025-10-04 20:29:46,765 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.progress', 'user_id': 1, 'agent_id': 'Ze747', 'payload': {'current': 60, 'total': 100, 'status': 'Adding Document to Simple RAG Agent'}, 'timestamp': '2025-10-04T13:29:46.046996'}
2025-10-04 20:30:00,422 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-04 20:30:04,945 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '17'
2025-10-04 20:30:05,056 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent Ze747
2025-10-04 20:30:05,258 | INFO | app.utils.event_utils | Published event.agent.success event for agent Ze747 for user 1
2025-10-04 20:30:05,323 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 20:30:05,323 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-04 20:30:05,356 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-04 20:30:05,369 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'event_type': 'event.agent.success', 'user_id': 1, 'agent_id': 'Ze747', 'payload': {'current': 100, 'total': 100, 'status': 'Agent creation is completed'}, 'timestamp': '2025-10-04T13:30:05.318977'}
2025-10-04 20:30:23,124 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-04 20:30:23,124 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-04 20:37:47,356 | INFO | main | Redis event bus stopped
2025-10-04 20:38:01,060 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:38:01,061 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:38:01,062 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:38:01,063 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:38:24,990 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 20:38:25,032 | INFO | main | Redis event bus started
2025-10-04 20:38:27,984 | INFO | main | Redis event bus stopped
2025-10-04 20:38:38,298 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:38:38,299 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:38:38,304 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:38:38,308 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:39:24,651 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:39:24,655 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:39:24,656 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:39:24,662 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:39:42,040 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:39:42,060 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:39:42,061 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:39:42,062 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:40:02,265 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 20:40:02,302 | INFO | main | Redis event bus started
2025-10-04 20:40:59,923 | INFO | main | Redis event bus stopped
2025-10-04 20:41:12,547 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:41:12,556 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:41:12,567 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:41:12,569 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:41:40,497 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:41:40,502 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:41:40,509 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:41:40,514 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:42:17,014 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 20:42:17,018 | INFO | main | Redis event bus started
2025-10-04 20:43:05,845 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-04 20:43:05,849 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-04 20:43:19,638 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_BA490
2025-10-04 20:43:23,910 | INFO | app.dependencies.redis_storage | Agent BA490 stored in Redis
2025-10-04 20:43:25,534 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-04 20:43:25,692 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: BA490
2025-10-04 20:43:25,725 | INFO | app.utils.event_utils | Published event.agent.progress event for agent BA490 for user 1
2025-10-04 20:43:25,776 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='BA490'
2025-10-04 20:43:25,824 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 20:43:25,830 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 20:43:25,831 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 20:43:25,854 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 20, 'total': 100, 'status': 'Initialize agent'}
2025-10-04 20:43:25,847 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-04 20:43:26,424 | INFO | app.utils.event_utils | Published event.agent.progress event for agent BA490 for user 1
2025-10-04 20:43:26,594 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 20:43:26,605 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 20:43:26,614 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 40, 'total': 100, 'status': 'Initializing Simple RAG Agent'}
2025-10-04 20:43:26,591 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 20:43:26,651 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_BA490
2025-10-04 20:43:26,823 | INFO | app.utils.event_utils | Published event.agent.progress event for agent BA490 for user 1
2025-10-04 20:43:26,831 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 20:43:26,836 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_BA490\FAQ.pdf (type: pdf)
2025-10-04 20:43:26,843 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 20:43:26,844 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 20:43:26,845 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 60, 'total': 100, 'status': 'Adding Document to Simple RAG Agent'}
2025-10-04 20:43:33,293 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-04 20:43:36,368 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '18'
2025-10-04 20:43:36,384 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent BA490
2025-10-04 20:43:36,488 | INFO | app.utils.event_utils | Published event.agent.success event for agent BA490 for user 1
2025-10-04 20:43:36,525 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 20:43:36,508 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-04 20:43:36,575 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-04 20:43:36,583 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 100, 'total': 100, 'status': 'Agent creation is completed'}
2025-10-04 20:44:48,231 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-04 20:44:48,366 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-04 20:44:49,474 | INFO | main | Redis event bus stopped
2025-10-04 20:45:34,518 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:45:34,565 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:45:34,691 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:45:34,700 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:46:23,270 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 20:46:23,282 | INFO | main | Redis event bus started
2025-10-04 20:47:02,085 | INFO | main | Redis event bus stopped
2025-10-04 20:47:45,119 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-04 20:47:45,128 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-04 20:47:45,129 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-04 20:47:45,204 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-04 20:48:12,658 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-04 20:48:12,661 | INFO | main | Redis event bus started
2025-10-04 20:48:24,677 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-04 20:48:24,806 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-04 20:49:52,730 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_5l384
2025-10-04 20:50:00,935 | INFO | app.dependencies.redis_storage | Agent 5l384 stored in Redis
2025-10-04 20:50:02,678 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-04 20:50:02,871 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: 5l384
2025-10-04 20:50:03,064 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 5l384 for user 1
2025-10-04 20:50:03,211 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='5l384'
2025-10-04 20:50:03,656 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-04 20:50:03,689 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 5l384 for user 1
2025-10-04 20:50:03,691 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_5l384
2025-10-04 20:50:03,742 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 5l384 for user 1
2025-10-04 20:50:03,777 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_5l384\FAQ.pdf (type: pdf)
2025-10-04 20:50:03,873 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 20:50:04,057 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 20:50:04,092 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 20:50:04,117 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 20, 'total': 100, 'status': 'Initialize agent'}
2025-10-04 20:50:04,309 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-04 20:50:04,316 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 20:50:04,545 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-04 20:50:04,761 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 60, 'total': 100, 'status': 'Adding Document to Simple RAG Agent'}
2025-10-04 20:50:04,972 | ERROR | app.events.event_handler | Error while send agent progress: 
2025-10-04 20:50:05,510 | ERROR | app.events.redis_event | Error while handler the message: 
2025-10-04 20:50:05,628 | ERROR | app.events.redis_event | Error while running the listening loop: 
2025-10-04 20:50:04,731 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 20:50:06,788 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-04 20:50:06,793 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-04 20:50:25,682 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-04 20:50:34,353 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '19'
2025-10-04 20:50:34,497 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent 5l384
2025-10-04 20:50:34,833 | INFO | app.utils.event_utils | Published event.agent.success event for agent 5l384 for user 1
2025-10-04 20:50:35,211 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-04 20:51:05,786 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-04 20:51:05,805 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-04 20:51:19,492 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Dg362
2025-10-04 20:51:21,713 | INFO | app.dependencies.redis_storage | Agent Dg362 stored in Redis
2025-10-04 20:51:24,304 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-04 20:51:24,325 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: Dg362
2025-10-04 20:51:24,354 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Dg362 for user 1
2025-10-04 20:51:24,388 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='Dg362'
2025-10-04 20:51:24,389 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 20:51:24,414 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-04 20:51:24,449 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Dg362 for user 1
2025-10-04 20:51:24,452 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Dg362
2025-10-04 20:51:24,498 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 20:51:24,517 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Dg362 for user 1
2025-10-04 20:51:24,528 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-04 20:51:24,537 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_Dg362\FAQ.pdf (type: pdf)
2025-10-04 20:51:36,620 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-04 20:51:40,639 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '20'
2025-10-04 20:51:40,708 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent Dg362
2025-10-04 20:51:40,861 | INFO | app.utils.event_utils | Published event.agent.success event for agent Dg362 for user 1
2025-10-04 20:51:41,394 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-04 20:52:23,990 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-04 20:52:24,373 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-04 20:52:24,845 | INFO | main | Redis event bus stopped
2025-10-05 08:14:54,989 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-05 08:14:54,992 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-05 08:14:54,993 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-05 08:14:54,993 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-05 08:15:39,508 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-05 08:15:39,765 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-05 08:15:40,102 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-05 08:15:40,150 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-05 08:16:08,370 | ERROR | main | Error starting Redis event bus: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-10-05 08:16:13,594 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-05 08:16:13,595 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-05 08:24:08,378 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-05 08:24:08,823 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-05 08:24:28,707 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-05 08:24:28,711 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-05 08:24:28,714 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-05 08:24:28,822 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-05 08:25:13,872 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-05 08:25:13,881 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-05 08:25:14,065 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-05 08:25:14,213 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-05 08:25:37,141 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-05 08:25:37,154 | INFO | main | Redis event bus started
2025-10-05 08:25:39,492 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-05 08:25:39,572 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-05 08:26:47,431 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-05 08:26:58,986 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_0g906
2025-10-05 08:27:15,803 | INFO | app.dependencies.redis_storage | Agent 0g906 stored in Redis
2025-10-05 08:27:17,748 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-05 08:27:17,771 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: 0g906
2025-10-05 08:27:17,797 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 0g906 for user 1
2025-10-05 08:27:17,941 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='0g906'
2025-10-05 08:27:18,476 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 08:27:18,539 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:27:18,547 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 08:27:18,554 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 20, 'total': 100, 'status': 'Initialize agent'}
2025-10-05 08:27:18,655 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-05 08:27:18,704 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 0g906 for user 1
2025-10-05 08:27:18,720 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_0g906
2025-10-05 08:27:18,735 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 08:27:18,752 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:27:18,818 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 08:27:18,737 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 0g906 for user 1
2025-10-05 08:27:18,828 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 40, 'total': 100, 'status': 'Initializing Simple RAG Agent'}
2025-10-05 08:27:18,856 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:27:18,871 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 08:27:18,859 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 08:27:18,873 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 60, 'total': 100, 'status': 'Adding Document to Simple RAG Agent'}
2025-10-05 08:27:18,919 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_0g906\FAQ.pdf (type: pdf)
2025-10-05 08:27:39,784 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-05 08:27:43,790 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '21'
2025-10-05 08:27:44,588 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent 0g906
2025-10-05 08:27:44,643 | INFO | app.utils.event_utils | Published event.agent.success event for agent 0g906 for user 1
2025-10-05 08:27:44,757 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:27:44,827 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-05 08:27:44,830 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 80, 'total': 100, 'status': 'Agent creation is completed', 'agent_id': '0g906'}
2025-10-05 08:27:44,757 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-05 08:27:45,111 | INFO | app.websocket.ws_route | Integration is being added: <agent_id=0g906 platform=api>
2025-10-05 08:27:45,188 | ERROR | app.websocket.ws_route | Error adding integration: Error adding integration: 'key' is an invalid keyword argument for ApiKey
2025-10-05 08:30:41,786 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-05 08:30:42,295 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-05 08:30:43,103 | INFO | main | Redis event bus stopped
2025-10-05 08:32:32,187 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-05 08:32:32,257 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-05 08:32:32,797 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-05 08:32:33,133 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-05 08:33:26,888 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-05 08:33:26,914 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-05 08:33:27,170 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-05 08:33:27,244 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-05 08:33:53,758 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-05 08:33:53,764 | INFO | main | Redis event bus started
2025-10-05 08:33:56,946 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-05 08:33:57,538 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-05 08:34:44,898 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_iZ166
2025-10-05 08:34:51,665 | INFO | app.dependencies.redis_storage | Agent iZ166 stored in Redis
2025-10-05 08:34:54,289 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-05 08:34:54,307 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: iZ166
2025-10-05 08:34:54,380 | INFO | app.utils.event_utils | Published event.agent.progress event for agent iZ166 for user 1
2025-10-05 08:34:54,437 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='iZ166'
2025-10-05 08:34:54,478 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:34:54,504 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 08:34:54,525 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 08:34:54,514 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 20, 'total': 100, 'status': 'Initialize agent'}
2025-10-05 08:34:54,549 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-05 08:34:54,647 | INFO | app.utils.event_utils | Published event.agent.progress event for agent iZ166 for user 1
2025-10-05 08:34:54,677 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_iZ166
2025-10-05 08:34:54,702 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 08:34:54,705 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:34:54,724 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 08:34:54,739 | INFO | app.utils.event_utils | Published event.agent.progress event for agent iZ166 for user 1
2025-10-05 08:34:54,745 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 40, 'total': 100, 'status': 'Initializing Simple RAG Agent'}
2025-10-05 08:34:54,821 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 08:34:54,813 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_iZ166\FAQ.pdf (type: pdf)
2025-10-05 08:34:54,820 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:34:54,896 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 08:34:54,924 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 60, 'total': 100, 'status': 'Adding Document to Simple RAG Agent'}
2025-10-05 08:35:02,676 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-05 08:35:08,883 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '22'
2025-10-05 08:35:08,888 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent iZ166
2025-10-05 08:35:08,971 | INFO | app.utils.event_utils | Published event.agent.success event for agent iZ166 for user 1
2025-10-05 08:35:09,003 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:35:09,009 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-05 08:35:09,015 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 80, 'total': 100, 'status': 'Agent creation is completed', 'agent_id': 'iZ166'}
2025-10-05 08:35:09,032 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-05 08:35:09,192 | INFO | app.websocket.ws_route | Integration is being added: <agent_id=iZ166 platform=api>
2025-10-05 08:35:09,206 | ERROR | app.websocket.ws_route | Error adding integration: Error adding integration: 'key' is an invalid keyword argument for ApiKey
2025-10-05 08:37:22,644 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-05 08:37:22,838 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-05 08:37:24,661 | INFO | main | Redis event bus stopped
2025-10-05 08:37:48,920 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-05 08:37:48,922 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-05 08:37:48,925 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-05 08:37:48,925 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-05 08:38:11,957 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-05 08:38:11,960 | INFO | main | Redis event bus started
2025-10-05 08:38:17,771 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-05 08:38:17,801 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-05 08:38:32,599 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_5O880
2025-10-05 08:38:34,540 | INFO | app.dependencies.redis_storage | Agent 5O880 stored in Redis
2025-10-05 08:38:35,569 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-05 08:38:35,581 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: 5O880
2025-10-05 08:38:37,084 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 5O880 for user 1
2025-10-05 08:38:37,572 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='5O880'
2025-10-05 08:38:37,650 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-05 08:38:37,657 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 08:38:37,661 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:38:37,686 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 08:38:37,744 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 5O880 for user 1
2025-10-05 08:38:37,755 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 20, 'total': 100, 'status': 'Initialize agent'}
2025-10-05 08:38:37,836 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_5O880
2025-10-05 08:38:37,843 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 08:38:37,858 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:38:37,966 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 08:38:37,969 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 5O880 for user 1
2025-10-05 08:38:37,999 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 40, 'total': 100, 'status': 'Initializing Simple RAG Agent'}
2025-10-05 08:38:38,084 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_5O880\FAQ.pdf (type: pdf)
2025-10-05 08:38:38,078 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:38:38,062 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 08:38:38,185 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 08:38:38,199 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 60, 'total': 100, 'status': 'Adding Document to Simple RAG Agent'}
2025-10-05 08:38:43,414 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-05 08:38:46,525 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '23'
2025-10-05 08:38:47,080 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent 5O880
2025-10-05 08:38:47,404 | INFO | app.utils.event_utils | Published event.agent.success event for agent 5O880 for user 1
2025-10-05 08:38:47,425 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-05 08:38:47,425 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:38:47,491 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-05 08:38:47,512 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 80, 'total': 100, 'status': 'Agent creation is completed', 'agent_id': '5O880'}
2025-10-05 08:38:47,666 | INFO | app.websocket.ws_route | Integration is being added: <agent_id=5O880 platform=api>
2025-10-05 08:38:47,703 | ERROR | app.websocket.ws_route | Error adding integration: Error adding integration: 'is_active' is an invalid keyword argument for ApiKey
2025-10-05 08:40:18,711 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-05 08:40:18,725 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-05 08:40:19,682 | INFO | main | Redis event bus stopped
2025-10-05 08:40:54,651 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-05 08:40:54,653 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-05 08:40:54,655 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-05 08:40:54,658 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-05 08:41:19,421 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-05 08:41:19,457 | INFO | main | Redis event bus started
2025-10-05 08:41:22,074 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-05 08:41:22,075 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-05 08:41:35,603 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Nf213
2025-10-05 08:41:39,486 | INFO | app.dependencies.redis_storage | Agent Nf213 stored in Redis
2025-10-05 08:41:41,703 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-05 08:41:41,715 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: Nf213
2025-10-05 08:41:41,818 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Nf213 for user 1
2025-10-05 08:41:41,963 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='Nf213'
2025-10-05 08:41:42,103 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-05 08:41:42,117 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 08:41:42,121 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:41:42,127 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 08:41:42,447 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 20, 'total': 100, 'status': 'Initialize agent'}
2025-10-05 08:41:42,497 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Nf213 for user 1
2025-10-05 08:41:42,585 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Nf213
2025-10-05 08:41:42,622 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:41:42,625 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Nf213 for user 1
2025-10-05 08:41:42,623 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 08:41:42,627 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 08:41:42,637 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 40, 'total': 100, 'status': 'Initializing Simple RAG Agent'}
2025-10-05 08:41:42,678 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_Nf213\FAQ.pdf (type: pdf)
2025-10-05 08:41:42,689 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:41:42,700 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 08:41:42,733 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 08:41:42,794 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 60, 'total': 100, 'status': 'Adding Document to Simple RAG Agent'}
2025-10-05 08:41:47,938 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-05 08:41:52,093 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '24'
2025-10-05 08:41:52,422 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent Nf213
2025-10-05 08:41:52,759 | INFO | app.utils.event_utils | Published event.agent.success event for agent Nf213 for user 1
2025-10-05 08:41:53,348 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:41:53,474 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-05 08:41:53,847 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 80, 'total': 100, 'status': 'Agent creation is completed', 'agent_id': 'Nf213'}
2025-10-05 08:41:53,334 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-05 08:41:56,327 | INFO | app.websocket.ws_route | Integration is being added: <agent_id=Nf213 platform=api>
2025-10-05 08:41:56,701 | INFO | app.utils.agent_utils | Generated API key for user 1, agent Nf213
2025-10-05 08:41:57,030 | ERROR | app.websocket.ws_route | Error adding integration: Error adding integration: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`saas`.`platforms`, CONSTRAINT `platforms_ibfk_1` FOREIGN KEY (`integration_id`) REFERENCES `integrations` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)')
[SQL: INSERT INTO platforms (integration_id, platform_type, api_key) VALUES (%(integration_id)s, %(platform_type)s, %(api_key)s)]
[parameters: {'integration_id': 4, 'platform_type': 'api', 'api_key': 'jPxL9eYnP6JNjpTIrByZYMVi9vtw3qc8'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-05 08:43:27,438 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-05 08:43:27,450 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-05 08:53:58,614 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-05 08:53:58,636 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-05 08:53:58,638 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-05 08:53:58,639 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-05 08:54:28,581 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-05 08:54:28,596 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-05 08:54:28,599 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-05 08:54:28,600 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-05 08:54:48,434 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-05 08:54:48,454 | INFO | main | Redis event bus started
2025-10-05 08:54:53,953 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-05 08:54:53,954 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-05 08:55:10,089 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_gh824
2025-10-05 08:55:20,156 | INFO | app.dependencies.redis_storage | Agent gh824 stored in Redis
2025-10-05 08:55:21,784 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-05 08:55:21,954 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: gh824
2025-10-05 08:55:22,006 | INFO | app.utils.event_utils | Published event.agent.progress event for agent gh824 for user 1
2025-10-05 08:55:22,357 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:55:22,358 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 08:55:22,279 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='gh824'
2025-10-05 08:55:22,359 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 20, 'total': 100, 'status': 'Initialize agent'}
2025-10-05 08:55:22,365 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 08:55:22,453 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-05 08:55:22,511 | INFO | app.utils.event_utils | Published event.agent.progress event for agent gh824 for user 1
2025-10-05 08:55:22,521 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_gh824
2025-10-05 08:55:22,523 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 08:55:22,528 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:55:22,531 | INFO | app.utils.event_utils | Published event.agent.progress event for agent gh824 for user 1
2025-10-05 08:55:22,530 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 08:55:22,540 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 08:55:22,536 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 40, 'total': 100, 'status': 'Initializing Simple RAG Agent'}
2025-10-05 08:55:22,543 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_gh824\FAQ.pdf (type: pdf)
2025-10-05 08:55:22,565 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:55:22,592 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 08:55:22,593 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 60, 'total': 100, 'status': 'Adding Document to Simple RAG Agent'}
2025-10-05 08:55:29,299 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-05 08:55:33,845 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '25'
2025-10-05 08:55:34,011 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent gh824
2025-10-05 08:55:34,157 | INFO | app.utils.event_utils | Published event.agent.success event for agent gh824 for user 1
2025-10-05 08:55:34,632 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:55:34,647 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-05 08:55:34,664 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 80, 'total': 100, 'status': 'Agent creation is completed', 'agent_id': 'gh824'}
2025-10-05 08:55:34,662 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-05 08:55:34,783 | ERROR | app.websocket.ws_route | WebSocket error for user 1: add_integration() takes 3 positional arguments but 4 were given
2025-10-05 08:55:34,786 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-05 08:55:34,787 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-05 08:56:10,950 | INFO | main | Redis event bus stopped
2025-10-05 08:56:36,433 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-05 08:56:36,439 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-05 08:56:36,441 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-05 08:56:36,465 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-05 08:56:57,228 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-05 08:56:57,231 | INFO | main | Redis event bus started
2025-10-05 08:57:02,231 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-05 08:57:02,376 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-05 08:57:12,963 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_2r831
2025-10-05 08:57:17,771 | INFO | app.dependencies.redis_storage | Agent 2r831 stored in Redis
2025-10-05 08:57:18,236 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-05 08:57:18,282 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: 2r831
2025-10-05 08:57:18,311 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2r831 for user 1
2025-10-05 08:57:18,628 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='2r831'
2025-10-05 08:57:18,752 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-05 08:57:18,954 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2r831 for user 1
2025-10-05 08:57:18,984 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:57:18,985 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 08:57:19,011 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 20, 'total': 100, 'status': 'Initialize agent'}
2025-10-05 08:57:19,014 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_2r831
2025-10-05 08:57:18,985 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 08:57:19,181 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 2r831 for user 1
2025-10-05 08:57:19,214 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 08:57:19,219 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:57:19,232 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_2r831\FAQ.pdf (type: pdf)
2025-10-05 08:57:19,229 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 08:57:19,227 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 08:57:19,255 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 40, 'total': 100, 'status': 'Initializing Simple RAG Agent'}
2025-10-05 08:57:19,275 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:57:19,364 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 08:57:19,493 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 60, 'total': 100, 'status': 'Adding Document to Simple RAG Agent'}
2025-10-05 08:57:25,002 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-05 08:57:28,621 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '26'
2025-10-05 08:57:28,784 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent 2r831
2025-10-05 08:57:29,072 | INFO | app.utils.event_utils | Published event.agent.success event for agent 2r831 for user 1
2025-10-05 08:57:29,214 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 08:57:29,214 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-05 08:57:29,202 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-05 08:57:29,215 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 80, 'total': 100, 'status': 'Agent creation is completed', 'agent_id': '2r831'}
2025-10-05 08:57:29,699 | INFO | app.websocket.ws_route | Integration is being added: <coroutine object add_integration at 0x000001CCEA85C240>
2025-10-05 08:57:29,712 | ERROR | app.websocket.ws_route | WebSocket error for user 1: 'coroutine' object has no attribute 'id'
2025-10-05 08:57:29,758 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-05 08:57:29,789 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-05 08:58:47,900 | INFO | main | Redis event bus stopped
2025-10-05 08:59:04,082 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-05 08:59:04,086 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-05 08:59:04,088 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-05 08:59:04,089 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-05 08:59:27,500 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-05 08:59:27,505 | INFO | main | Redis event bus started
2025-10-05 08:59:33,785 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-05 08:59:33,845 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-05 09:00:10,236 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_nR959
2025-10-05 09:00:11,520 | INFO | app.dependencies.redis_storage | Agent nR959 stored in Redis
2025-10-05 09:00:11,933 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-05 09:00:11,976 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: nR959
2025-10-05 09:00:12,604 | INFO | app.utils.event_utils | Published event.agent.progress event for agent nR959 for user 1
2025-10-05 09:00:12,719 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 09:00:12,697 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='nR959'
2025-10-05 09:00:12,780 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 09:00:12,839 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 20, 'total': 100, 'status': 'Initialize agent'}
2025-10-05 09:00:12,780 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 09:00:12,907 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-05 09:00:13,210 | INFO | app.utils.event_utils | Published event.agent.progress event for agent nR959 for user 1
2025-10-05 09:00:13,262 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 09:00:13,236 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_nR959
2025-10-05 09:00:13,290 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 09:00:13,450 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 09:00:13,580 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 40, 'total': 100, 'status': 'Initializing Simple RAG Agent'}
2025-10-05 09:00:13,937 | INFO | app.utils.event_utils | Published event.agent.progress event for agent nR959 for user 1
2025-10-05 09:00:13,959 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 09:00:13,948 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_nR959\FAQ.pdf (type: pdf)
2025-10-05 09:00:13,975 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 09:00:13,976 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 09:00:14,039 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 60, 'total': 100, 'status': 'Adding Document to Simple RAG Agent'}
2025-10-05 09:00:23,873 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-05 09:00:26,481 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '27'
2025-10-05 09:00:27,044 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent nR959
2025-10-05 09:00:27,114 | INFO | app.utils.event_utils | Published event.agent.success event for agent nR959 for user 1
2025-10-05 09:00:27,139 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 09:00:27,155 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-05 09:00:27,138 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-05 09:00:27,164 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 80, 'total': 100, 'status': 'Agent creation is completed', 'agent_id': 'nR959'}
2025-10-05 09:00:27,266 | INFO | app.websocket.ws_route | Integration is being added: <agent_id=nR959 platform=api>
2025-10-05 09:00:27,292 | INFO | app.utils.agent_utils | Generated API key for user 1, agent nR959
2025-10-05 09:00:27,333 | INFO | app.websocket.ws_route | Integration added successfully: <agent_id=nR959 platform=api>
2025-10-05 09:01:08,575 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-05 09:01:08,575 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-05 09:01:10,059 | INFO | main | Redis event bus stopped
2025-10-05 20:59:01,401 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-05 20:59:01,404 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-05 20:59:01,404 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-05 20:59:01,404 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-05 20:59:23,228 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-05 20:59:23,229 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-05 20:59:23,229 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-05 20:59:23,230 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-05 20:59:39,263 | ERROR | main | Error starting Redis event bus: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-10-05 21:01:28,958 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-05 21:01:28,964 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: nR959
2025-10-05 21:01:28,981 | INFO | app.utils.event_utils | Published event.agent.progress event for agent nR959 for user 1
2025-10-05 21:01:29,027 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='nR959'
2025-10-05 21:01:29,366 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 21:01:29,561 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-05 21:01:29,569 | INFO | app.utils.event_utils | Published event.agent.progress event for agent nR959 for user 1
2025-10-05 21:01:29,572 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_nR959
2025-10-05 21:01:29,572 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 21:01:29,577 | INFO | app.utils.event_utils | Published event.agent.progress event for agent nR959 for user 1
2025-10-05 21:01:29,581 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_nR959\FAQ.pdf (type: pdf)
2025-10-05 21:01:29,581 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 21:01:29,975 | INFO | app.utils.file_utils | Rollback: Removed file documents/user_1/agent_nR959\FAQ.pdf
2025-10-05 21:01:29,978 | ERROR | app.tasks.test_task | Error creating Simple RAG Agent: (pymysql.err.IntegrityError) (1062, "Duplicate entry 'nR959' for key 'agents.PRIMARY'")
[SQL: INSERT INTO agents (id, user_id, name, avatar, model, `role`, status, base_prompt, short_term_memory, long_term_memory, tone) VALUES (%(id)s, %(user_id)s, %(name)s, %(avatar)s, %(model)s, %(role)s, %(status)s, %(base_prompt)s, %(short_term_memory)s, %(long_term_memory)s, %(tone)s)]
[parameters: {'id': 'nR959', 'user_id': 1, 'name': 'ketiga', 'avatar': None, 'model': 'gpt-3.5-turbo', 'role': 'simple RAG agent', 'status': 'active', 'base_prompt': 'pp', 'short_term_memory': 0, 'long_term_memory': 0, 'tone': 'friendly'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-05 21:01:29,990 | WARNING | app.tasks.test_task | Duplicate agent ID detected: nR959
2025-10-05 21:01:29,994 | INFO | app.utils.event_utils | Published event.agent.failure event for agent nR959 for user 1
2025-10-05 21:01:30,023 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.failure.user:1
2025-10-05 21:02:05,167 | INFO | main | Redis event bus stopped
2025-10-05 21:02:16,193 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-05 21:02:16,195 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-05 21:02:16,196 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-05 21:02:16,197 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-05 21:02:30,017 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-05 21:02:30,021 | INFO | main | Redis event bus started
2025-10-05 21:02:37,793 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-05 21:02:37,795 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-05 21:03:25,919 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-05 21:03:32,045 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_u9023
2025-10-05 21:03:35,791 | INFO | app.dependencies.redis_storage | Agent u9023 stored in Redis
2025-10-05 21:05:44,993 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_PE145
2025-10-05 21:05:46,960 | INFO | app.dependencies.redis_storage | Agent PE145 stored in Redis
2025-10-05 21:06:21,577 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-05 21:06:21,582 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: u9023
2025-10-05 21:06:21,587 | INFO | app.utils.event_utils | Published event.agent.progress event for agent u9023 for user 1
2025-10-05 21:06:21,591 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='u9023'
2025-10-05 21:06:21,820 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-05 21:06:22,003 | INFO | app.utils.event_utils | Published event.agent.progress event for agent u9023 for user 1
2025-10-05 21:06:22,005 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_u9023
2025-10-05 21:06:22,036 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 21:06:22,039 | INFO | app.utils.event_utils | Published event.agent.progress event for agent u9023 for user 1
2025-10-05 21:06:22,054 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 21:06:22,063 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 21:06:22,057 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 21:06:22,072 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 21:06:22,086 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 20, 'total': 100, 'status': 'Initialize agent'}
2025-10-05 21:06:22,067 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_u9023\FAQ.pdf (type: pdf)
2025-10-05 21:06:22,131 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 21:06:22,168 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 21:06:22,169 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 40, 'total': 100, 'status': 'Initializing Simple RAG Agent'}
2025-10-05 21:06:22,210 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 21:06:22,212 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 21:06:22,215 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 60, 'total': 100, 'status': 'Adding Document to Simple RAG Agent'}
2025-10-05 21:06:29,390 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-05 21:06:32,941 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '28'
2025-10-05 21:06:33,036 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent u9023
2025-10-05 21:06:33,190 | INFO | app.utils.event_utils | Published event.agent.success event for agent u9023 for user 1
2025-10-05 21:06:33,304 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-05 21:06:33,320 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 21:06:33,325 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-05 21:06:33,325 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 80, 'total': 100, 'status': 'Agent creation is completed', 'agent_id': 'u9023'}
2025-10-05 21:06:33,393 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-05 21:06:33,588 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: PE145
2025-10-05 21:06:33,721 | INFO | app.utils.event_utils | Published event.agent.progress event for agent PE145 for user 1
2025-10-05 21:06:33,736 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 21:06:33,740 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='PE145'
2025-10-05 21:06:33,758 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-05 21:06:33,766 | INFO | app.utils.event_utils | Published event.agent.progress event for agent PE145 for user 1
2025-10-05 21:06:33,776 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_PE145
2025-10-05 21:06:33,778 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 21:06:33,785 | INFO | app.utils.event_utils | Published event.agent.progress event for agent PE145 for user 1
2025-10-05 21:06:33,795 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-05 21:06:33,805 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_PE145\FAQ.pdf (type: pdf)
2025-10-05 21:06:34,064 | INFO | app.websocket.ws_route | Integration is being added: <agent_id=u9023 platform=api>
2025-10-05 21:06:34,170 | INFO | app.utils.agent_utils | Generated API key for user 1, agent u9023
2025-10-05 21:06:34,212 | INFO | app.websocket.ws_route | Integration added successfully: <agent_id=u9023 platform=api>
2025-10-05 21:06:34,237 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 21:06:34,248 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 21:06:34,263 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 20, 'total': 100, 'status': 'Initialize agent'}
2025-10-05 21:06:34,286 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 21:06:34,332 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 21:06:34,333 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 40, 'total': 100, 'status': 'Initializing Simple RAG Agent'}
2025-10-05 21:06:34,369 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 21:06:34,399 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-05 21:06:34,413 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 60, 'total': 100, 'status': 'Adding Document to Simple RAG Agent'}
2025-10-05 21:06:37,893 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-05 21:06:39,239 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '29'
2025-10-05 21:06:39,242 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent PE145
2025-10-05 21:06:39,254 | INFO | app.utils.event_utils | Published event.agent.success event for agent PE145 for user 1
2025-10-05 21:06:39,269 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-05 21:06:39,276 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-05 21:06:39,284 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-05 21:06:39,285 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 80, 'total': 100, 'status': 'Agent creation is completed', 'agent_id': 'PE145'}
2025-10-05 21:06:39,305 | INFO | app.websocket.ws_route | Integration is being added: <agent_id=PE145 platform=api>
2025-10-05 21:06:39,324 | INFO | app.utils.agent_utils | Generated API key for user 1, agent PE145
2025-10-05 21:06:39,353 | INFO | app.websocket.ws_route | Integration added successfully: <agent_id=PE145 platform=api>
2025-10-05 21:07:09,573 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-05 21:07:09,610 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-05 21:07:09,761 | INFO | main | Redis event bus stopped
2025-10-06 17:25:45,820 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-06 17:25:45,829 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-06 17:25:45,830 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-06 17:25:45,830 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-06 17:26:35,248 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-06 17:26:35,250 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-06 17:26:35,260 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-06 17:26:35,266 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-06 17:27:39,231 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-06 17:27:39,297 | INFO | main | Redis event bus started
2025-10-06 17:27:57,558 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-06 17:28:07,513 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_r7239
2025-10-06 17:28:12,785 | INFO | app.dependencies.redis_storage | Agent r7239 stored in Redis
2025-10-06 17:28:16,614 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-06 17:28:16,646 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: r7239
2025-10-06 17:28:16,663 | INFO | app.utils.event_utils | Published event.agent.progress event for agent r7239 for user 1
2025-10-06 17:28:16,723 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='r7239'
2025-10-06 17:28:17,137 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-06 17:28:17,139 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-06 17:28:17,138 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-06 17:28:17,143 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-06 17:28:17,156 | INFO | app.utils.event_utils | Published event.agent.progress event for agent r7239 for user 1
2025-10-06 17:28:17,172 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-06 17:28:17,170 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_r7239
2025-10-06 17:28:17,180 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-06 17:28:17,186 | INFO | app.utils.event_utils | Published event.agent.progress event for agent r7239 for user 1
2025-10-06 17:28:17,189 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-06 17:28:17,212 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-06 17:28:17,195 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_r7239\FAQ.pdf (type: pdf)
2025-10-06 17:28:17,214 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-06 17:28:17,194 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-06 17:28:34,132 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-06 17:28:38,853 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '30'
2025-10-06 17:28:38,901 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent r7239
2025-10-06 17:28:39,052 | INFO | app.utils.event_utils | Published event.agent.success event for agent r7239 for user 1
2025-10-06 17:28:39,144 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-06 17:28:39,150 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-06 17:28:39,196 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-06 17:29:41,341 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-06 17:29:41,424 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-06 17:29:48,345 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_mR216
2025-10-06 17:29:50,869 | INFO | app.dependencies.redis_storage | Agent mR216 stored in Redis
2025-10-06 17:29:51,587 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-06 17:29:51,663 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: mR216
2025-10-06 17:29:51,723 | INFO | app.utils.event_utils | Published event.agent.progress event for agent mR216 for user 1
2025-10-06 17:29:51,864 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-06 17:29:51,858 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='mR216'
2025-10-06 17:29:51,936 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-06 17:29:51,957 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-06 17:29:52,009 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-06 17:29:52,063 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 20, 'total': 100, 'status': 'Initialize agent'}
2025-10-06 17:29:52,179 | INFO | app.utils.event_utils | Published event.agent.progress event for agent mR216 for user 1
2025-10-06 17:29:52,277 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_mR216
2025-10-06 17:29:52,278 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-06 17:29:52,286 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-06 17:29:52,396 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-06 17:29:52,410 | INFO | app.utils.event_utils | Published event.agent.progress event for agent mR216 for user 1
2025-10-06 17:29:52,444 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 40, 'total': 100, 'status': 'Initializing Simple RAG Agent'}
2025-10-06 17:29:52,797 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-06 17:29:52,844 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-06 17:29:52,844 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-06 17:29:52,845 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 60, 'total': 100, 'status': 'Adding Document to Simple RAG Agent'}
2025-10-06 17:29:52,803 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_mR216\FAQ.pdf (type: pdf)
2025-10-06 17:29:57,650 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-06 17:29:59,452 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '31'
2025-10-06 17:29:59,460 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent mR216
2025-10-06 17:29:59,644 | INFO | app.utils.event_utils | Published event.agent.success event for agent mR216 for user 1
2025-10-06 17:29:59,674 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-06 17:29:59,674 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-06 17:29:59,675 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 80, 'total': 100, 'status': 'Agent creation is completed', 'agent_id': 'mR216'}
2025-10-06 17:29:59,682 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-06 17:30:00,059 | INFO | app.websocket.ws_route | Integration is being added: <agent_id=mR216 platform=api>
2025-10-06 17:30:00,108 | INFO | app.utils.agent_utils | Generated API key for user 1, agent mR216
2025-10-06 17:30:00,191 | INFO | app.websocket.ws_route | Integration added successfully: <agent_id=mR216 platform=api>
2025-10-06 17:31:02,491 | INFO | app.controllers.agent_controller | Successfully retrieved agents for user khaerul@gmail.com
2025-10-06 17:39:16,959 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-06 17:39:17,087 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-06 17:39:18,599 | INFO | main | Redis event bus stopped
2025-10-06 17:40:17,918 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-06 17:40:18,061 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-06 17:40:18,070 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-06 17:40:18,152 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-06 17:41:14,544 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-06 17:41:14,545 | INFO | main | Redis event bus started
2025-10-06 17:41:18,288 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-06 17:41:18,290 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-06 17:41:38,202 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_kE187
2025-10-06 17:41:45,272 | INFO | app.dependencies.redis_storage | Agent kE187 stored in Redis
2025-10-06 17:41:47,558 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-06 17:41:47,651 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: kE187
2025-10-06 17:41:47,695 | INFO | app.utils.event_utils | Published event.agent.progress event for agent kE187 for user 1
2025-10-06 17:41:47,752 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='kE187'
2025-10-06 17:41:47,853 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-06 17:41:47,866 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-06 17:41:47,866 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-06 17:41:47,885 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 20, 'total': 100, 'status': 'Initialize agent'}
2025-10-06 17:41:47,901 | INFO | app.utils.event_utils | Published event.agent.progress event for agent kE187 for user 1
2025-10-06 17:41:47,860 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-06 17:41:47,935 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-06 17:41:47,936 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-06 17:41:47,932 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_kE187
2025-10-06 17:41:47,936 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-06 17:41:47,957 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 40, 'total': 100, 'status': 'Initializing Simple RAG Agent'}
2025-10-06 17:41:48,074 | INFO | app.utils.event_utils | Published event.agent.progress event for agent kE187 for user 1
2025-10-06 17:41:48,234 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_kE187\FAQ.pdf (type: pdf)
2025-10-06 17:41:48,290 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-06 17:41:48,312 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-06 17:41:48,417 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-06 17:41:48,466 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 60, 'total': 100, 'status': 'Adding Document to Simple RAG Agent'}
2025-10-06 17:41:54,707 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-06 17:41:58,070 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '32'
2025-10-06 17:41:58,076 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent kE187
2025-10-06 17:41:58,230 | INFO | app.utils.event_utils | Published event.agent.success event for agent kE187 for user 1
2025-10-06 17:41:58,299 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-06 17:41:58,570 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-06 17:41:58,300 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-06 17:41:58,674 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 80, 'total': 100, 'status': 'Agent creation is completed', 'agent_id': 'kE187'}
2025-10-06 17:41:58,909 | INFO | app.websocket.ws_route | Integration is being added: <agent_id=kE187 platform=api>
2025-10-06 17:41:58,974 | INFO | app.utils.agent_utils | Generated API key for user 1, agent kE187
2025-10-06 17:41:59,026 | INFO | app.websocket.ws_route | Integration added successfully: <agent_id=kE187 platform=api>
2025-10-06 17:43:48,623 | ERROR | app.middlewares.error_handler | Unexpected error: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\encoders.py", line 324, in jsonable_encoder
    data = dict(obj)
TypeError: 'coroutine' object is not iterable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\encoders.py", line 329, in jsonable_encoder
    data = vars(obj)
TypeError: vars() argument must have __dict__ attribute

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\middlewares\error_handler.py", line 17, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    raise app_exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\routing.py", line 328, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\routing.py", line 202, in serialize_response
    return jsonable_encoder(response_content)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\encoders.py", line 289, in jsonable_encoder
    encoded_value = jsonable_encoder(
        value,
    ...<4 lines>...
        sqlalchemy_safe=sqlalchemy_safe,
    )
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\encoders.py", line 332, in jsonable_encoder
    raise ValueError(errors) from e
ValueError: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]
2025-10-06 17:44:46,294 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-06 17:44:47,407 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-06 17:44:51,649 | INFO | main | Redis event bus stopped
2025-10-06 17:45:13,474 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-06 17:45:13,475 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-06 17:45:13,476 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-06 17:45:13,477 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-06 17:45:35,525 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-06 17:45:35,528 | INFO | main | Redis event bus started
2025-10-06 17:45:53,380 | ERROR | app.utils.agent_utils | Error validating API key: (pymysql.err.ProgrammingError) (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'key = 'CenUI37cRyFq67xN3hiweYfRPabKtCWs' AND agent_id = 'kE187' AND is_active = ' at line 1")
[SQL: SELECT * FROM api_keys WHERE key = %(key)s AND agent_id = %(agent_id)s AND is_active = true]
[parameters: {'key': 'CenUI37cRyFq67xN3hiweYfRPabKtCWs', 'agent_id': 'kE187'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-10-06 17:45:53,381 | WARNING | app.controllers.platform_controller | Invalid API key: CenUI37cRyFq67xN3hiweYfRPabKtCWs
2025-10-06 17:47:07,613 | ERROR | app.utils.agent_utils | Error validating API key: (pymysql.err.ProgrammingError) (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'key = 'CenUI37cRyFq67xN3hiweYfRPabKtCWs' AND agent_id = 'kE187' AND is_active = ' at line 1")
[SQL: SELECT * FROM api_keys WHERE key = %(key)s AND agent_id = %(agent_id)s AND is_active = true]
[parameters: {'key': 'CenUI37cRyFq67xN3hiweYfRPabKtCWs', 'agent_id': 'kE187'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-10-06 17:47:07,803 | WARNING | app.controllers.platform_controller | Invalid API key: CenUI37cRyFq67xN3hiweYfRPabKtCWs
2025-10-06 17:49:14,650 | INFO | main | Redis event bus stopped
2025-10-06 17:50:08,861 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-06 17:50:09,022 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-06 17:50:09,119 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-06 17:50:09,655 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-06 17:51:55,995 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-06 17:51:55,996 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-06 17:51:55,997 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-06 17:51:55,998 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-06 17:52:18,249 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-06 17:52:18,307 | INFO | main | Redis event bus started
2025-10-06 17:52:30,142 | INFO | app.utils.agent_utils | Valid API key for agent kE187
2025-10-06 17:52:40,903 | INFO | app.dependencies.redis_storage | Agent kE187 retrieved from Redis
2025-10-06 17:54:30,603 | INFO | app.utils.agent_utils | Valid API key for agent kE187
2025-10-06 17:56:02,469 | INFO | main | Redis event bus stopped
2025-10-10 08:08:41,438 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-10 08:08:41,589 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-10 08:08:41,604 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-10 08:08:41,605 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-10 08:09:52,124 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-10 08:09:52,129 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-10 08:09:52,140 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-10 08:09:52,194 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-10 08:10:27,483 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-10 08:10:27,487 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-10 08:10:27,505 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-10 08:10:27,508 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-10 08:11:02,694 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-10 08:11:02,725 | INFO | main | Redis event bus started
2025-10-10 08:12:11,644 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-10 08:12:11,666 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-10 08:13:38,240 | INFO | app.tasks.test_task | Task Execution: user_id 3
2025-10-10 08:13:38,303 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 3: AC183
2025-10-10 08:13:38,538 | INFO | app.utils.event_utils | Published event.agent.progress event for agent AC183 for user 3
2025-10-10 08:13:38,704 | INFO | app.tasks.test_task | Agent data: name="Khaerul's Team" avatar='' model='gpt-4o' description='' base_prompt='You are a helpful AI assistant. Always be polite, professional, and provide accurate information.' tone='formal' short_term_memory=False long_term_memory=False status='active' id='AC183'
2025-10-10 08:13:39,621 | INFO | app.events.redis_event | User with id 3 published to channel event.agent.progress.user:3
2025-10-10 08:13:39,656 | INFO | app.tasks.test_task | New agent: <Agent name=Khaerul's Team user_id=3>
2025-10-10 08:13:39,630 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-10 08:13:39,680 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-10 08:13:39,743 | INFO | app.utils.event_utils | Published event.agent.progress event for agent AC183 for user 3
2025-10-10 08:13:39,756 | INFO | app.utils.file_utils | Created directory: documents/user_3/agent_AC183
2025-10-10 08:13:39,760 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-10 08:13:39,762 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-10 08:13:39,757 | INFO | app.events.redis_event | User with id 3 published to channel event.agent.progress.user:3
2025-10-10 08:13:40,107 | ERROR | app.tasks.test_task | Error creating Simple RAG Agent: (pymysql.err.IntegrityError) (1062, "Duplicate entry 'AC183' for key 'agents.PRIMARY'")
[SQL: INSERT INTO agents (id, user_id, name, avatar, model, `role`, description, status, base_prompt, short_term_memory, long_term_memory, tone) VALUES (%(id)s, %(user_id)s, %(name)s, %(avatar)s, %(model)s, %(role)s, %(description)s, %(status)s, %(base_prompt)s, %(short_term_memory)s, %(long_term_memory)s, %(tone)s)]
[parameters: {'id': 'AC183', 'user_id': 3, 'name': "Khaerul's Team", 'avatar': '', 'model': 'gpt-4o', 'role': 'simple RAG agent', 'description': '', 'status': 'active', 'base_prompt': 'You are a helpful AI assistant. Always be polite, professional, and provide accurate information.', 'short_term_memory': 0, 'long_term_memory': 0, 'tone': 'formal'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-10 08:13:40,148 | WARNING | app.tasks.test_task | Duplicate agent ID detected: AC183
2025-10-10 08:13:40,185 | INFO | app.utils.event_utils | Published event.agent.failure event for agent AC183 for user 3
2025-10-10 08:13:40,209 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-10 08:13:40,213 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_FAILURE
2025-10-10 08:13:40,575 | INFO | app.events.redis_event | User with id 3 published to channel event.agent.failure.user:3
2025-10-10 08:15:19,773 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-10 08:15:20,695 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-10 08:15:22,283 | INFO | main | Redis event bus stopped
2025-10-10 08:16:30,046 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-10 08:16:30,048 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-10 08:16:30,049 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-10 08:16:30,049 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-10 08:19:22,047 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-10 08:19:22,103 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-10 08:19:22,140 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-10 08:19:22,166 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-10 08:20:04,091 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-10 08:20:04,093 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-10 08:20:04,094 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-10 08:20:04,097 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-10 08:20:28,615 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-10 08:20:28,628 | INFO | main | Redis event bus started
2025-10-10 08:20:33,731 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-10 08:20:33,735 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-10 08:20:53,506 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-10 08:21:11,344 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_iw262
2025-10-10 08:21:15,219 | INFO | app.utils.file_utils | Created database documents/user_1/agent_iw262\products.db from products.csv
2025-10-10 08:21:16,157 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-10 08:21:24,281 | INFO | app.dependencies.redis_storage | Agent iw262 stored in Redis
2025-10-10 08:21:51,084 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-10 08:21:51,118 | INFO | app.tasks.test_task | Creating Customer Service Agent for user 1
2025-10-10 08:21:51,161 | INFO | app.utils.event_utils | Published event.agent.progress event for agent iw262 for user 1
2025-10-10 08:21:51,201 | INFO | app.tasks.test_task | Agent data: id='iw262' name='Customer Support Bot' avatar=None model='gpt-4o' description=None base_prompt='You are a helpful customer service agent' tone='friendly' short_term_memory=False long_term_memory=False status='active' company_name='PT. lord suroso' industry='Teknologi AI' company_description='tidak ada' address='jln.kwitang no 4, Jakarta Pusat' email='suroso@gmail.com' website=None fallback_email='siti@gmail.com'
2025-10-10 08:21:51,663 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-10 08:21:51,668 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-10 08:21:51,675 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 10, 'total': 100, 'status': 'Initialize Customer Service Agent'}
2025-10-10 08:21:51,663 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-10 08:21:51,951 | INFO | app.tasks.test_task | New agent: <Agent name=Customer Support Bot user_id=1>
2025-10-10 08:21:52,113 | INFO | app.utils.event_utils | Published event.agent.progress event for agent iw262 for user 1
2025-10-10 08:21:52,198 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-10 08:21:52,203 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-10 08:21:52,251 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-10 08:21:52,327 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 20, 'total': 100, 'status': 'Creating company information'}
2025-10-10 08:21:52,438 | INFO | app.utils.event_utils | Published event.agent.progress event for agent iw262 for user 1
2025-10-10 08:21:52,449 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_iw262
2025-10-10 08:21:52,604 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-10 08:21:52,627 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-10 08:21:52,639 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-10 08:21:52,646 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 30, 'total': 100, 'status': 'Creating agent directory'}
2025-10-10 08:21:52,664 | INFO | app.utils.event_utils | Published event.agent.progress event for agent iw262 for user 1
2025-10-10 08:21:52,812 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-10 08:21:52,823 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-10 08:21:52,921 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-10 08:21:52,931 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 40, 'total': 100, 'status': 'Initializing Customer Service Agent'}
2025-10-10 08:21:52,952 | INFO | app.utils.event_utils | Published event.agent.progress event for agent iw262 for user 1
2025-10-10 08:21:52,974 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-10 08:21:52,988 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-10 08:21:53,030 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-10 08:21:53,015 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_iw262\Kerangka Makalah.pdf (type: pdf)
2025-10-10 08:21:53,111 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 60, 'total': 100, 'status': 'Processing uploaded files'}
2025-10-10 08:21:53,212 | INFO | app.tasks.test_task | Processing pdf file for RAG: Kerangka Makalah.pdf
2025-10-10 08:22:14,026 | INFO | app.AI.document_store.RAG | Successfully loaded document: Kerangka Makalah.pdf
2025-10-10 08:22:22,028 | INFO | app.AI.document_store.RAG | Successfully added document 'Kerangka Makalah.pdf' with ID '39'
2025-10-10 08:22:22,052 | INFO | app.utils.agent_utils | Added document Kerangka Makalah.pdf to agent iw262
2025-10-10 08:22:22,306 | INFO | app.utils.event_utils | Published event.agent.progress event for agent iw262 for user 1
2025-10-10 08:22:22,358 | INFO | app.utils.event_utils | Published event.agent.success event for agent iw262 for user 1
2025-10-10 08:22:22,360 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-10 08:22:22,371 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-10 08:22:22,372 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-10 08:22:22,391 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 65, 'total': 100, 'status': 'Committing transaction'}
2025-10-10 08:22:22,474 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-10 08:22:22,475 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-10 08:22:22,418 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-10 08:22:22,592 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 70, 'total': 100, 'status': 'Customer Service Agent creation completed', 'agent_id': 'iw262'}
2025-10-10 08:23:21,888 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-10 08:23:22,082 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-10 08:23:23,028 | INFO | main | Redis event bus stopped
2025-10-10 08:24:13,802 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-10 08:24:13,815 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-10 08:24:13,873 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-10 08:24:13,909 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-10 08:24:46,220 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-10 08:24:46,224 | INFO | main | Redis event bus started
2025-10-10 08:24:53,237 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-10 08:24:53,238 | INFO | app.websocket.ws_route | WebSocket connected for agent progress - User: 1
2025-10-10 08:25:15,695 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_tb277
2025-10-10 08:25:16,560 | INFO | app.utils.file_utils | Created database documents/user_1/agent_tb277\products.db from products.csv
2025-10-10 08:25:16,759 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-10 08:25:18,857 | INFO | app.dependencies.redis_storage | Agent tb277 stored in Redis
2025-10-10 08:25:43,122 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-10 08:25:43,127 | INFO | app.tasks.test_task | Creating Customer Service Agent for user 1
2025-10-10 08:25:43,170 | INFO | app.utils.event_utils | Published event.agent.progress event for agent tb277 for user 1
2025-10-10 08:25:43,203 | INFO | app.tasks.test_task | Agent data: id='tb277' name='Customer Support Bot' avatar=None model='gpt-4o' description=None base_prompt='You are a helpful customer service agent' tone='friendly' short_term_memory=False long_term_memory=False status='active' company_name='PT. lord suroso' industry='Teknologi AI' company_description='tidak ada' address='jln.kwitang no 4, Jakarta Pusat' email='suroso@gmail.com' website=None fallback_email='siti@gmail.com'
2025-10-10 08:25:43,563 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-10 08:25:43,528 | INFO | app.tasks.test_task | New agent: <Agent name=Customer Support Bot user_id=1>
2025-10-10 08:25:43,531 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-10 08:25:43,599 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-10 08:25:43,969 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 10, 'total': 100, 'status': 'Initialize Customer Service Agent'}
2025-10-10 08:25:44,083 | INFO | app.utils.event_utils | Published event.agent.progress event for agent tb277 for user 1
2025-10-10 08:25:44,158 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-10 08:25:44,141 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-10 08:25:44,204 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-10 08:25:44,274 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 20, 'total': 100, 'status': 'Creating company information'}
2025-10-10 08:25:44,291 | INFO | app.utils.event_utils | Published event.agent.progress event for agent tb277 for user 1
2025-10-10 08:25:44,357 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-10 08:25:44,350 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_tb277
2025-10-10 08:25:44,357 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-10 08:25:44,386 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-10 08:25:44,415 | INFO | app.utils.event_utils | Published event.agent.progress event for agent tb277 for user 1
2025-10-10 08:25:44,440 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 30, 'total': 100, 'status': 'Creating agent directory'}
2025-10-10 08:25:44,451 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-10 08:25:44,534 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-10 08:25:44,639 | INFO | app.utils.event_utils | Published event.agent.progress event for agent tb277 for user 1
2025-10-10 08:25:44,651 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-10 08:25:44,774 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_tb277\Kerangka Makalah.pdf (type: pdf)
2025-10-10 08:25:44,769 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-10 08:25:44,723 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 40, 'total': 100, 'status': 'Initializing Customer Service Agent'}
2025-10-10 08:25:44,851 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-10 08:25:44,852 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-10 08:25:44,815 | INFO | app.tasks.test_task | Processing pdf file for RAG: Kerangka Makalah.pdf
2025-10-10 08:25:44,871 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 60, 'total': 100, 'status': 'Processing uploaded files'}
2025-10-10 08:26:03,606 | INFO | app.AI.document_store.RAG | Successfully loaded document: Kerangka Makalah.pdf
2025-10-10 08:26:10,119 | INFO | app.AI.document_store.RAG | Successfully added document 'Kerangka Makalah.pdf' with ID '40'
2025-10-10 08:26:10,181 | INFO | app.utils.agent_utils | Added document Kerangka Makalah.pdf to agent tb277
2025-10-10 08:26:11,491 | INFO | app.utils.event_utils | Published event.agent.progress event for agent tb277 for user 1
2025-10-10 08:26:11,612 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-10 08:26:11,675 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-10 08:26:11,801 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 70, 'total': 100, 'status': 'Committing transaction'}
2025-10-10 08:26:11,797 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-10 08:26:12,161 | INFO | app.utils.event_utils | Published event.agent.success event for agent tb277 for user 1
2025-10-10 08:26:12,303 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-10 08:26:12,304 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-10 08:26:12,305 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'current': 80, 'total': 100, 'status': 'Customer Service Agent creation completed', 'agent_id': 'tb277'}
2025-10-10 08:26:12,307 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-10 08:26:12,606 | INFO | app.websocket.ws_route | Integration is being added: <agent_id=tb277 platform=api>
2025-10-10 08:26:12,749 | INFO | app.utils.agent_utils | Generated API key for user 1, agent tb277
2025-10-10 08:26:12,848 | INFO | app.websocket.ws_route | Integration added successfully: <agent_id=tb277 platform=api>
2025-10-10 08:28:02,965 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-10 08:28:03,321 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-10 08:28:05,117 | INFO | main | Redis event bus stopped
2025-10-10 08:28:53,909 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-10 08:28:53,985 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-10 08:28:53,994 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-10 08:28:53,995 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-10 08:29:48,149 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-10 08:29:48,166 | INFO | main | Redis event bus started
2025-10-10 08:31:22,475 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-10 08:31:22,599 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-10 08:31:25,454 | INFO | app.dependencies.redis_storage | Agent tb277 retrieved from Redis
2025-10-10 08:32:00,271 | ERROR | app.utils.agent_utils | Error in agent logic: can only concatenate str (not "WebSocket") to str
2025-10-10 08:32:00,359 | ERROR | app.websocket.ws_route | Error in agent invoke: can only concatenate str (not "WebSocket") to str
2025-10-10 08:36:02,433 | ERROR | app.websocket.ws_route | Error in agent invoke: (1012, None)
2025-10-10 08:36:04,382 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-10 08:36:04,684 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-10 08:36:05,103 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-10 08:36:07,479 | INFO | main | Redis event bus stopped
2025-10-10 08:37:17,456 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-10 08:37:17,470 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-10 08:37:17,547 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-10 08:37:17,641 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-10 08:38:36,111 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-10 08:38:36,370 | INFO | main | Redis event bus started
2025-10-10 08:38:36,556 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-10 08:38:36,593 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-10 08:38:52,175 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-10 08:38:52,286 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-10 08:38:52,308 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-10 08:38:52,378 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-10 08:39:00,694 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-10 08:39:00,854 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-10 08:39:04,033 | INFO | app.dependencies.redis_storage | Agent tb277 retrieved from Redis
2025-10-10 08:39:29,256 | ERROR | app.utils.agent_utils | Error in agent logic: cannot access local variable 'response' where it is not associated with a value
2025-10-10 08:39:29,276 | ERROR | app.websocket.ws_route | Error in agent invoke: cannot access local variable 'response' where it is not associated with a value
2025-10-10 08:43:09,027 | ERROR | app.websocket.ws_route | Error in agent invoke: (1012, None)
2025-10-10 08:43:09,061 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-10 08:43:09,598 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-10 08:43:09,946 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-10 08:43:11,691 | INFO | main | Redis event bus stopped
2025-10-10 08:45:04,762 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-10 08:45:04,768 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-10 08:45:04,780 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-10 08:45:04,782 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-10 08:45:44,069 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-10 08:45:44,071 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-10 08:45:44,072 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-10 08:45:44,075 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-10 08:46:15,255 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-10 08:46:15,259 | INFO | main | Redis event bus started
2025-10-10 08:46:30,570 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-10 08:46:30,589 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-10 08:46:34,022 | INFO | app.dependencies.redis_storage | Agent tb277 retrieved from Redis
2025-10-10 08:46:57,832 | INFO | app.AI.customer_service.workflow | Main agent processing user message: Apa product dengan stok paling banyak...
2025-10-10 08:46:57,832 | INFO | app.AI.customer_service.workflow | Main agent processing user message: Apa product dengan stok paling banyak...
2025-10-10 08:47:00,429 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-10 08:47:00,429 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-10 08:47:07,546 | INFO | app.AI.customer_service.workflow | Validation agent processing tool message
2025-10-10 08:47:07,546 | INFO | app.AI.customer_service.workflow | Validation agent processing tool message
2025-10-10 08:47:07,548 | INFO | app.AI.customer_service.workflow | Tool message:  Saya tidak memiliki informasi yang cukup untuk menjawab pertanyaan ini....
2025-10-10 08:47:07,548 | INFO | app.AI.customer_service.workflow | Tool message:  Saya tidak memiliki informasi yang cukup untuk menjawab pertanyaan ini....
2025-10-10 08:47:11,975 | INFO | app.AI.customer_service.workflow | Validation result: can_answer=False, next_step=check_products_database, tokens=826
2025-10-10 08:47:11,975 | INFO | app.AI.customer_service.workflow | Validation result: can_answer=False, next_step=check_products_database, tokens=826
2025-10-10 08:47:15,063 | INFO | app.AI.customer_service.workflow | Generating query for problem: Product dengan stok paling banyak...
2025-10-10 08:47:15,063 | INFO | app.AI.customer_service.workflow | Generating query for problem: Product dengan stok paling banyak...
2025-10-10 08:47:17,508 | INFO | app.AI.customer_service.workflow | Generated query: SELECT product_name, stock FROM products ORDER BY stock DESC LIMIT 1...
2025-10-10 08:47:17,508 | INFO | app.AI.customer_service.workflow | Generated query: SELECT product_name, stock FROM products ORDER BY stock DESC LIMIT 1...
2025-10-10 08:47:17,519 | INFO | app.AI.customer_service.workflow | Target database: products
2025-10-10 08:47:17,519 | INFO | app.AI.customer_service.workflow | Target database: products
2025-10-10 08:47:17,525 | INFO | app.AI.customer_service.workflow | Estimated tokens: 711
2025-10-10 08:47:17,525 | INFO | app.AI.customer_service.workflow | Estimated tokens: 711
2025-10-10 08:47:17,865 | INFO | app.AI.customer_service.workflow | Query executed successfully, returned 1 rows
2025-10-10 08:47:17,865 | INFO | app.AI.customer_service.workflow | Query executed successfully, returned 1 rows
2025-10-10 08:47:18,206 | INFO | app.AI.customer_service.workflow | Generating final answer for user
2025-10-10 08:47:18,206 | INFO | app.AI.customer_service.workflow | Generating final answer for user
2025-10-10 08:47:22,290 | INFO | app.AI.customer_service.workflow | Final answer generated successfully
2025-10-10 08:47:22,290 | INFO | app.AI.customer_service.workflow | Final answer generated successfully
2025-10-10 08:48:13,022 | ERROR | app.websocket.ws_route | Error in agent invoke: (1012, None)
2025-10-10 08:48:13,034 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-10 08:48:13,038 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-10 08:48:13,041 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-10 08:48:13,345 | INFO | main | Redis event bus stopped
2025-10-13 20:01:27,156 | INFO | app.dependencies.redis_storage | Agent iw262 retrieved from Redis
2025-10-13 20:05:59,675 | INFO | app.dependencies.redis_storage | Agent iw262 retrieved from Redis
2025-10-13 20:07:45,941 | INFO | app.dependencies.redis_storage | Agent iw262 retrieved from Redis
2025-10-13 20:07:45,945 | ERROR | app.dependencies.redis_storage | Error while updating agent from redis storage: too many values to unpack (expected 2)
2025-10-13 20:08:51,520 | INFO | app.dependencies.redis_storage | Agent iw262 retrieved from Redis
2025-10-13 20:08:51,541 | INFO | app.dependencies.redis_storage | Agent iw262 stored in Redis
2025-10-13 20:08:51,636 | INFO | app.dependencies.redis_storage | Agent iw262 updated successfully: {'base_prompt': 'HALO BANG SAT'}
2025-10-13 20:09:25,103 | INFO | app.dependencies.redis_storage | Agent iw262 retrieved from Redis
2025-10-13 20:10:26,155 | INFO | app.dependencies.redis_storage | Agent iw262 retrieved from Redis
2025-10-13 20:10:26,160 | INFO | app.dependencies.redis_storage | Agent iw262 stored in Redis
2025-10-13 20:10:26,160 | INFO | app.dependencies.redis_storage | Agent iw262 updated successfully: {'base_prompt': 'HALO BANG SAT', 'llm_model': 'GROKKK'}
2025-10-13 20:10:57,463 | INFO | app.dependencies.redis_storage | Agent iw262 retrieved from Redis
2025-10-13 20:22:40,734 | INFO | app.AI.simple_RAG_agent | Agent updated with: {'base_prompt': 'PRABOWO'}
2025-10-13 20:31:34,881 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-13 20:31:35,124 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-13 20:31:35,132 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-13 20:31:35,149 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-13 20:32:07,222 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-13 20:32:07,224 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-13 20:32:07,225 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-13 20:32:07,226 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-13 20:32:22,352 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-13 20:32:22,357 | INFO | main | Redis event bus started
2025-10-13 20:35:15,469 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-13 20:38:06,223 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_84958
2025-10-13 20:38:09,609 | INFO | app.dependencies.redis_storage | Agent 84958 stored in Redis
2025-10-13 20:38:11,309 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-13 20:38:11,365 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: 84958
2025-10-13 20:38:11,416 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 84958 for user 1
2025-10-13 20:38:11,643 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='84958'
2025-10-13 20:38:12,673 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-13 20:38:18,826 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-13 20:38:21,073 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 84958 for user 1
2025-10-13 20:38:21,076 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_84958
2025-10-13 20:38:21,088 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-13 20:38:21,103 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 84958 for user 1
2025-10-13 20:38:21,107 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_84958\FAQ.pdf (type: pdf)
2025-10-13 20:38:21,213 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-13 20:38:21,263 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-13 20:38:21,270 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-13 20:38:21,318 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-13 20:38:21,323 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-13 20:38:21,341 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-13 20:38:21,346 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-13 20:38:33,992 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-13 20:38:39,873 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '41'
2025-10-13 20:38:39,942 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent 84958
2025-10-13 20:38:40,066 | INFO | app.utils.event_utils | Published event.agent.success event for agent 84958 for user 1
2025-10-13 20:38:40,075 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-13 20:38:40,076 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-13 20:38:40,090 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-13 20:40:05,828 | INFO | main | Redis event bus stopped
2025-10-13 20:40:28,593 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-13 20:40:28,602 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-13 20:40:28,619 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-13 20:40:28,646 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-13 20:40:51,408 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-13 20:40:51,410 | INFO | main | Redis event bus started
2025-10-13 20:41:36,930 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_gL702
2025-10-13 20:41:37,551 | INFO | app.dependencies.redis_storage | Agent gL702 stored in Redis
2025-10-13 20:41:38,227 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-13 20:41:38,425 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: gL702
2025-10-13 20:41:38,649 | INFO | app.utils.event_utils | Published event.agent.progress event for agent gL702 for user 1
2025-10-13 20:41:38,852 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='gL702'
2025-10-13 20:41:38,879 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-13 20:41:38,883 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-13 20:41:38,901 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-13 20:41:38,961 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-13 20:41:39,002 | INFO | app.utils.event_utils | Published event.agent.progress event for agent gL702 for user 1
2025-10-13 20:41:39,017 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-13 20:41:39,017 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_gL702
2025-10-13 20:41:39,031 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-13 20:41:39,051 | INFO | app.utils.event_utils | Published event.agent.progress event for agent gL702 for user 1
2025-10-13 20:41:39,072 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-13 20:41:39,054 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-13 20:41:39,083 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_gL702\FAQ.pdf (type: pdf)
2025-10-13 20:41:39,096 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-13 20:41:39,096 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-13 20:41:43,884 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-13 20:41:47,064 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '42'
2025-10-13 20:41:47,134 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent gL702
2025-10-13 20:41:47,337 | INFO | app.utils.event_utils | Published event.agent.success event for agent gL702 for user 1
2025-10-13 20:41:47,439 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-13 20:41:47,423 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-13 20:41:47,462 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-13 20:42:45,855 | INFO | app.dependencies.redis_storage | Agent gL702 retrieved from Redis
2025-10-13 20:42:45,869 | INFO | app.dependencies.redis_storage | Agent gL702 retrieved from Redis
2025-10-13 20:42:45,907 | INFO | app.dependencies.redis_storage | Agent gL702 stored in Redis
2025-10-13 20:42:45,952 | INFO | app.dependencies.redis_storage | Agent gL702 updated successfully: {'status': 'non-active'}
2025-10-13 20:42:45,972 | INFO | app.dependencies.redis_storage | Agent gL702 retrieved from Redis
2025-10-13 20:42:45,984 | INFO | app.controllers.simple_rag_controller | Simple RAG Agent 'ketiga' (ID: gL702) updated successfully by user khaerul@gmail.com
2025-10-13 20:43:46,806 | INFO | app.dependencies.redis_storage | Agent gL702 retrieved from Redis
2025-10-13 20:43:46,820 | INFO | app.dependencies.redis_storage | Agent gL702 retrieved from Redis
2025-10-13 20:43:46,858 | INFO | app.dependencies.redis_storage | Agent gL702 stored in Redis
2025-10-13 20:43:46,869 | INFO | app.dependencies.redis_storage | Agent gL702 updated successfully: {'base_prompt': 'JOKOWI'}
2025-10-13 20:43:46,872 | INFO | app.dependencies.redis_storage | Agent gL702 retrieved from Redis
2025-10-13 20:43:46,888 | INFO | app.controllers.simple_rag_controller | Simple RAG Agent 'ketiga' (ID: gL702) updated successfully by user khaerul@gmail.com
2025-10-13 20:44:38,715 | INFO | main | Redis event bus stopped
2025-10-14 16:36:56,495 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-14 16:36:56,499 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-14 16:36:56,499 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-14 16:36:56,500 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-14 16:37:28,980 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-14 16:37:28,982 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-14 16:37:28,983 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-14 16:37:28,985 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-14 16:38:48,783 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-14 16:38:48,804 | INFO | main | Redis event bus started
2025-10-14 16:39:28,164 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-14 16:39:46,396 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Yv311
2025-10-14 16:39:49,794 | INFO | app.dependencies.redis_storage | Agent Yv311 stored in Redis
2025-10-14 16:39:50,402 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-14 16:39:50,437 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: Yv311
2025-10-14 16:39:50,457 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Yv311 for user 1
2025-10-14 16:39:51,095 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='Yv311'
2025-10-14 16:39:51,502 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-14 16:39:51,506 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-14 16:39:51,537 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-14 16:39:52,379 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-14 16:39:52,451 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Yv311 for user 1
2025-10-14 16:39:52,511 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Yv311
2025-10-14 16:39:52,525 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-14 16:39:52,524 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-14 16:39:52,537 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-14 16:39:52,530 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Yv311 for user 1
2025-10-14 16:39:52,557 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-14 16:39:52,558 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_Yv311\FAQ.pdf (type: pdf)
2025-10-14 16:39:52,569 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-14 16:39:52,583 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-14 16:40:04,760 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-14 16:40:49,768 | WARNING | app.utils.error_utils | Agent not found: agent_id Yv311 for user khaerul@gmail.com
2025-10-14 16:41:24,009 | WARNING | app.utils.error_utils | Agent not found: agent_id Yv311 for user khaerul@gmail.com
2025-10-14 16:43:25,322 | ERROR | app.AI.document_store.RAG | Failed to add document 'FAQ.pdf': 500: Internal server error, please try again
2025-10-14 16:43:25,443 | INFO | app.utils.file_utils | Rollback: Removed file documents/user_1/agent_Yv311\FAQ.pdf
2025-10-14 16:43:25,664 | ERROR | app.tasks.test_task | Error creating Simple RAG Agent: 500: Internal server error, please try again
2025-10-14 16:43:25,765 | INFO | app.utils.event_utils | Published event.agent.failure event for agent Yv311 for user 1
2025-10-14 16:43:25,913 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.failure.user:1
2025-10-14 16:43:25,922 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-14 16:43:25,933 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_FAILURE
2025-10-14 16:44:30,437 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_xG371
2025-10-14 16:44:30,660 | INFO | app.dependencies.redis_storage | Agent xG371 stored in Redis
2025-10-14 16:44:32,019 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-14 16:44:32,167 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: xG371
2025-10-14 16:44:32,174 | INFO | app.utils.event_utils | Published event.agent.progress event for agent xG371 for user 1
2025-10-14 16:44:32,261 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='xG371'
2025-10-14 16:44:32,412 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-14 16:44:32,518 | INFO | app.utils.event_utils | Published event.agent.progress event for agent xG371 for user 1
2025-10-14 16:44:32,630 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-14 16:44:32,563 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_xG371
2025-10-14 16:44:32,708 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-14 16:44:32,718 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-14 16:44:32,770 | INFO | app.utils.event_utils | Published event.agent.progress event for agent xG371 for user 1
2025-10-14 16:44:32,781 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_xG371\FAQ.pdf (type: pdf)
2025-10-14 16:44:32,893 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-14 16:44:32,909 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-14 16:44:32,995 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-14 16:44:33,092 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-14 16:44:33,093 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-14 16:44:32,954 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-14 16:44:39,064 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-14 16:45:41,723 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '44'
2025-10-14 16:45:41,725 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent xG371
2025-10-14 16:45:41,771 | INFO | app.utils.event_utils | Published event.agent.success event for agent xG371 for user 1
2025-10-14 16:45:41,786 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-14 16:45:41,786 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-14 16:45:41,787 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-14 16:45:59,547 | INFO | app.dependencies.redis_storage | Agent xG371 retrieved from Redis
2025-10-14 16:45:59,603 | INFO | app.dependencies.redis_storage | Agent xG371 retrieved from Redis
2025-10-14 16:45:59,637 | INFO | app.dependencies.redis_storage | Agent xG371 stored in Redis
2025-10-14 16:45:59,700 | INFO | app.dependencies.redis_storage | Agent xG371 updated successfully: {'base_prompt': 'Kamu adalah asisten pribadi disebuah perusahaan'}
2025-10-14 16:45:59,733 | INFO | app.dependencies.redis_storage | Agent xG371 retrieved from Redis
2025-10-14 16:45:59,736 | INFO | app.controllers.simple_rag_controller | Simple RAG Agent 'ketiga' (ID: xG371) updated successfully by user khaerul@gmail.com
2025-10-14 16:47:34,630 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-14 16:47:34,635 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-14 16:47:37,488 | INFO | app.dependencies.redis_storage | Agent xG371 retrieved from Redis
2025-10-14 16:49:09,724 | INFO | app.dependencies.redis_storage | Agent xG371 retrieved from Redis
2025-10-14 16:49:09,735 | INFO | app.dependencies.redis_storage | Agent xG371 retrieved from Redis
2025-10-14 16:49:09,755 | INFO | app.dependencies.redis_storage | Agent xG371 stored in Redis
2025-10-14 16:49:09,756 | INFO | app.dependencies.redis_storage | Agent xG371 updated successfully: {'base_prompt': 'Kamu adalah asisten pribadi disebuah perusahaan XYZ'}
2025-10-14 16:49:09,764 | INFO | app.AI.simple_RAG_agent | Agent updated with: {'base_prompt': 'Kamu adalah asisten pribadi disebuah perusahaan XYZ'}
2025-10-14 16:49:09,768 | INFO | app.dependencies.redis_storage | Agent xG371 retrieved from Redis
2025-10-14 16:49:09,773 | INFO | app.controllers.simple_rag_controller | Simple RAG Agent 'ketiga' (ID: xG371) updated successfully by user khaerul@gmail.com
2025-10-14 16:49:16,008 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-14 16:49:16,012 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-14 16:49:16,015 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-14 16:49:16,019 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-14 16:49:27,671 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-14 16:49:27,681 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-14 16:50:16,606 | ERROR | app.websocket.ws_route | Error in agent invoke: (1012, None)
2025-10-14 16:50:16,610 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-14 16:50:16,614 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-14 16:50:16,620 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-14 16:50:16,774 | INFO | main | Redis event bus stopped
2025-10-14 20:28:00,612 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-14 20:28:00,616 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-14 20:28:00,616 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-14 20:28:00,617 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-14 20:28:22,621 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-14 20:28:22,622 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-14 20:28:22,623 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-14 20:28:22,624 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-14 20:28:39,012 | ERROR | main | Error starting Redis event bus: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-10-14 20:31:07,380 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-14 20:31:07,382 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-14 20:31:07,384 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-14 20:31:07,386 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-14 20:31:24,613 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-14 20:31:24,622 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-14 20:31:24,625 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-14 20:31:24,702 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-14 20:31:40,177 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-14 20:31:40,180 | INFO | main | Redis event bus started
2025-10-14 20:34:07,303 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-14 20:35:17,169 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_fY103
2025-10-14 20:35:17,990 | INFO | app.utils.file_utils | Created database documents/user_1/agent_fY103\products.db from products.csv
2025-10-14 20:35:18,051 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-14 20:35:18,247 | INFO | app.dependencies.redis_storage | Agent fY103 stored in Redis
2025-10-14 20:35:21,456 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-14 20:35:21,489 | INFO | app.tasks.test_task | Creating Customer Service Agent for user 1
2025-10-14 20:35:21,502 | INFO | app.utils.event_utils | Published event.agent.progress event for agent fY103 for user 1
2025-10-14 20:35:21,535 | INFO | app.tasks.test_task | Agent data: id='fY103' name='Customer Support Bot' avatar=None model='gpt-4o' description=None base_prompt='You are a helpful customer service agent' tone='friendly' short_term_memory=False long_term_memory=False status='active' company_name='PT. lord suroso' industry='Teknologi AI' company_description='tidak ada' address='jln.kwitang no 4, Jakarta Pusat' email='suroso@gmail.com' website=None fallback_email='siti@gmail.com'
2025-10-14 20:35:22,276 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-14 20:35:22,320 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-14 20:35:22,201 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-14 20:35:22,564 | INFO | app.tasks.test_task | New agent: <Agent name=Customer Support Bot user_id=1>
2025-10-14 20:35:22,579 | INFO | app.utils.event_utils | Published event.agent.progress event for agent fY103 for user 1
2025-10-14 20:35:22,609 | INFO | app.events.redis_event | Sending the message to handler function
.agent.progress.user:1
2025-10-14 20:35:22,621 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-14 20:35:22,863 | INFO | app.utils.event_utils | Published event.agent.progress event for agent fY103 for user 1
2025-10-14 20:35:22,869 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_fY103
2025-10-14 20:35:22,874 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-14 20:35:22,903 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-14 20:35:22,877 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-14 20:35:22,931 | INFO | app.utils.event_utils | Published event.agent.progress event for agent fY103 for user 1
2025-10-14 20:35:23,160 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-14 20:35:23,168 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-14 20:35:23,163 | INFO | app.utils.event_utils | Published event.agent.progress event for agent fY103 for user 1
2025-10-14 20:35:23,160 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-14 20:35:23,226 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_fY103\Kerangka Makalah.pdf (type: pdf)
2025-10-14 20:35:23,313 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-14 20:35:23,324 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-14 20:35:23,328 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-14 20:35:23,359 | INFO | app.tasks.test_task | Processing pdf file for RAG: Kerangka Makalah.pdf
2025-10-14 20:35:40,711 | INFO | app.AI.document_store.RAG | Successfully loaded document: Kerangka Makalah.pdf
2025-10-14 20:35:43,940 | INFO | app.AI.document_store.RAG | Successfully added document 'Kerangka Makalah.pdf' with ID '45'
2025-10-14 20:35:44,298 | INFO | app.utils.agent_utils | Added document Kerangka Makalah.pdf to agent fY103
2025-10-14 20:35:44,348 | INFO | app.utils.event_utils | Published event.agent.progress event for agent fY103 for user 1
2025-10-14 20:35:44,552 | INFO | app.utils.event_utils | Published event.agent.success event for agent fY103 for user 1
2025-10-14 20:35:44,551 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-14 20:35:44,577 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-14 20:35:44,584 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-14 20:35:45,073 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-14 20:35:45,082 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-14 20:35:45,100 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-14 20:37:13,766 | INFO | app.controllers.customer_service_controller | Agent fY103 not found in memory, skipping agent object update
2025-10-14 20:37:13,862 | INFO | app.dependencies.redis_storage | Agent fY103 retrieved from Redis
2025-10-14 20:37:13,878 | INFO | app.dependencies.redis_storage | Agent fY103 stored in Redis
2025-10-14 20:37:13,881 | INFO | app.dependencies.redis_storage | Agent fY103 updated successfully: {'industry': 'PT.kontol'}
2025-10-14 20:37:13,883 | INFO | app.controllers.customer_service_controller | Updated agent fY103 in Redis storage
2025-10-14 20:37:13,896 | INFO | app.controllers.customer_service_controller | Customer Service Agent 'Customer Support Bot' (ID: fY103) updated successfully by user khaerul@gmail.com
2025-10-14 20:37:13,900 | ERROR | app.controllers.customer_service_controller | Unexpected error while updating Customer Service Agent: 'fY103'
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\customer_service_controller.py", line 375, in update_customer_service_agent
    print(f"agents: {agents[agent_id_str].company_information}")
                     ~~~~~~^^^^^^^^^^^^^^
KeyError: 'fY103'
2025-10-14 20:37:13,916 | ERROR | app.utils.error_utils | Unexpected error during updating Customer Service Agent: 'fY103'
2025-10-14 20:38:35,693 | INFO | main | Redis event bus stopped
2025-10-14 20:39:05,448 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-14 20:39:05,449 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-14 20:39:05,450 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-14 20:39:05,451 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 19:07:55,177 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 19:07:55,180 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 19:07:55,181 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 19:07:55,183 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 19:09:15,881 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 19:09:15,889 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 19:09:15,896 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 19:09:15,898 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 19:09:49,381 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-16 19:09:49,385 | INFO | main | Redis event bus started
2025-10-16 19:11:47,025 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-16 19:12:25,177 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Wf110
2025-10-16 19:12:38,227 | INFO | app.dependencies.redis_storage | Agent Wf110 stored in Redis
2025-10-16 19:12:39,883 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-16 19:12:39,899 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: Wf110
2025-10-16 19:12:39,914 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Wf110 for user 1
2025-10-16 19:12:39,951 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=False long_term_memory=False status='active' id='Wf110'
2025-10-16 19:12:40,422 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-16 19:12:40,434 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-16 19:12:40,410 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-16 19:12:40,512 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-16 19:12:40,529 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Wf110 for user 1
2025-10-16 19:12:40,535 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-16 19:12:40,535 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_Wf110
2025-10-16 19:12:40,553 | INFO | app.utils.event_utils | Published event.agent.progress event for agent Wf110 for user 1
2025-10-16 19:12:40,561 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-16 19:12:40,552 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-16 19:12:40,595 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_Wf110\FAQ.pdf (type: pdf)
2025-10-16 19:12:40,755 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-16 19:12:40,778 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-16 19:12:40,781 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-16 19:12:55,576 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-16 19:12:59,046 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '46'
2025-10-16 19:12:59,059 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent Wf110
2025-10-16 19:12:59,215 | INFO | app.utils.event_utils | Published event.agent.success event for agent Wf110 for user 1
2025-10-16 19:12:59,253 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-16 19:12:59,265 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-16 19:12:59,279 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-16 19:14:28,877 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 19:14:28,895 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 19:14:31,741 | INFO | app.dependencies.redis_storage | Agent Wf110 retrieved from Redis
2025-10-16 19:15:09,049 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-16 19:15:09,071 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 19:15:09,075 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 19:15:09,076 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 19:15:22,189 | INFO | main | Redis event bus stopped
2025-10-16 19:21:06,649 | ERROR | app.dependencies.redis_storage | Error saat mengambil daftar checkpoint: startswith first arg must be bytes or a tuple of bytes, not str
2025-10-16 19:24:15,393 | ERROR | app.dependencies.redis_storage | Error saat mengambil daftar checkpoint: startswith first arg must be bytes or a tuple of bytes, not str
2025-10-16 19:25:09,058 | INFO | app.dependencies.redis_storage | Ditemukan 3 checkpoint di Redis.
2025-10-16 19:26:28,487 | INFO | app.dependencies.redis_storage | Checkpoint found for Wf110: checkpoint:Wf110:__empty__:1f0aa89b-3595-632a-8001-a599b3f33075
2025-10-16 19:27:38,423 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 19:27:38,425 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 19:27:38,426 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 19:27:38,428 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 19:28:08,116 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 19:28:08,118 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 19:28:08,118 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 19:28:08,119 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 19:28:22,371 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-16 19:28:22,373 | INFO | main | Redis event bus started
2025-10-16 19:29:04,546 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 19:29:04,547 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 19:29:08,663 | INFO | app.dependencies.redis_storage | Agent Wf110 retrieved from Redis
2025-10-16 19:29:58,642 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-16 19:29:58,662 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 19:29:58,674 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 19:29:58,680 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 19:30:00,420 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 19:30:00,421 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 19:30:26,897 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-16 19:30:26,902 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 19:30:26,918 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 19:30:26,919 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 19:30:29,019 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 19:30:29,021 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 19:31:05,757 | ERROR | app.websocket.ws_route | Error in agent invoke: (1012, None)
2025-10-16 19:31:05,812 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 19:31:05,816 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 19:31:05,865 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 19:31:05,882 | INFO | main | Redis event bus stopped
2025-10-16 19:31:31,534 | INFO | app.dependencies.redis_storage | Checkpoint found for Wf110: checkpoint:Wf110:__empty__:1f0aa89b-3595-632a-8001-a599b3f33075
2025-10-16 19:33:16,474 | INFO | app.dependencies.redis_storage | Checkpoint found for Wf110: checkpoint:Wf110:__empty__:1f0aa89b-3595-632a-8001-a599b3f33075
2025-10-16 19:33:45,467 | INFO | app.dependencies.redis_storage | Ditemukan 12 checkpoint di Redis.
2025-10-16 19:35:22,741 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 19:35:22,747 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 19:35:22,748 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 19:35:22,749 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 19:35:44,095 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 19:35:44,096 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 19:35:44,097 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 19:35:44,098 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 19:35:58,604 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-16 19:35:58,612 | INFO | main | Redis event bus started
2025-10-16 19:36:11,976 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 19:36:11,987 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 19:36:15,074 | INFO | app.dependencies.redis_storage | Agent Wf110 retrieved from Redis
2025-10-16 19:37:55,780 | ERROR | app.websocket.ws_route | Error in agent invoke: (1012, None)
2025-10-16 19:37:56,394 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 19:37:56,407 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 19:37:56,426 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 19:37:56,678 | INFO | main | Redis event bus stopped
2025-10-16 19:38:04,951 | INFO | app.dependencies.redis_storage | Deleted 45 checkpoint keys for thread_id=Wf110
2025-10-16 19:38:10,692 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 19:38:10,693 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 19:38:10,694 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 19:38:10,695 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 19:38:29,213 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-16 19:38:29,216 | INFO | main | Redis event bus started
2025-10-16 19:39:13,987 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 19:39:13,989 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 19:39:17,093 | INFO | app.dependencies.redis_storage | Agent Wf110 retrieved from Redis
2025-10-16 19:39:50,466 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-16 19:39:50,480 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 19:39:50,482 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 19:39:50,484 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 19:40:28,342 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 19:40:28,343 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 19:40:49,158 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-16 19:40:49,180 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 19:40:49,182 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 19:40:49,186 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 19:40:59,469 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 19:40:59,485 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 19:43:00,163 | ERROR | app.websocket.ws_route | Error in agent invoke: (1012, None)
2025-10-16 19:43:00,174 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 19:43:00,196 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 19:43:00,204 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 19:43:00,511 | INFO | main | Redis event bus stopped
2025-10-16 19:43:14,138 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 19:43:14,139 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 19:43:14,140 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 19:43:14,141 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 19:43:34,321 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-16 19:43:34,377 | INFO | main | Redis event bus started
2025-10-16 19:43:41,705 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 19:43:41,706 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 19:43:44,991 | INFO | app.dependencies.redis_storage | Agent Wf110 retrieved from Redis
2025-10-16 19:45:46,322 | ERROR | app.websocket.ws_route | Error in agent invoke: (1012, None)
2025-10-16 19:45:46,427 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 19:45:46,504 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 19:45:46,652 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 19:47:39,299 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 19:47:39,301 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 19:47:39,302 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 19:47:39,302 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 19:47:58,985 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 19:47:58,986 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 19:47:58,987 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 19:47:58,988 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 19:48:13,201 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-16 19:48:13,212 | INFO | main | Redis event bus started
2025-10-16 19:51:47,364 | INFO | main | Redis event bus stopped
2025-10-16 19:52:06,809 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 19:52:06,811 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 19:52:06,812 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 19:52:06,813 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 19:52:41,188 | INFO | app.dependencies.redis_storage | Agent Wf110 retrieved from Redis
2025-10-16 19:53:13,517 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 19:53:13,519 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 19:53:13,520 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 19:53:13,520 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 19:53:34,124 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 19:53:34,131 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 19:53:34,153 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 19:53:34,189 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 19:53:48,415 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-16 19:53:48,420 | INFO | main | Redis event bus started
2025-10-16 19:55:02,419 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_K3726
2025-10-16 19:55:15,997 | INFO | app.dependencies.redis_storage | Agent K3726 stored in Redis
2025-10-16 19:56:00,756 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-16 19:56:00,757 | INFO | app.tasks.test_task | Creating Simple RAG Agent for user 1: K3726
2025-10-16 19:56:00,764 | INFO | app.utils.event_utils | Published event.agent.progress event for agent K3726 for user 1
2025-10-16 19:56:00,765 | INFO | app.tasks.test_task | Agent data: name='ketiga' avatar=None model='gpt-3.5-turbo' description=None base_prompt='pp' tone='friendly' short_term_memory=True long_term_memory=False status='active' id='K3726'
2025-10-16 19:56:00,888 | INFO | app.tasks.test_task | New agent: <Agent name=ketiga user_id=1>
2025-10-16 19:56:00,890 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-16 19:56:00,894 | INFO | app.utils.event_utils | Published event.agent.progress event for agent K3726 for user 1
2025-10-16 19:56:00,905 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-16 19:56:00,929 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-16 19:56:00,929 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_K3726
t type EventType.AGENT_CREATION_PROGRESS
2025-10-16 19:56:00,946 | INFO | app.utils.event_utils | Published event.agent.progress event for agent K3726 for user 1
2025-10-16 19:56:00,950 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_K3726\FAQ.pdf (type: pdf)
2025-10-16 19:56:00,953 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-16 19:56:00,968 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-16 19:56:00,995 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-16 19:56:01,024 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-16 19:56:01,028 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-16 19:56:06,900 | INFO | app.AI.document_store.RAG | Successfully loaded document: FAQ.pdf
2025-10-16 19:56:11,300 | INFO | app.AI.document_store.RAG | Successfully added document 'FAQ.pdf' with ID '47'
2025-10-16 19:56:11,307 | INFO | app.utils.agent_utils | Added document FAQ.pdf to agent K3726
2025-10-16 19:56:11,331 | INFO | app.utils.event_utils | Published event.agent.success event for agent K3726 for user 1
2025-10-16 19:56:11,394 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-16 19:56:11,409 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-16 19:56:11,371 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-16 19:56:50,030 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 19:56:50,043 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 19:56:53,079 | INFO | app.dependencies.redis_storage | Agent K3726 retrieved from Redis
2025-10-16 19:57:55,168 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-16 19:57:55,169 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 19:57:55,171 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 19:57:55,172 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 19:57:56,377 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 19:57:56,378 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 19:58:27,087 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-16 19:58:27,093 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 19:58:27,097 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 19:58:27,106 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 19:58:37,995 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 19:58:37,996 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 19:59:13,994 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-16 19:59:14,001 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 19:59:14,013 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 19:59:14,016 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 19:59:15,338 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 19:59:15,339 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 20:00:45,430 | ERROR | app.websocket.ws_route | Error in agent invoke: (1012, None)
2025-10-16 20:00:45,510 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 20:00:45,532 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 20:00:45,683 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 20:00:46,759 | INFO | main | Redis event bus stopped
2025-10-16 20:01:17,765 | INFO | app.dependencies.redis_storage | Deleted 52 checkpoint keys for thread_id=K3726
2025-10-16 20:01:19,849 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 20:01:19,850 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 20:01:19,851 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 20:01:19,851 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 20:01:40,170 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-16 20:01:40,174 | INFO | main | Redis event bus started
2025-10-16 20:02:07,060 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 20:02:07,062 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 20:02:10,198 | INFO | app.dependencies.redis_storage | Agent K3726 retrieved from Redis
2025-10-16 20:02:37,198 | ERROR | app.websocket.ws_route | Error in agent invoke: (1012, None)
2025-10-16 20:02:37,200 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 20:02:37,202 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 20:02:37,203 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 20:02:37,317 | INFO | main | Redis event bus stopped
2025-10-16 20:08:05,668 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 20:08:05,671 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 20:08:05,672 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 20:08:05,673 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 20:09:28,063 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 20:09:28,104 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 20:09:28,210 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 20:09:28,220 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 20:10:28,763 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-16 20:10:28,786 | INFO | main | Redis event bus started
2025-10-16 20:11:04,352 | INFO | main | Redis event bus stopped
2025-10-16 20:11:51,720 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 20:11:51,726 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 20:11:51,741 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 20:11:51,757 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 20:12:19,723 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 20:12:19,728 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 20:12:19,730 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 20:12:19,752 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 20:12:36,098 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-16 20:12:36,101 | INFO | main | Redis event bus started
2025-10-16 20:13:46,667 | WARNING | app.dependencies.auth | Access attempt without token
2025-10-16 20:14:02,709 | INFO | app.controllers.auth_controller | User khaerul@gmail.com login is successfully.
2025-10-16 20:14:10,790 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_GR753
2025-10-16 20:14:15,178 | INFO | app.utils.file_utils | Created database documents/user_1/agent_GR753\products.db from products.csv
2025-10-16 20:14:15,602 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-16 20:14:16,147 | ERROR | app.controllers.customer_service_controller | Unexpected error while starting Customer Service Agent creation: 'CreateCustomerServiceAgent' object is not subscriptable
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\customer_service_controller.py", line 78, in create_customer_service_agent
    print(f"MEMORY: {bool(agent_data['short_term_memory'])}")
                          ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
TypeError: 'CreateCustomerServiceAgent' object is not subscriptable
2025-10-16 20:14:16,495 | ERROR | app.utils.error_utils | Unexpected error during starting Customer Service Agent creation: 'CreateCustomerServiceAgent' object is not subscriptable
2025-10-16 20:15:36,726 | INFO | main | Redis event bus stopped
2025-10-16 20:15:55,464 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 20:15:55,465 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 20:15:55,466 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 20:15:55,467 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 20:16:22,266 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-16 20:16:22,268 | INFO | main | Redis event bus started
2025-10-16 20:16:31,692 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_8H287
2025-10-16 20:16:32,384 | INFO | app.utils.file_utils | Created database documents/user_1/agent_8H287\products.db from products.csv
2025-10-16 20:16:32,517 | INFO | app.utils.file_utils | Processed dataset info for products.csv
2025-10-16 20:16:33,215 | INFO | app.dependencies.redis_storage | Agent 8H287 stored in Redis
2025-10-16 20:16:42,895 | INFO | app.tasks.test_task | Task Execution: user_id 1
2025-10-16 20:16:43,644 | INFO | app.tasks.test_task | Creating Customer Service Agent for user 1
2025-10-16 20:16:44,385 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 8H287 for user 1
2025-10-16 20:16:44,658 | INFO | app.tasks.test_task | Agent data: id='8H287' name='Customer Support Bot' avatar=None model='gpt-4o' description=None base_prompt='You are a helpful customer service agent' tone='friendly' short_term_memory=True long_term_memory=False status='active' company_name='PT. lord suroso' industry='Teknologi AI' company_description='tidak ada' address='jln.kwitang no 4, Jakarta Pusat' email='suroso@gmail.com' website=None fallback_email='siti@gmail.com'
2025-10-16 20:16:46,128 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-16 20:16:46,131 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-16 20:16:46,136 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-16 20:16:46,133 | INFO | app.tasks.test_task | New agent: <Agent name=Customer Support Bot user_id=1>
2025-10-16 20:16:46,259 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 8H287 for user 1
2025-10-16 20:16:46,317 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-16 20:16:46,312 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-16 20:16:46,323 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-16 20:16:46,624 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 8H287 for user 1
2025-10-16 20:16:46,633 | INFO | app.utils.file_utils | Created directory: documents/user_1/agent_8H287
2025-10-16 20:16:46,645 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-16 20:16:46,650 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-16 20:16:46,662 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 8H287 for user 1
2025-10-16 20:16:46,680 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-16 20:16:46,690 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 8H287 for user 1
2025-10-16 20:16:46,687 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-16 20:16:46,711 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-16 20:16:46,717 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-16 20:16:46,740 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-16 20:16:46,706 | INFO | app.utils.file_utils | Saved file: documents/user_1/agent_8H287\Kerangka Makalah.pdf (type: pdf)
2025-10-16 20:16:46,788 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-16 20:16:46,810 | INFO | app.tasks.test_task | Processing pdf file for RAG: Kerangka Makalah.pdf
2025-10-16 20:16:46,811 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-16 20:17:01,207 | INFO | app.AI.document_store.RAG | Successfully loaded document: Kerangka Makalah.pdf
2025-10-16 20:17:04,704 | INFO | app.AI.document_store.RAG | Successfully added document 'Kerangka Makalah.pdf' with ID '48'
2025-10-16 20:17:04,714 | INFO | app.utils.agent_utils | Added document Kerangka Makalah.pdf to agent 8H287
2025-10-16 20:17:04,911 | INFO | app.utils.event_utils | Published event.agent.progress event for agent 8H287 for user 1
2025-10-16 20:17:04,953 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-16 20:17:04,952 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.progress.user:1
2025-10-16 20:17:04,954 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_PROGRESS
2025-10-16 20:17:04,987 | INFO | app.utils.event_utils | Published event.agent.success event for agent 8H287 for user 1
2025-10-16 20:17:05,048 | INFO | app.events.redis_event | Sending the message to handler function
2025-10-16 20:17:05,047 | INFO | app.events.redis_event | User with id 1 published to channel event.agent.success.user:1
2025-10-16 20:17:05,234 | INFO | app.events.redis_event | The handler function accepted the message: event type EventType.AGENT_CREATION_SUCCESS
2025-10-16 20:17:54,461 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 20:17:54,468 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 20:17:57,692 | INFO | app.dependencies.redis_storage | Agent 8H287 retrieved from Redis
2025-10-16 20:18:13,295 | INFO | app.AI.customer_service.workflow | Main agent processing user message: Nama saya erul...
2025-10-16 20:18:13,295 | INFO | app.AI.customer_service.workflow | Main agent processing user message: Nama saya erul...
2025-10-16 20:18:15,535 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:18:15,535 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:18:44,771 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-16 20:18:44,776 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 20:18:44,785 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 20:18:44,788 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 20:18:46,104 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 20:18:46,105 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 20:18:50,977 | INFO | app.AI.customer_service.workflow | Main agent processing user message: siapa nama saya...
2025-10-16 20:18:50,977 | INFO | app.AI.customer_service.workflow | Main agent processing user message: siapa nama saya...
2025-10-16 20:18:52,361 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:18:52,361 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:20:37,045 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-16 20:20:37,105 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 20:20:37,112 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 20:20:37,115 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 20:21:13,871 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 20:21:13,879 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 20:21:19,054 | INFO | app.AI.customer_service.workflow | Main agent processing user message: Oke apakah ada alamat email yang dapat saya hubung...
2025-10-16 20:21:19,054 | INFO | app.AI.customer_service.workflow | Main agent processing user message: Oke apakah ada alamat email yang dapat saya hubung...
2025-10-16 20:21:21,248 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:21:21,248 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:21:47,733 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-16 20:21:47,735 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 20:21:47,736 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 20:21:47,738 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 20:21:49,146 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 20:21:49,147 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 20:21:53,162 | INFO | app.AI.customer_service.workflow | Main agent processing user message: Oke apa product paling laris?...
2025-10-16 20:21:53,162 | INFO | app.AI.customer_service.workflow | Main agent processing user message: Oke apa product paling laris?...
2025-10-16 20:21:54,461 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:21:54,461 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:22:00,646 | INFO | app.AI.customer_service.workflow | Validation agent processing tool message
2025-10-16 20:22:00,646 | INFO | app.AI.customer_service.workflow | Validation agent processing tool message
2025-10-16 20:22:00,665 | INFO | app.AI.customer_service.workflow | Tool message:  I do not know....
2025-10-16 20:22:00,665 | INFO | app.AI.customer_service.workflow | Tool message:  I do not know....
2025-10-16 20:22:03,620 | INFO | app.AI.customer_service.workflow | Validation result: can_answer=False, next_step=end, tokens=806
2025-10-16 20:22:03,620 | INFO | app.AI.customer_service.workflow | Validation result: can_answer=False, next_step=end, tokens=806
2025-10-16 20:22:58,479 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-16 20:22:58,484 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 20:22:58,506 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 20:22:58,508 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 20:22:59,837 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 20:22:59,838 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 20:23:05,916 | INFO | app.AI.customer_service.workflow | Main agent processing user message: Oke apa product dengan rating terbaik?...
2025-10-16 20:23:05,916 | INFO | app.AI.customer_service.workflow | Main agent processing user message: Oke apa product dengan rating terbaik?...
2025-10-16 20:23:07,022 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:23:07,022 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:23:09,587 | INFO | app.AI.customer_service.workflow | Validation agent processing tool message
2025-10-16 20:23:09,587 | INFO | app.AI.customer_service.workflow | Validation agent processing tool message
2025-10-16 20:23:09,613 | INFO | app.AI.customer_service.workflow | Tool message:  Saya tidak memiliki informasi tentang produk yang memiliki rating terbaik dalam konteks yang diberi...
2025-10-16 20:23:09,613 | INFO | app.AI.customer_service.workflow | Tool message:  Saya tidak memiliki informasi tentang produk yang memiliki rating terbaik dalam konteks yang diberi...
2025-10-16 20:23:11,774 | INFO | app.AI.customer_service.workflow | Validation result: can_answer=False, next_step=check_products_database, tokens=813
2025-10-16 20:23:11,774 | INFO | app.AI.customer_service.workflow | Validation result: can_answer=False, next_step=check_products_database, tokens=813
2025-10-16 20:23:14,661 | INFO | app.AI.customer_service.workflow | Generating query for problem: Apa product dengan rating terbaik...
2025-10-16 20:23:14,661 | INFO | app.AI.customer_service.workflow | Generating query for problem: Apa product dengan rating terbaik...
2025-10-16 20:23:16,039 | INFO | app.AI.customer_service.workflow | Generated query: SELECT product_name, rating FROM products ORDER BY rating DESC LIMIT 1;...
2025-10-16 20:23:16,039 | INFO | app.AI.customer_service.workflow | Generated query: SELECT product_name, rating FROM products ORDER BY rating DESC LIMIT 1;...
2025-10-16 20:23:16,043 | INFO | app.AI.customer_service.workflow | Target database: products
2025-10-16 20:23:16,043 | INFO | app.AI.customer_service.workflow | Target database: products
2025-10-16 20:23:16,044 | INFO | app.AI.customer_service.workflow | Estimated tokens: 743
2025-10-16 20:23:16,044 | INFO | app.AI.customer_service.workflow | Estimated tokens: 743
2025-10-16 20:23:16,583 | INFO | app.AI.customer_service.workflow | Query executed successfully, returned 1 rows
2025-10-16 20:23:16,583 | INFO | app.AI.customer_service.workflow | Query executed successfully, returned 1 rows
2025-10-16 20:23:16,592 | INFO | app.AI.customer_service.workflow | Generating final answer for user
2025-10-16 20:23:16,592 | INFO | app.AI.customer_service.workflow | Generating final answer for user
2025-10-16 20:23:20,280 | INFO | app.AI.customer_service.workflow | Final answer generated successfully
2025-10-16 20:23:20,280 | INFO | app.AI.customer_service.workflow | Final answer generated successfully
2025-10-16 20:27:04,484 | ERROR | app.websocket.ws_route | Error in agent invoke: (1012, None)
2025-10-16 20:27:04,915 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 20:27:04,965 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 20:27:04,982 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 20:27:05,250 | INFO | main | Redis event bus stopped
2025-10-16 20:27:40,326 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 20:27:40,327 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 20:27:40,328 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 20:27:40,328 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 20:28:02,459 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-16 20:28:02,465 | INFO | main | Redis event bus started
2025-10-16 20:28:34,175 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 20:28:34,179 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 20:28:38,907 | INFO | app.dependencies.redis_storage | Agent 8H287 retrieved from Redis
2025-10-16 20:29:11,120 | INFO | app.AI.customer_service.workflow | Main agent processing user message: hai...
2025-10-16 20:29:11,120 | INFO | app.AI.customer_service.workflow | Main agent processing user message: hai...
2025-10-16 20:29:12,819 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:29:12,819 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:30:02,872 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-16 20:30:02,875 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 20:30:02,882 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 20:30:02,892 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 20:30:07,948 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 20:30:07,951 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 20:30:13,692 | INFO | app.AI.customer_service.workflow | Main agent processing user message: hai...
2025-10-16 20:30:13,692 | INFO | app.AI.customer_service.workflow | Main agent processing user message: hai...
2025-10-16 20:30:15,267 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:30:15,267 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:32:10,729 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-16 20:32:10,759 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 20:32:10,784 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 20:32:10,794 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 20:32:11,924 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 20:32:11,926 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 20:32:17,271 | INFO | app.AI.customer_service.workflow | Main agent processing user message: hai...
2025-10-16 20:32:17,271 | INFO | app.AI.customer_service.workflow | Main agent processing user message: hai...
2025-10-16 20:32:19,068 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:32:19,068 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:46:08,034 | ERROR | app.websocket.ws_route | Error in agent invoke: (1012, None)
2025-10-16 20:46:09,139 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 20:46:09,698 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 20:46:10,037 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 20:46:11,199 | INFO | main | Redis event bus stopped
2025-10-16 20:46:36,578 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 20:46:36,580 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 20:46:36,580 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 20:46:36,581 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 20:46:58,167 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-16 20:46:58,172 | INFO | main | Redis event bus started
2025-10-16 20:46:58,188 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 20:46:58,189 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 20:47:28,715 | ERROR | app.websocket.ws_route | Error in agent invoke: (1012, None)
2025-10-16 20:47:29,289 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 20:47:30,295 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 20:47:32,705 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 20:47:36,711 | INFO | main | Redis event bus stopped
2025-10-16 20:48:00,329 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 20:48:00,330 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 20:48:00,332 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 20:48:00,333 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 20:48:50,369 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-16 20:48:50,371 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-16 20:48:50,373 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-16 20:48:50,375 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-16 20:49:31,657 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-16 20:49:31,687 | INFO | main | Redis event bus started
2025-10-16 20:49:31,763 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 20:49:31,772 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 20:49:47,105 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-16 20:49:47,122 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 20:49:47,134 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 20:49:47,136 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 20:50:01,416 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 20:50:01,417 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 20:50:04,825 | INFO | app.dependencies.redis_storage | Agent 8H287 retrieved from Redis
2025-10-16 20:50:52,713 | INFO | app.AI.customer_service.workflow | Main agent processing user message: hai...
2025-10-16 20:50:52,713 | INFO | app.AI.customer_service.workflow | Main agent processing user message: hai...
2025-10-16 20:50:55,057 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:50:55,057 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:51:05,927 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-16 20:51:05,938 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 20:51:05,944 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 20:51:05,951 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 20:51:08,383 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-16 20:51:08,385 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-16 20:51:13,552 | INFO | app.AI.customer_service.workflow | Main agent processing user message: hai...
2025-10-16 20:51:13,552 | INFO | app.AI.customer_service.workflow | Main agent processing user message: hai...
2025-10-16 20:51:15,329 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:51:15,329 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-16 20:51:39,348 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-16 20:51:39,360 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-16 20:51:39,362 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-16 20:51:39,363 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-16 20:57:36,422 | INFO | main | Redis event bus stopped
2025-10-17 08:52:49,286 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 08:52:49,398 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 08:52:49,418 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 08:52:49,516 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 08:53:51,166 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 08:53:51,181 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 08:53:51,249 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 08:53:51,254 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 08:54:11,964 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-17 08:54:11,987 | INFO | main | Redis event bus started
2025-10-17 08:54:49,482 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-17 08:54:49,802 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-17 08:54:52,506 | INFO | app.websocket.manager | Sending message to user with id agent_invoke_1: the message is {'from': 'Server', 'message': 'ok'}
2025-10-17 08:55:34,234 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-17 08:55:34,240 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 08:55:34,263 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-17 08:55:34,264 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-17 08:55:35,800 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-17 08:55:35,805 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-17 08:55:38,790 | INFO | app.websocket.manager | Sending message to user with id agent_invoke_1: the message is {'from': 'Server', 'message': 'ok'}
2025-10-17 08:57:21,506 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-17 08:57:21,517 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 08:57:21,533 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-17 08:57:21,556 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-17 08:57:24,512 | INFO | app.websocket.manager | User id agent_invoke_1 connection to websocket.
2025-10-17 08:57:24,514 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-17 08:57:27,434 | INFO | app.websocket.manager | Sending message to user with id agent_invoke_1: the message is {'from': 'Server', 'message': 'ok'}
2025-10-17 08:57:42,536 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-17 08:57:42,743 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 08:57:43,314 | INFO | app.websocket.manager | User with id agent_invoke_1 diconnect from websocket
2025-10-17 08:57:43,785 | INFO | app.websocket.manager | User with id agent_invoke_1 has been deleted from connections
2025-10-17 08:59:19,378 | INFO | main | Redis event bus stopped
2025-10-17 08:59:51,557 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 08:59:51,586 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 08:59:51,590 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 08:59:51,605 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 09:00:27,950 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 09:00:27,951 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 09:00:27,951 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 09:00:27,953 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 09:00:46,009 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-17 09:00:46,014 | INFO | main | Redis event bus started
2025-10-17 09:01:55,429 | INFO | main | Redis event bus stopped
2025-10-17 09:02:20,541 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 09:02:20,542 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 09:02:20,543 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 09:02:20,544 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 09:02:42,294 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 09:02:42,297 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 09:02:42,299 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 09:02:42,300 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 09:02:55,916 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-17 09:02:55,918 | INFO | main | Redis event bus started
2025-10-17 09:04:05,103 | INFO | main | Redis event bus stopped
2025-10-17 09:04:31,277 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 09:04:31,280 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 09:04:31,282 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 09:04:31,283 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 09:05:08,768 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 09:05:08,770 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 09:05:08,771 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 09:05:08,771 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 09:05:22,213 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 09:05:22,214 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 09:05:22,215 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 09:05:22,216 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 09:05:38,769 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 09:05:38,770 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 09:05:38,771 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 09:05:38,771 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 09:05:52,065 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-17 09:05:52,067 | INFO | main | Redis event bus started
2025-10-17 09:06:00,365 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-17 09:06:00,374 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-17 09:06:03,344 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'progress', 'message': 'Starting agent processing...', 'agent_id': '8H287'}
2025-10-17 09:06:19,368 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-17 09:06:19,373 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 09:06:19,377 | WARNING | app.websocket.manager | User with id agent_invoke_1 not found in the websocket connections
2025-10-17 09:07:37,691 | INFO | main | Redis event bus stopped
2025-10-17 09:08:02,107 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 09:08:02,110 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 09:08:02,113 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 09:08:02,116 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 09:08:10,648 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 09:08:10,649 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 09:08:10,649 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 09:08:10,650 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 09:08:45,035 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 09:08:45,040 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 09:08:45,040 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 09:08:45,041 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 09:08:55,582 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 09:08:55,585 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 09:08:55,586 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 09:08:55,588 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 09:09:42,469 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 09:09:42,470 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 09:09:42,471 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 09:09:42,472 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 09:10:07,760 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-17 09:10:07,826 | INFO | main | Redis event bus started
2025-10-17 09:10:22,762 | INFO | main | Redis event bus stopped
2025-10-17 09:40:38,386 | INFO | app.dependencies.redis_storage | Agent u9023 retrieved from Redis
2025-10-17 09:40:53,636 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 09:40:53,644 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 09:40:53,648 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 09:40:53,650 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 09:41:14,540 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 09:41:14,541 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 09:41:14,542 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 09:41:14,542 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 09:41:27,251 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-17 09:41:27,253 | INFO | main | Redis event bus started
2025-10-17 09:41:59,590 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-17 09:41:59,591 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-17 09:42:02,588 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'progress', 'message': 'Starting agent processing...', 'agent_id': 'u9023'}
2025-10-17 09:42:02,964 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'progress', 'message': 'Building the agent...'}
2025-10-17 09:42:02,971 | INFO | app.dependencies.redis_storage | Agent u9023 retrieved from Redis
2025-10-17 09:42:17,073 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'reasoning', 'message': 'Agent is reasoning...'}
2025-10-17 09:42:17,193 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'response', 'agent_id': 'u9023', 'user_message': 'hai', 'response': 'Halo! Selamat datang di sini! Bagaimana kabarmu hari ini? Apa yang bisa aku bantu? ', 'status': 'completed'}
2025-10-17 09:42:56,719 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-17 09:42:56,723 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'error', 'message': 'Agent invoke failed, please try again later.'}
2025-10-17 09:42:56,725 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 09:42:56,739 | WARNING | app.websocket.manager | User with id agent_invoke_1 not found in the websocket connections
2025-10-17 09:42:57,689 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-17 09:42:57,690 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-17 09:43:00,685 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'progress', 'message': 'Starting agent processing...', 'agent_id': 'u9023'}
2025-10-17 09:43:00,689 | ERROR | app.websocket.ws_route | Error in agent invoke: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 09:43:00,690 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'error', 'message': 'Agent invoke failed, please try again later.'}
2025-10-17 09:43:00,691 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 09:43:00,695 | WARNING | app.websocket.manager | User with id agent_invoke_1 not found in the websocket connections
2025-10-17 09:43:15,885 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-17 09:43:15,886 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-17 09:43:18,879 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'progress', 'message': 'Starting agent processing...', 'agent_id': 'u9023'}
2025-10-17 09:43:18,881 | ERROR | app.websocket.ws_route | Error in agent invoke: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 09:43:18,882 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'error', 'message': 'Agent invoke failed, please try again later.'}
2025-10-17 09:43:18,884 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 09:43:18,885 | WARNING | app.websocket.manager | User with id agent_invoke_1 not found in the websocket connections
2025-10-17 09:43:59,528 | INFO | main | Redis event bus stopped
2025-10-17 09:44:11,477 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 09:44:11,478 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 09:44:11,479 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 09:44:11,480 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 09:44:27,369 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-17 09:44:27,374 | INFO | main | Redis event bus started
2025-10-17 09:44:32,758 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-17 09:44:32,759 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-17 09:44:35,755 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'progress', 'message': 'Starting agent processing...', 'agent_id': 'u9023'}
2025-10-17 09:44:35,963 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'progress', 'message': 'Building the agent...'}
2025-10-17 09:44:35,968 | INFO | app.dependencies.redis_storage | Agent u9023 retrieved from Redis
2025-10-17 09:44:47,741 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'reasoning', 'message': 'Agent is reasoning...'}
2025-10-17 09:44:47,764 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'reasoning', 'message': 'Agent using the tool...'}
2025-10-17 09:44:53,904 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'response', 'agent_id': 'u9023', 'user_message': 'apa visi perusahaan?', 'response': 'Visi perusahaan adalah untuk menjadi penyedia solusi terdepan di industri tertentu. Sementara misi perusahaan adalah memberikan produk/layanan berkualitas tinggi, inovatif, dan berkelanjutan kepada pelanggan. Apakah ada yang bisa saya bantu lagi?', 'status': 'completed'}
2025-10-17 09:44:56,746 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-17 09:44:56,748 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'error', 'message': 'Agent invoke failed, please try again later.'}
2025-10-17 09:44:56,750 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 09:44:56,751 | WARNING | app.websocket.manager | User with id agent_invoke_1 not found in the websocket connections
2025-10-17 09:44:58,262 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-17 09:44:58,263 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-17 09:45:01,255 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'progress', 'message': 'Starting agent processing...', 'agent_id': 'u9023'}
2025-10-17 09:45:01,260 | ERROR | app.websocket.ws_route | Error in agent invoke: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 09:45:01,271 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'error', 'message': 'Agent invoke failed, please try again later.'}
2025-10-17 09:45:01,276 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 09:45:01,277 | WARNING | app.websocket.manager | User with id agent_invoke_1 not found in the websocket connections
2025-10-17 09:45:24,379 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-17 09:45:24,380 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-17 09:45:27,394 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'progress', 'message': 'Starting agent processing...', 'agent_id': 'u9023'}
2025-10-17 09:45:27,426 | ERROR | app.websocket.ws_route | Error in agent invoke: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 09:45:27,428 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'error', 'message': 'Agent invoke failed, please try again later.'}
2025-10-17 09:45:27,438 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 09:45:27,440 | WARNING | app.websocket.manager | User with id agent_invoke_1 not found in the websocket connections
2025-10-17 09:46:46,854 | INFO | main | Redis event bus stopped
2025-10-17 09:47:22,023 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 09:47:22,363 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 09:47:22,364 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 09:47:22,570 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 09:47:52,882 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 09:47:52,888 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 09:47:52,889 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 09:47:52,892 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 09:48:09,478 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-17 09:48:09,482 | INFO | main | Redis event bus started
2025-10-17 09:48:32,015 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-17 09:48:32,018 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-17 09:48:35,000 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'progress', 'message': 'Starting agent processing...', 'agent_id': 'u9023'}
2025-10-17 09:48:35,170 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'progress', 'message': 'Building the agent...'}
2025-10-17 09:48:35,179 | INFO | app.dependencies.redis_storage | Agent u9023 retrieved from Redis
2025-10-17 09:48:48,436 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'reasoning', 'message': 'Agent is reasoning...'}
2025-10-17 09:48:48,451 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'reasoning', 'message': 'Agent using the tool...'}
2025-10-17 09:48:58,613 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'response', 'agent_id': 'u9023', 'user_message': 'apa visi perusahaan?', 'response': 'Visi perusahaan adalah menjadi penyedia solusi terdepan di industri tertentu. Sementara misi perusahaan adalah memberikan produk/layanan berkualitas tinggi, inovatif, dan berkelanjutan kepada pelanggan. Jika ada pertanyaan lain atau hal lain yang bisa saya bantu, jangan ragu untuk memberitahukan ya. Terima kasih!', 'status': 'completed'}
2025-10-17 09:49:02,151 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-17 09:49:02,159 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'error', 'message': 'Agent invoke failed, please try again later.'}
2025-10-17 09:49:02,160 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 09:49:02,161 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-17 09:49:02,162 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-17 09:49:03,309 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-17 09:49:03,310 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-17 09:49:06,313 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'progress', 'message': 'Starting agent processing...', 'agent_id': 'u9023'}
2025-10-17 09:49:08,822 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'reasoning', 'message': 'Agent is reasoning...'}
2025-10-17 09:49:08,876 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'reasoning', 'message': 'Agent using the tool...'}
2025-10-17 09:49:15,287 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'response', 'agent_id': 'u9023', 'user_message': 'apa visi perusahaan?', 'response': 'Visi perusahaan adalah menjadi penyedia solusi terdepan di industri tertentu. Sementara misi perusahaan adalah memberikan produk/layanan berkualitas tinggi, inovatif, dan berkelanjutan kepada pelanggan. Jika ada hal lain yang ingin ditanyakan, silakan informasikan ya. Terima kasih!', 'status': 'completed'}
2025-10-17 09:49:39,089 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-17 09:49:39,094 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'error', 'message': 'Agent invoke failed, please try again later.'}
2025-10-17 09:49:39,112 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 09:49:39,114 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-17 09:49:39,115 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-17 09:49:41,272 | INFO | app.websocket.manager | User id 1 connection to websocket.
2025-10-17 09:49:41,273 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-17 09:49:44,270 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'progress', 'message': 'Starting agent processing...', 'agent_id': 'u9023'}
2025-10-17 09:49:46,851 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'reasoning', 'message': 'Agent is reasoning...'}
2025-10-17 09:49:46,966 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'response', 'agent_id': 'u9023', 'user_message': 'hai', 'response': 'Halo! Apa kabar hari ini? Ada yang bisa saya bantu? ', 'status': 'completed'}
2025-10-17 09:51:06,593 | ERROR | app.websocket.ws_route | Error in agent invoke: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-10-17 09:51:06,597 | INFO | app.websocket.manager | Sending message to user with id 1: the message is {'type': 'error', 'message': 'Agent invoke failed, please try again later.'}
2025-10-17 09:51:06,610 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 09:51:06,619 | INFO | app.websocket.manager | User with id 1 diconnect from websocket
2025-10-17 09:51:06,620 | INFO | app.websocket.manager | User with id 1 has been deleted from connections
2025-10-17 09:52:00,783 | INFO | main | Redis event bus stopped
2025-10-17 11:15:32,913 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 11:15:32,916 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 11:15:32,917 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 11:15:32,917 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 11:16:38,413 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 11:16:38,414 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 11:16:38,415 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 11:16:38,415 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 11:16:59,325 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 11:16:59,326 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 11:16:59,327 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 11:16:59,328 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 11:17:11,260 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-17 11:17:11,267 | INFO | main | Redis event bus started
2025-10-17 11:17:42,338 | INFO | app.websocket.manager | User id invoke_agent_1 connection to websocket.
2025-10-17 11:17:42,429 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-17 11:17:44,513 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'progress', 'message': 'Starting agent processing...', 'agent_id': 'u9023'}
2025-10-17 11:17:45,063 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'progress', 'message': 'Building the agent...'}
2025-10-17 11:17:45,072 | INFO | app.dependencies.redis_storage | Agent u9023 retrieved from Redis
2025-10-17 11:18:00,086 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'reasoning', 'message': 'Agent is reasoning...'}
2025-10-17 11:18:00,277 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'response', 'agent_id': 'u9023', 'user_message': 'hai', 'response': 'Halo! Selamat datang di sini! Bagaimana kabarmu hari ini? Apakah ada yang bisa saya bantu? ', 'status': 'completed'}
2025-10-17 11:18:11,161 | ERROR | app.websocket.ws_route | Error in agent invoke: (1012, None)
2025-10-17 11:18:11,164 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'error', 'message': 'Agent invoke failed, please try again later.'}
2025-10-17 11:18:11,243 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 11:18:11,254 | INFO | app.websocket.manager | User with id invoke_agent_1 diconnect from websocket
2025-10-17 11:18:11,256 | INFO | app.websocket.manager | User with id invoke_agent_1 has been deleted from connections
2025-10-17 11:18:11,324 | INFO | main | Redis event bus stopped
2025-10-17 11:19:03,253 | INFO | app.dependencies.redis_storage | Agent vW546 retrieved from Redis
2025-10-17 11:19:26,149 | INFO | app.dependencies.redis_storage | Agent Rk427 retrieved from Redis
2025-10-17 11:19:43,332 | INFO | app.dependencies.redis_storage | Agent 8H287 retrieved from Redis
2025-10-17 11:20:18,355 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 11:20:18,357 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 11:20:18,359 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 11:20:18,361 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 11:20:37,245 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 11:20:37,246 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 11:20:37,248 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 11:20:37,249 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 11:20:49,391 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-17 11:20:49,410 | INFO | main | Redis event bus started
2025-10-17 11:21:12,077 | INFO | app.websocket.manager | User id invoke_agent_1 connection to websocket.
2025-10-17 11:21:12,079 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-17 11:21:15,063 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'progress', 'message': 'Starting agent processing...', 'agent_id': '8H287'}
2025-10-17 11:21:15,902 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'progress', 'message': 'Building the agent...'}
2025-10-17 11:21:15,936 | INFO | app.dependencies.redis_storage | Agent 8H287 retrieved from Redis
2025-10-17 11:30:01,423 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 11:30:01,428 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 11:30:01,428 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 11:30:01,429 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 11:31:22,155 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 11:31:22,159 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 11:31:22,163 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 11:31:22,226 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 11:31:39,386 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-17 11:31:39,422 | INFO | main | Redis event bus started
2025-10-17 11:32:30,857 | INFO | app.websocket.manager | User id invoke_agent_1 connection to websocket.
2025-10-17 11:32:30,874 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-17 11:32:33,804 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'progress', 'message': 'Starting agent processing...', 'agent_id': '8H287'}
2025-10-17 11:32:34,399 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'progress', 'message': 'Building the agent...'}
2025-10-17 11:32:34,411 | INFO | app.dependencies.redis_storage | Agent 8H287 retrieved from Redis
2025-10-17 11:37:01,727 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'reasoning', 'message': 'I am checking the trust level and the trust level is 80%, None, None'}
2025-10-17 11:37:03,218 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'reasoning', 'message': 'Main agent is processing user message...'}
2025-10-17 11:37:03,218 | INFO | app.AI.customer_service.workflow | Main agent processing user message: hai...
2025-10-17 11:37:03,218 | INFO | app.AI.customer_service.workflow | Main agent processing user message: hai...
2025-10-17 11:37:08,904 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-17 11:37:08,904 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-17 11:37:10,944 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'response', 'agent_id': '8H287', 'user_message': 'hai', 'response': 'Hai!  Selalu senang menyapa! Bagaimana kabar hari ini? Ada yang bisa saya bantu? ', 'status': 'completed'}
2025-10-17 11:37:11,907 | ERROR | app.websocket.ws_route | Error in agent invoke: (1012, None)
2025-10-17 11:37:12,129 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'error', 'message': 'Agent invoke failed, please try again later.'}
2025-10-17 11:37:12,372 | ERROR | app.websocket.ws_route | WebSocket error for agent invoke - User: 1: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-10-17 11:37:12,658 | INFO | app.websocket.manager | User with id invoke_agent_1 diconnect from websocket
2025-10-17 11:37:12,662 | INFO | app.websocket.manager | User with id invoke_agent_1 has been deleted from connections
2025-10-17 11:37:13,151 | INFO | main | Redis event bus stopped
2025-10-17 11:45:08,692 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 11:45:08,699 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 11:45:08,700 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 11:45:08,703 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 11:45:34,274 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-17 11:45:34,275 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-17 11:45:34,275 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-17 11:45:34,276 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-17 11:45:44,544 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-17 11:45:44,548 | INFO | main | Redis event bus started
2025-10-17 11:45:50,545 | INFO | app.websocket.manager | User id invoke_agent_1 connection to websocket.
2025-10-17 11:45:50,546 | INFO | app.websocket.ws_route | WebSocket connected for agent invoke - User: 1
2025-10-17 11:45:53,498 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'progress', 'message': 'Starting agent processing...', 'agent_id': '8H287'}
2025-10-17 11:45:53,637 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'progress', 'message': 'Building the agent...'}
2025-10-17 11:45:53,644 | INFO | app.dependencies.redis_storage | Agent 8H287 retrieved from Redis
2025-10-17 11:46:05,312 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'reasoning', 'message': 'I am checking the trust level and the trust level is 80%, None, None'}
2025-10-17 11:46:05,352 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'reasoning', 'message': 'Main agent is processing user message...'}
2025-10-17 11:46:05,353 | INFO | app.AI.customer_service.workflow | Main agent processing user message: Apa product dengan stok paling banyak?...
2025-10-17 11:46:05,353 | INFO | app.AI.customer_service.workflow | Main agent processing user message: Apa product dengan stok paling banyak?...
2025-10-17 11:46:07,398 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-17 11:46:07,398 | INFO | app.AI.customer_service.workflow | Main agent response generated successfully
2025-10-17 11:46:12,259 | INFO | app.AI.customer_service.workflow | Validation agent processing tool message
2025-10-17 11:46:12,259 | INFO | app.AI.customer_service.workflow | Validation agent processing tool message
2025-10-17 11:46:12,268 | INFO | app.AI.customer_service.workflow | Tool message:  I don't know....
2025-10-17 11:46:12,268 | INFO | app.AI.customer_service.workflow | Tool message:  I don't know....
2025-10-17 11:46:13,545 | INFO | app.AI.customer_service.workflow | Validation result: can_answer=False, next_step=check_products_database, tokens=804
2025-10-17 11:46:13,545 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'reasoning', 'message': 'I cannot answer the question and the reason is Pertanyaan pengguna memerlukan informasi spesifik tentang produk dengan stok paling banyak. Namun, informasi yang diberikan oleh tools tidak mencakup data stok dari setiap produk. and the next step is check_products_database'}
2025-10-17 11:46:13,545 | INFO | app.AI.customer_service.workflow | Validation result: can_answer=False, next_step=check_products_database, tokens=804
2025-10-17 11:46:13,552 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'reasoning', 'message': 'I am identifying the next step...'}
2025-10-17 11:46:15,961 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'reasoning', 'message': "let me check the problem and the problem is Mengetahui produk dengan stok paling banyak. and the problem solving is 1. Akses kolom 'product_name' dan 'stock'. 2. Urutkan data berdasarkan kolom 'stock' dari yang terbesar ke terkecil. 3. Ambil baris pertama yang merupakan produk dengan stok paling banyak."}
2025-10-17 11:46:15,974 | INFO | app.AI.customer_service.workflow | Generating query for problem: Mengetahui produk dengan stok paling banyak....
2025-10-17 11:46:15,974 | INFO | app.AI.customer_service.workflow | Generating query for problem: Mengetahui produk dengan stok paling banyak....
2025-10-17 11:46:17,680 | INFO | app.AI.customer_service.workflow | Generated query: SELECT product_name, stock FROM products ORDER BY stock DESC LIMIT 1;...
2025-10-17 11:46:17,680 | INFO | app.AI.customer_service.workflow | Generated query: SELECT product_name, stock FROM products ORDER BY stock DESC LIMIT 1;...
2025-10-17 11:46:17,684 | INFO | app.AI.customer_service.workflow | Target database: products
2025-10-17 11:46:17,684 | INFO | app.AI.customer_service.workflow | Target database: products
2025-10-17 11:46:17,685 | INFO | app.AI.customer_service.workflow | Estimated tokens: 733
2025-10-17 11:46:17,685 | INFO | app.AI.customer_service.workflow | Estimated tokens: 733
2025-10-17 11:46:17,689 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'reasoning', 'message': 'Let me query the database and the query is SELECT product_name, stock FROM products ORDER BY stock DESC LIMIT 1;'}
2025-10-17 11:46:17,934 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'reasoning', 'message': 'Got it, the result is                         product_name  stock\n0  Mie Instan Rasa Ayam Bawang 1 Dus    500'}
2025-10-17 11:46:17,933 | INFO | app.AI.customer_service.workflow | Query executed successfully, returned 1 rows
2025-10-17 11:46:17,933 | INFO | app.AI.customer_service.workflow | Query executed successfully, returned 1 rows
2025-10-17 11:46:17,939 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'reasoning', 'message': 'Let me check if I need to query the database again...'}
2025-10-17 11:46:17,957 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'reasoning', 'message': 'No more queries needed'}
2025-10-17 11:46:17,960 | INFO | app.AI.customer_service.workflow | Generating final answer for user
2025-10-17 11:46:17,960 | INFO | app.AI.customer_service.workflow | Generating final answer for user
2025-10-17 11:46:20,807 | INFO | app.AI.customer_service.workflow | Final answer generated successfully
2025-10-17 11:46:20,807 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'reasoning', 'message': 'I have generated the final answer and the answer is Tentu! Berdasarkan data yang kami miliki, produk dengan stok paling banyak adalah:\n\n**Nama Produk:** Mie Instan Rasa Ayam Bawang (1 Dus)  \n**Jumlah Stok:** 500 unit  \n\nProduk ini memiliki stok yang cukup melimpah, sehingga sangat tersedia untuk kebutuhan Anda. Jika Anda mencari sesuatu yang praktis dan lezat, mie instan ini bisa menjadi pilihan yang tepat. \n\nJika ada pertanyaan lebih lanjut atau jika Anda perlu informasi tambahan, silakan beri tahu kami!'}
2025-10-17 11:46:20,807 | INFO | app.AI.customer_service.workflow | Final answer generated successfully
2025-10-17 11:46:20,926 | INFO | app.websocket.manager | Sending message to user with id invoke_agent_1: the message is {'type': 'response', 'agent_id': '8H287', 'user_message': 'Apa product dengan stok paling banyak?', 'response': 'Tentu! Berdasarkan data yang kami miliki, produk dengan stok paling banyak adalah:\n\n**Nama Produk:** Mie Instan Rasa Ayam Bawang (1 Dus)  \n**Jumlah Stok:** 500 unit  \n\nProduk ini memiliki stok yang cukup melimpah, sehingga sangat tersedia untuk kebutuhan Anda. Jika Anda mencari sesuatu yang praktis dan lezat, mie instan ini bisa menjadi pilihan yang tepat. \n\nJika ada pertanyaan lebih lanjut atau jika Anda perlu informasi tambahan, silakan beri tahu kami!', 'status': 'completed'}
2025-10-18 08:34:48,447 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-18 08:34:48,449 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-18 08:34:48,450 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-18 08:34:48,450 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-18 08:36:10,404 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-18 08:36:10,405 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-18 08:36:10,406 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-18 08:36:10,407 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-18 08:37:07,214 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-18 08:37:07,215 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-18 08:37:07,216 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-18 08:37:07,217 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-18 08:37:19,925 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-18 08:37:19,926 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-18 08:37:19,927 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-18 08:37:19,927 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-18 08:53:51,762 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-18 08:53:51,764 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-18 08:53:51,764 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-18 08:53:51,765 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-18 08:53:53,425 | INFO | app.configs.database | Database tables created successfully
2025-10-18 08:53:53,428 | INFO | main | Database tables initialized
2025-10-18 08:53:57,477 | ERROR | main | Error during startup: Error 22 connecting to localhost:6379. The remote computer refused the network connection.
2025-10-18 08:58:59,021 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-18 08:58:59,045 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-18 08:58:59,046 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-18 08:58:59,049 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-18 08:59:00,129 | INFO | app.configs.database | Database tables created successfully
2025-10-18 08:59:00,138 | INFO | main | Database tables initialized
2025-10-18 08:59:00,768 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-18 08:59:00,824 | INFO | main | Redis event bus started
2025-10-18 09:01:47,738 | INFO | app.services.auth_service | New user registered with email: peler@gmail.com
2025-10-18 09:02:11,922 | WARNING | app.services.auth_service | Email is already in use: peler@gmail.com
2025-10-18 09:02:12,117 | ERROR | app.controllers.auth_controller | Unexpected error while registering user 400: Email is already in use.
2025-10-18 09:14:01,066 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-18 09:14:01,099 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-18 09:14:01,119 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-18 09:14:01,183 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-18 09:14:02,356 | INFO | app.configs.database | Database tables created successfully
2025-10-18 09:14:02,384 | INFO | main | Database tables initialized
2025-10-18 09:14:02,558 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-18 09:14:02,559 | INFO | main | Redis event bus started
2025-10-18 09:14:15,769 | ERROR | app.services.auth_service | Unexpected error during user registration: 400: {'error': 'PASSWORD_TOO_WEAK', 'message': 'Password must contain at least one uppercase letter', 'field': 'password'}
2025-10-18 09:14:15,888 | ERROR | app.controllers.auth_controller | Registration failed - database error: {'error': 'DATABASE_ERROR', 'message': 'Database user creation failed: An unexpected error occurred', 'field': 'database'}
2025-10-18 09:15:18,077 | ERROR | app.services.auth_service | Unexpected error during user registration: 400: {'error': 'PASSWORD_TOO_WEAK', 'message': 'Password must contain at least one uppercase letter', 'field': 'password'}
2025-10-18 09:15:18,079 | ERROR | app.controllers.auth_controller | Registration failed - database error: {'error': 'DATABASE_ERROR', 'message': 'Database user creation failed: An unexpected error occurred', 'field': 'database'}
2025-10-18 09:20:15,520 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-18 09:20:15,522 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-18 09:20:15,523 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-18 09:20:15,524 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-18 09:20:16,196 | INFO | app.configs.database | Database tables created successfully
2025-10-18 09:20:16,199 | INFO | main | Database tables initialized
2025-10-18 09:20:16,322 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-18 09:20:16,325 | INFO | main | Redis event bus started
2025-10-18 09:20:27,333 | ERROR | app.services.auth_service | Unexpected error during user registration: 400: {'error': 'PASSWORD_TOO_WEAK', 'message': 'Password must contain at least one uppercase letter', 'field': 'password'}
2025-10-18 09:20:27,538 | ERROR | app.controllers.auth_controller | Registration failed - database error: {'error': 'DATABASE_ERROR', 'message': 'Database user creation failed: An unexpected error occurred', 'field': 'database'}
2025-10-18 09:22:00,476 | INFO | main | Redis event bus stopped
2025-10-18 09:33:08,638 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-18 09:33:08,643 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-18 09:33:08,665 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-18 09:33:08,790 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-18 09:33:11,997 | INFO | app.configs.database | Database tables created successfully
2025-10-18 09:33:12,090 | INFO | main | Database tables initialized
2025-10-18 09:33:13,532 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-18 09:33:13,534 | INFO | main | Redis event bus started
2025-10-18 09:33:22,825 | WARNING | app.controllers.auth_controller | Registration failed - validation error: {'error': 'PASSWORD_TOO_WEAK', 'message': 'Password must contain at least one uppercase letter', 'field': 'password'}
2025-10-18 09:33:44,152 | WARNING | app.controllers.auth_controller | Registration failed - validation error: {'error': 'PASSWORD_TOO_WEAK', 'message': 'Password must contain at least one special character', 'field': 'password'}
2025-10-18 09:35:24,172 | INFO | main | Redis event bus stopped
2025-10-18 09:36:22,815 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-18 09:36:22,819 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-18 09:36:22,821 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-18 09:36:22,825 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-18 09:36:23,801 | INFO | app.configs.database | Database tables created successfully
2025-10-18 09:36:23,807 | INFO | main | Database tables initialized
2025-10-18 09:36:23,926 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-18 09:36:23,928 | INFO | main | Redis event bus started
2025-10-18 09:36:33,066 | WARNING | app.services.auth_service | Registration attempt with existing email: peler@gmail.com
2025-10-18 09:36:33,067 | WARNING | app.controllers.auth_controller | Registration failed - email already exists: peler@gmail.com
2025-10-18 09:36:52,601 | WARNING | app.services.auth_service | Registration attempt with existing email: peler@gmail.com
2025-10-18 09:36:52,603 | WARNING | app.controllers.auth_controller | Registration failed - email already exists: peler@gmail.com
2025-10-18 13:08:58,050 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-18 13:08:58,053 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-18 13:08:58,053 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-18 13:08:58,054 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-18 13:08:59,363 | INFO | app.configs.database | Database tables created successfully
2025-10-18 13:08:59,367 | INFO | main | Database tables initialized
2025-10-18 13:09:03,428 | ERROR | main | Error during startup: Error 22 connecting to localhost:6379. The remote computer refused the network connection.
2025-10-18 13:11:17,691 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-18 13:11:17,702 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-18 13:11:17,703 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-18 13:11:17,703 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-18 13:11:18,504 | INFO | app.configs.database | Database tables created successfully
2025-10-18 13:11:18,508 | INFO | main | Database tables initialized
2025-10-18 13:11:18,536 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-18 13:11:18,544 | INFO | main | Redis event bus started
2025-10-18 13:12:51,117 | WARNING | app.services.auth_service | Registration attempt with existing email: peler@gmail.com
2025-10-18 13:12:51,123 | WARNING | app.controllers.auth_controller | Registration failed - email already exists: peler@gmail.com
2025-10-18 13:13:01,517 | INFO | app.services.auth_service | New user registered successfully: peleri@gmail.com
2025-10-18 13:13:01,518 | INFO | app.controllers.auth_controller | User registration successful: peleri@gmail.com
2025-10-18 13:13:11,081 | INFO | app.services.auth_service | User authenticated successfully: khaerul@gmail.com
2025-10-18 13:13:11,082 | INFO | app.controllers.auth_controller | User is authenticated: email khaerul@gmail.com
2025-10-18 13:14:47,776 | INFO | main | Redis event bus stopped
2025-10-18 20:07:52,814 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-18 20:07:52,818 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-18 20:07:52,819 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-18 20:07:52,820 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-18 20:23:22,963 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-18 20:23:22,967 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-18 20:23:22,968 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-18 20:23:22,968 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-18 20:23:24,300 | INFO | app.configs.database | Database tables created successfully
2025-10-18 20:23:24,304 | INFO | main | Database tables initialized
2025-10-18 20:23:24,598 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-18 20:23:24,602 | INFO | main | Redis event bus started
2025-10-18 20:26:08,238 | INFO | app.services.auth_service | User authenticated successfully: khaerul@gmail.com
2025-10-18 20:26:08,283 | INFO | app.controllers.auth_controller | User is authenticated: email khaerul@gmail.com
2025-10-18 20:26:08,311 | ERROR | app.middlewares.error_handler | Unexpected error: 1 validation errors:
  {'type': 'missing', 'loc': ('response', 'data', 'name'), 'msg': 'Field required', 'input': {'username': 'khaerul', 'email': 'khaerul@gmail.com', 'plan': 'free'}}
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\middlewares\error_handler.py", line 17, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    raise app_exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\routing.py", line 328, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\routing.py", line 177, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'missing', 'loc': ('response', 'data', 'name'), 'msg': 'Field required', 'input': {'username': 'khaerul', 'email': 'khaerul@gmail.com', 'plan': 'free'}}

2025-10-18 20:27:22,851 | WARNING | main | Validation error: [{'type': 'missing', 'loc': ('body', 'name'), 'msg': 'Field required', 'input': {'username': 'khaerul', 'email': 'peleri@gmail.com', 'password': '12345678'}}]
2025-10-18 20:27:45,344 | WARNING | app.services.auth_service | Registration attempt with existing email: peleri@gmail.com
2025-10-18 20:27:45,426 | WARNING | app.controllers.auth_controller | Registration failed - email already exists: peleri@gmail.com
2025-10-18 20:28:02,064 | INFO | app.services.auth_service | New user registered successfully: pelerii@gmail.com
2025-10-18 20:28:02,072 | INFO | app.controllers.auth_controller | User registration successful: pelerii@gmail.com
2025-10-18 20:30:41,279 | INFO | main | Redis event bus stopped
2025-10-18 20:30:57,432 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-18 20:30:57,437 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-18 20:30:57,440 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-18 20:30:57,440 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-18 20:30:59,825 | INFO | app.configs.database | Database tables created successfully
2025-10-18 20:30:59,828 | INFO | main | Database tables initialized
2025-10-18 20:30:59,899 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-18 20:30:59,903 | INFO | main | Redis event bus started
2025-10-18 20:31:29,263 | INFO | app.services.auth_service | User authenticated successfully: khaerul@gmail.com
2025-10-18 20:31:29,270 | INFO | app.controllers.auth_controller | User is authenticated: email khaerul@gmail.com
2025-10-18 20:32:23,287 | INFO | main | Redis event bus stopped
2025-10-18 21:03:13,483 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-18 21:03:13,486 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-18 21:03:13,487 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-18 21:03:13,488 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-18 21:03:15,550 | INFO | app.configs.database | Database tables created successfully
2025-10-18 21:03:15,554 | INFO | main | Database tables initialized
2025-10-18 21:03:15,787 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-18 21:03:15,790 | INFO | main | Redis event bus started
2025-10-18 21:03:31,214 | INFO | app.services.auth_service | User authenticated successfully: khaerul@gmail.com
2025-10-18 21:03:31,398 | INFO | app.controllers.auth_controller | User is authenticated: email khaerul@gmail.com
2025-10-18 21:03:44,246 | INFO | app.controllers.auth_controller | User khaerul@gmail.com logout successfully
2025-10-18 21:19:38,227 | INFO | main | Redis event bus stopped
2025-10-19 08:50:43,012 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-19 08:50:43,015 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-19 08:50:43,015 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-19 08:50:43,016 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-19 08:50:44,392 | INFO | app.configs.database | Database tables created successfully
2025-10-19 08:50:44,396 | INFO | main | Database tables initialized
2025-10-19 08:50:48,476 | ERROR | main | Error during startup: Error 22 connecting to localhost:6379. The remote computer refused the network connection.
2025-10-19 08:53:19,453 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-19 08:53:19,456 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-19 08:53:19,458 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-19 08:53:19,459 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-19 08:53:20,209 | INFO | app.configs.database | Database tables created successfully
2025-10-19 08:53:20,221 | INFO | main | Database tables initialized
2025-10-19 08:53:20,304 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-19 08:53:20,306 | INFO | main | Redis event bus started
2025-10-19 08:54:23,401 | INFO | app.services.auth_service | User authenticated successfully: khaerul@gmail.com
2025-10-19 08:54:23,440 | INFO | app.controllers | User is authenticated: email khaerul@gmail.com
2025-10-19 08:55:36,193 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-19 08:55:36,197 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-19 08:55:36,199 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-19 08:55:36,206 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-19 08:55:37,747 | INFO | app.configs.database | Database tables created successfully
2025-10-19 08:55:37,750 | INFO | main | Database tables initialized
2025-10-19 08:55:37,822 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-19 08:55:37,824 | INFO | main | Redis event bus started
2025-10-19 08:55:43,834 | WARNING | app.middlewares.auth_middleware | Permission denied for role user: khaerul@gmail.com
2025-10-19 08:56:16,650 | INFO | main | Redis event bus stopped
2025-10-19 08:56:22,302 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-19 08:56:22,304 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-19 08:56:22,306 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-19 08:56:22,307 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-19 08:56:22,919 | INFO | app.configs.database | Database tables created successfully
2025-10-19 08:56:22,922 | INFO | main | Database tables initialized
2025-10-19 08:56:22,944 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-19 08:56:22,950 | INFO | main | Redis event bus started
2025-10-19 08:56:27,903 | ERROR | app.services.user_service | Error while getting all users: id
2025-10-19 08:56:27,907 | ERROR | app.controllers | Unexpected error: id
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 199, in _key_not_found
    self._key_fallback(key, None)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 138, in _key_fallback
    raise KeyError(key) from err
KeyError: 'id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\user_controller.py", line 29, in get_all_users
    data_users = await self.user_service.get_all_users(page, limit)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\app\services\user_service.py", line 21, in get_all_users
    id=u.id,
       ^^^^
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 66, in sqlalchemy.cyextension.resultproxy.BaseRow.__getattr__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 63, in sqlalchemy.cyextension.resultproxy.BaseRow._get_by_key_impl
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 201, in _key_not_found
    raise AttributeError(ke.args[0]) from ke
AttributeError: id
2025-10-19 08:57:19,595 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-19 08:57:19,596 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-19 08:57:19,598 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-19 08:57:19,599 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-19 08:57:20,572 | INFO | app.configs.database | Database tables created successfully
2025-10-19 08:57:20,576 | INFO | main | Database tables initialized
2025-10-19 08:57:20,956 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-19 08:57:20,958 | INFO | main | Redis event bus started
2025-10-19 08:57:28,518 | ERROR | app.services.user_service | Error while getting all users: 1 validation error for DataUserSchema
company_name
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-19 08:57:28,524 | ERROR | app.controllers | Unexpected error: 1 validation error for DataUserSchema
company_name
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\user_controller.py", line 29, in get_all_users
    data_users = await self.user_service.get_all_users(page, limit)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\app\services\user_service.py", line 20, in get_all_users
    DataUserSchema(
    ~~~~~~~~~~~~~~^
        id=u.id,
        ^^^^^^^^
    ...<9 lines>...
        last_login=u.last_login,
        ^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 1 validation error for DataUserSchema
company_name
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-19 08:59:42,823 | ERROR | main | Error stopping Redis event bus: no running event loop
2025-10-19 09:00:37,057 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-19 09:00:37,061 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-19 09:00:37,061 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-19 09:00:37,062 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-19 09:00:38,577 | INFO | app.configs.database | Database tables created successfully
2025-10-19 09:00:38,605 | INFO | main | Database tables initialized
2025-10-19 09:00:38,886 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-19 09:00:38,897 | INFO | main | Redis event bus started
2025-10-19 09:00:44,289 | INFO | app.controllers | Admin khaerul@gmail.com getting all users (page 1).
2025-10-21 12:50:31,679 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 12:50:31,682 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 12:50:31,683 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 12:50:31,683 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 12:53:02,833 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 12:53:02,835 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 12:53:02,836 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 12:53:02,836 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 12:53:51,885 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 12:53:51,955 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 12:53:51,987 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 12:53:52,001 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 12:53:54,841 | INFO | app.configs.database | Database tables created successfully
2025-10-21 12:53:54,846 | INFO | main | Database tables initialized
2025-10-21 12:53:55,238 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 12:53:55,245 | INFO | main | Redis event bus started
2025-10-21 12:55:20,142 | INFO | app.services.auth_service | User authenticated successfully: khaerul@gmail.com
2025-10-21 12:55:20,173 | INFO | app.controllers | User is authenticated: email khaerul@gmail.com
2025-10-21 12:55:28,008 | WARNING | app.middlewares.auth_middleware | Permission denied for role user: khaerul@gmail.com
2025-10-21 12:56:42,039 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 12:56:42,052 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 12:56:42,157 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 12:56:42,219 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 12:56:45,272 | INFO | app.configs.database | Database tables created successfully
2025-10-21 12:56:45,459 | INFO | main | Database tables initialized
2025-10-21 12:56:49,430 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 12:56:49,435 | INFO | main | Redis event bus started
2025-10-21 12:56:57,089 | INFO | app.services.user_service | [request_id=f3d7ed58-02a6-449d-8581-b2c56720f13e] Admin getting all users
2025-10-21 12:58:10,541 | INFO | app.services.auth_service | User authenticated successfully: khaerul@gmail.com
2025-10-21 12:58:10,616 | INFO | app.controllers | User is authenticated: email khaerul@gmail.com
2025-10-21 12:58:20,348 | INFO | app.services.user_service | [request_id=fd531bf0-6a25-4236-a200-459bb68af540] Admin getting all users
2025-10-21 13:01:08,994 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 13:01:08,997 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 13:01:08,997 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 13:01:08,999 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 13:01:10,346 | INFO | app.configs.database | Database tables created successfully
2025-10-21 13:01:10,361 | INFO | main | Database tables initialized
2025-10-21 13:01:10,465 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 13:01:10,467 | INFO | main | Redis event bus started
2025-10-21 13:01:17,869 | INFO | app.services.user_service | [request_id=b037bfbf-8858-4c0f-8051-f4a9920b53ca] Admin getting all users
2025-10-21 13:02:49,763 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 13:02:49,771 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 13:02:49,774 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 13:02:49,798 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 13:02:50,520 | INFO | app.configs.database | Database tables created successfully
2025-10-21 13:02:50,524 | INFO | main | Database tables initialized
2025-10-21 13:02:50,624 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 13:02:50,626 | INFO | main | Redis event bus started
2025-10-21 13:02:58,179 | INFO | app.services.user_service | [request_id=6c13864f-a873-469b-b871-dc3dccb55b1e] Admin getting all users
2025-10-21 13:06:39,094 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 13:06:39,098 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 13:06:39,099 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 13:06:39,125 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 13:06:42,106 | INFO | app.configs.database | Database tables created successfully
2025-10-21 13:06:42,110 | INFO | main | Database tables initialized
2025-10-21 13:06:42,234 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 13:06:42,236 | INFO | main | Redis event bus started
2025-10-21 13:06:52,890 | INFO | app.services.user_service | [request_id=3935839a-038b-4625-ab7a-ab9e4dc9ac25] Admin getting all users
2025-10-21 13:07:43,351 | INFO | main | Redis event bus stopped
2025-10-21 13:07:53,753 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 13:07:53,755 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 13:07:53,756 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 13:07:53,756 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 13:07:54,404 | INFO | app.configs.database | Database tables created successfully
2025-10-21 13:07:54,407 | INFO | main | Database tables initialized
2025-10-21 13:07:54,479 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 13:07:54,480 | INFO | main | Redis event bus started
2025-10-21 13:08:08,782 | INFO | app.services.user_service | [request_id=44dd96e9-4ce0-49cb-857c-3930da810b36] Admin getting all users
2025-10-21 13:14:05,224 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 13:14:05,228 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 13:14:05,230 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 13:14:05,231 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 13:14:08,258 | INFO | app.configs.database | Database tables created successfully
2025-10-21 13:14:08,277 | INFO | main | Database tables initialized
2025-10-21 13:14:08,782 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 13:14:08,789 | INFO | main | Redis event bus started
2025-10-21 13:14:29,975 | INFO | app.services.user_service | [request_id=9576bdd4-0ff8-4775-926e-de6d28cb30af] Admin getting all users
2025-10-21 13:14:56,596 | INFO | main | Redis event bus stopped
2025-10-21 13:16:09,301 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 13:16:09,307 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 13:16:09,347 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 13:16:09,363 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 13:16:11,016 | INFO | app.configs.database | Database tables created successfully
2025-10-21 13:16:11,019 | INFO | main | Database tables initialized
2025-10-21 13:16:11,141 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 13:16:11,142 | INFO | main | Redis event bus started
2025-10-21 13:16:26,779 | INFO | app.services.user_service | [request_id=e3f08e07-ecf4-4444-ad7a-7b0ff704b05f] Admin getting all users
2025-10-21 13:20:54,019 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 13:20:54,028 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 13:20:54,029 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 13:20:54,031 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 13:20:56,446 | INFO | app.configs.database | Database tables created successfully
2025-10-21 13:20:56,454 | INFO | main | Database tables initialized
2025-10-21 13:20:56,588 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 13:20:56,591 | INFO | main | Redis event bus started
2025-10-21 13:21:04,654 | INFO | main | Redis event bus stopped
2025-10-21 13:22:01,802 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 13:22:01,806 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 13:22:01,807 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 13:22:01,913 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 13:22:03,665 | INFO | app.configs.database | Database tables created successfully
2025-10-21 13:22:03,672 | INFO | main | Database tables initialized
2025-10-21 13:22:03,907 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 13:22:03,911 | INFO | main | Redis event bus started
2025-10-21 13:22:13,281 | INFO | app.services.user_service | [request_id=269115c7-631a-4f8c-b95b-8679328da571] Admin getting all users
2025-10-21 13:22:13,875 | ERROR | main | Unhandled exception: CurrentContext.clear() missing 1 required positional argument: 'cls'
  + Exception Group Traceback (most recent call last):
  |   File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 183, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "D:\Saas_Project\Backend\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 182, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "C:\Users\starb\AppData\Local\Programs\Python\Python313\Lib\contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 184, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\Saas_Project\Backend\app\middlewares\context_middleware.py", line 23, in dispatch
    |     CurrentContext.clear()
    |     ~~~~~~~~~~~~~~~~~~~~^^
    | TypeError: CurrentContext.clear() missing 1 required positional argument: 'cls'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 182, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\starb\AppData\Local\Programs\Python\Python313\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
    raise exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 184, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\app\middlewares\context_middleware.py", line 23, in dispatch
    CurrentContext.clear()
    ~~~~~~~~~~~~~~~~~~~~^^
TypeError: CurrentContext.clear() missing 1 required positional argument: 'cls'
2025-10-21 13:25:55,223 | INFO | main | Redis event bus stopped
2025-10-21 13:26:09,087 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 13:26:09,090 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 13:26:09,091 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 13:26:09,092 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 13:26:11,152 | INFO | app.configs.database | Database tables created successfully
2025-10-21 13:26:11,157 | INFO | main | Database tables initialized
2025-10-21 13:26:11,241 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 13:26:11,244 | INFO | main | Redis event bus started
2025-10-21 13:26:21,207 | INFO | app.services.user_service | [request_id=753bc133-c927-48a2-a7a2-ae1be8cdced0] Admin getting all users
2025-10-21 13:29:52,650 | INFO | main | Redis event bus stopped
2025-10-21 13:30:05,223 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 13:30:05,270 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 13:30:05,295 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 13:30:05,309 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 13:30:08,143 | INFO | app.configs.database | Database tables created successfully
2025-10-21 13:30:08,160 | INFO | main | Database tables initialized
2025-10-21 13:30:10,758 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 13:30:10,760 | INFO | main | Redis event bus started
2025-10-21 13:30:16,396 | ERROR | app.middlewares.error_handler | Unexpected error: type object '_contextvars.ContextVar' has no attribute 'get_current_user'
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\middlewares\error_handler.py", line 17, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    raise app_exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\app\routes\user_route.py", line 26, in getAllUsers
    print(f"Context: {ContextVar.get_current_user()}")
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object '_contextvars.ContextVar' has no attribute 'get_current_user'
2025-10-21 13:31:30,713 | INFO | main | Redis event bus stopped
2025-10-21 13:31:58,575 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 13:31:58,580 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 13:31:58,582 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 13:31:58,605 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 13:31:59,637 | INFO | app.configs.database | Database tables created successfully
2025-10-21 13:31:59,660 | INFO | main | Database tables initialized
2025-10-21 13:32:00,816 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 13:32:00,818 | INFO | main | Redis event bus started
2025-10-21 13:32:21,145 | INFO | app.services.user_service | [request_id=17ae99ba-4cb9-40de-a4d8-bee2f03cae2f] Admin getting all users
2025-10-21 13:37:04,053 | INFO | main | Redis event bus stopped
2025-10-21 20:44:30,548 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 20:44:30,551 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 20:44:30,552 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 20:44:30,552 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 20:44:31,974 | INFO | app.configs.database | Database tables created successfully
2025-10-21 20:44:31,978 | INFO | main | Database tables initialized
2025-10-21 20:44:36,060 | ERROR | main | Error during startup: Error 22 connecting to localhost:6379. The remote computer refused the network connection.
2025-10-21 20:46:23,071 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 20:46:23,074 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 20:46:23,075 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 20:46:23,076 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 20:46:23,820 | INFO | app.configs.database | Database tables created successfully
2025-10-21 20:46:23,823 | INFO | main | Database tables initialized
2025-10-21 20:46:23,897 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 20:46:23,906 | INFO | main | Redis event bus started
2025-10-21 20:48:00,707 | INFO | app.services.auth_service | User authenticated successfully: khaerul@gmail.com
2025-10-21 20:48:01,029 | INFO | app.controllers | User is authenticated: email khaerul@gmail.com
2025-10-21 20:48:45,691 | INFO | app.services.user_service | [request_id=00f0d5d0-cc04-4b91-82f3-6658da37fb5d] Admin getting all users
2025-10-21 20:51:17,690 | INFO | main | Redis event bus stopped
2025-10-21 20:51:29,573 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 20:51:29,574 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 20:51:29,575 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 20:51:29,576 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 20:51:30,722 | INFO | app.configs.database | Database tables created successfully
2025-10-21 20:51:30,726 | INFO | main | Database tables initialized
2025-10-21 20:51:30,810 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 20:51:30,812 | INFO | main | Redis event bus started
2025-10-21 20:51:41,427 | INFO | app.services.user_service | [request_id=f8f9eae1-fcc8-4b16-9165-05f741fe93bd] Admin getting all users
2025-10-21 20:51:58,596 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 20:51:58,597 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 20:51:58,598 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 20:51:58,599 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 20:51:59,273 | INFO | app.configs.database | Database tables created successfully
2025-10-21 20:51:59,276 | INFO | main | Database tables initialized
2025-10-21 20:51:59,322 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 20:51:59,325 | INFO | main | Redis event bus started
2025-10-21 20:52:04,141 | INFO | app.services.user_service | [request_id=2f3a9e3b-34b1-46b7-94a0-3fe633c15672] Admin getting all users
2025-10-21 20:55:21,845 | INFO | main | Redis event bus stopped
2025-10-21 20:55:30,095 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 20:55:30,096 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 20:55:30,097 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 20:55:30,097 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 20:55:31,509 | INFO | app.configs.database | Database tables created successfully
2025-10-21 20:55:31,515 | INFO | main | Database tables initialized
2025-10-21 20:55:31,622 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 20:55:31,623 | INFO | main | Redis event bus started
2025-10-21 20:55:40,707 | INFO | app.services.user_service | [request_id=73801307-7333-4a40-9a0a-916f0d9861ab] Admin getting all users
2025-10-21 20:56:25,478 | INFO | main | Redis event bus stopped
2025-10-21 20:56:30,409 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 20:56:30,410 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 20:56:30,410 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 20:56:30,411 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 20:56:31,099 | INFO | app.configs.database | Database tables created successfully
2025-10-21 20:56:31,251 | INFO | main | Database tables initialized
2025-10-21 20:56:32,228 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 20:56:32,235 | INFO | main | Redis event bus started
2025-10-21 20:56:35,955 | INFO | app.services.user_service | [request_id=120313cf-22d8-474a-8f95-6d02bfca0e91] Admin getting all users
2025-10-21 21:00:18,283 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 21:00:18,285 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 21:00:18,285 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 21:00:18,285 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 21:00:19,202 | INFO | app.configs.database | Database tables created successfully
2025-10-21 21:00:19,218 | INFO | main | Database tables initialized
2025-10-21 21:00:19,320 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 21:00:19,325 | INFO | main | Redis event bus started
2025-10-21 21:00:27,694 | INFO | app.services.user_service | [request_id=4b4398e7-3286-4bb6-b231-9d2d44fed056] Admin getting all users
2025-10-21 21:04:55,888 | INFO | main | Redis event bus stopped
2025-10-21 21:05:02,874 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 21:05:02,875 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 21:05:02,878 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 21:05:02,879 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 21:05:03,947 | INFO | app.configs.database | Database tables created successfully
2025-10-21 21:05:03,949 | INFO | main | Database tables initialized
2025-10-21 21:05:04,047 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 21:05:04,050 | INFO | main | Redis event bus started
2025-10-21 21:05:12,932 | INFO | app.services.user_service | [request_id=85a8ef78-9be0-4a3d-9afa-eaa508b89bda] [user=khaerul@gmail.com] Admin getting all users
2025-10-21 21:05:38,215 | INFO | main | Redis event bus stopped
2025-10-21 21:17:42,276 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-21 21:17:42,278 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-21 21:17:42,279 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-21 21:17:42,281 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-21 21:17:43,452 | INFO | app.configs.database | Database tables created successfully
2025-10-21 21:17:43,456 | INFO | main | Database tables initialized
2025-10-21 21:17:43,572 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-21 21:17:43,573 | INFO | main | Redis event bus started
2025-10-21 21:17:54,473 | INFO | app.services.user_service | [request_id=7e3f73b9-9e7f-4da3-8144-8714218b2459] [user=khaerul@gmail.com] Admin getting all users
2025-10-21 21:18:54,154 | INFO | main | Redis event bus stopped
2025-10-23 19:45:13,370 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-23 19:45:13,387 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-23 19:45:13,407 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-23 19:45:13,411 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-23 19:45:14,855 | INFO | app.configs.database | Database tables created successfully
2025-10-23 19:45:14,861 | INFO | main | Database tables initialized
2025-10-23 19:45:18,943 | ERROR | main | Error during startup: Error 22 connecting to localhost:6379. The remote computer refused the network connection.
2025-10-23 19:47:57,060 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-23 19:47:57,062 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-23 19:47:57,063 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-23 19:47:57,064 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-23 19:47:58,272 | INFO | app.configs.database | Database tables created successfully
2025-10-23 19:47:58,291 | INFO | main | Database tables initialized
2025-10-23 19:47:58,670 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-23 19:47:58,672 | INFO | main | Redis event bus started
2025-10-23 19:49:26,901 | INFO | app.services.auth_service | User authenticated successfully: khaerul@gmail.com
2025-10-23 19:49:26,921 | INFO | app.controllers | User is authenticated: email khaerul@gmail.com
2025-10-23 19:52:53,271 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-23 19:52:53,274 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-23 19:52:53,275 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-23 19:52:53,276 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-23 19:52:54,687 | INFO | app.configs.database | Database tables created successfully
2025-10-23 19:52:54,770 | INFO | main | Database tables initialized
2025-10-23 19:52:54,956 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-23 19:52:54,958 | INFO | main | Redis event bus started
2025-10-23 19:53:15,730 | INFO | app.services.user_service | [request_id=c70ecc42-7208-429f-bdba-4c5bdcabb6ab] [user=khaerul@gmail.com] Show user profile
2025-10-23 19:58:23,367 | INFO | main | Redis event bus stopped
2025-10-23 20:16:05,675 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-23 20:16:05,688 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-23 20:16:05,689 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-23 20:16:05,691 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-23 20:16:33,553 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-23 20:16:33,555 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-23 20:16:33,557 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-23 20:16:33,558 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-23 20:16:46,024 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-23 20:16:46,156 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-23 20:16:46,159 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-23 20:16:46,160 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-23 20:16:47,423 | INFO | app.configs.database | Database tables created successfully
2025-10-23 20:16:47,427 | INFO | main | Database tables initialized
2025-10-23 20:16:47,579 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-23 20:16:47,582 | INFO | main | Redis event bus started
2025-10-23 20:16:59,392 | INFO | main | Redis event bus stopped
2025-10-24 07:49:19,702 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-24 07:49:19,707 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-24 07:49:19,708 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-24 07:49:19,708 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-24 07:49:21,654 | INFO | app.configs.database | Database tables created successfully
2025-10-24 07:49:21,663 | INFO | main | Database tables initialized
2025-10-24 07:49:21,862 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-24 07:49:21,865 | INFO | main | Redis event bus started
2025-10-24 07:50:51,482 | INFO | app.services.auth_service | User authenticated successfully: khaerul@gmail.com
2025-10-24 07:50:51,724 | INFO | app.controllers | User is authenticated: email khaerul@gmail.com
2025-10-24 07:51:29,618 | INFO | app.services.user_service | [request_id=0479ce4d-a7b7-4aec-8117-59447b9928c6] [user=khaerul@gmail.com] Show user profile
2025-10-24 07:54:56,909 | INFO | app.services.user_service | [request_id=b199b19e-a836-421b-bd15-b2f8f7c56b9c] [user=khaerul@gmail.com] Updated user profile: khaerul@gmail.com
2025-10-24 07:54:56,925 | ERROR | app.middlewares.error_handler | Unexpected error: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'name'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'email'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'id'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'role'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'created_at'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'literal_error', 'loc': ('response', 'status'), 'msg': "Input should be 'active' or 'non-active'", 'input': 'success', 'ctx': {'expected': "'active' or 'non-active'"}}
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\middlewares\error_handler.py", line 17, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    raise app_exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\routing.py", line 328, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\routing.py", line 177, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'name'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'email'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'id'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'role'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'created_at'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'literal_error', 'loc': ('response', 'status'), 'msg': "Input should be 'active' or 'non-active'", 'input': 'success', 'ctx': {'expected': "'active' or 'non-active'"}}

2025-10-24 08:04:22,343 | INFO | app.services.user_service | [request_id=bfdeb216-2027-4f22-a44d-45f9af40a506] [user=khaerul@gmail.com] Updated user profile: khaerul@gmail.com
2025-10-24 08:04:22,899 | ERROR | app.middlewares.error_handler | Unexpected error: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'name'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'email'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'id'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'role'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'created_at'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'literal_error', 'loc': ('response', 'status'), 'msg': "Input should be 'active' or 'non-active'", 'input': 'success', 'ctx': {'expected': "'active' or 'non-active'"}}
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\middlewares\error_handler.py", line 17, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    raise app_exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\routing.py", line 328, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\routing.py", line 177, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'name'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'email'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'id'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'role'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'created_at'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'literal_error', 'loc': ('response', 'status'), 'msg': "Input should be 'active' or 'non-active'", 'input': 'success', 'ctx': {'expected': "'active' or 'non-active'"}}

2025-10-24 08:04:37,778 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-24 08:04:37,780 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-24 08:04:37,781 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-24 08:04:37,782 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-24 08:05:02,952 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-24 08:05:02,956 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-24 08:05:02,960 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-24 08:05:02,961 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-24 08:05:54,272 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-24 08:05:54,274 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-24 08:05:54,274 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-24 08:05:54,275 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-24 08:05:55,820 | INFO | app.configs.database | Database tables created successfully
2025-10-24 08:05:55,862 | INFO | main | Database tables initialized
2025-10-24 08:05:56,470 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-24 08:05:56,472 | INFO | main | Redis event bus started
2025-10-24 08:06:05,103 | ERROR | app.services.user_service | Unexpected error during Update user: 'UserUpdate' object has no attribute 'email'
2025-10-24 08:06:05,108 | ERROR | app.services.user_service | Exception type: AttributeError
2025-10-24 08:06:05,109 | ERROR | app.services.user_service | Exception args: ("'UserUpdate' object has no attribute 'email'",)
2025-10-24 08:06:05,110 | ERROR | app.controllers | Unexpected error: 'UserUpdate' object has no attribute 'email'
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\user_controller.py", line 50, in update_user
    updated_user = await self.user_service.update_user(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        user_id, name, company_name, job_role
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Saas_Project\Backend\app\services\user_service.py", line 126, in update_user
    self.handle_unexpected_error("Update user", e)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\app\services\user_service.py", line 116, in update_user
    self.log_context(f"Updated user profile: {user.email}")
                                              ^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'UserUpdate' object has no attribute 'email'
2025-10-24 08:06:58,504 | INFO | main | Redis event bus stopped
2025-10-24 08:07:04,979 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-24 08:07:04,980 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-24 08:07:04,982 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-24 08:07:04,982 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-24 08:07:05,663 | INFO | app.configs.database | Database tables created successfully
2025-10-24 08:07:05,666 | INFO | main | Database tables initialized
2025-10-24 08:07:05,725 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-24 08:07:05,727 | INFO | main | Redis event bus started
2025-10-24 08:07:09,871 | INFO | app.services.user_service | [request_id=4d8044b9-0cb5-4719-8ba3-978204efa3d4] [user=khaerul@gmail.com] Updated user profile
2025-10-24 08:07:41,195 | INFO | app.services.user_service | [request_id=7bc8f10e-9664-42fa-966c-ee570910098b] [user=khaerul@gmail.com] Updated user profile
2025-10-24 08:07:49,712 | INFO | app.services.user_service | [request_id=6b7018fd-703d-48fc-a838-dc1d19d6e133] [user=khaerul@gmail.com] Show user profile
2025-10-24 08:11:15,744 | INFO | main | Redis event bus stopped
2025-10-24 08:11:23,634 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-24 08:11:23,635 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-24 08:11:23,637 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-24 08:11:23,638 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-24 08:11:24,779 | INFO | app.configs.database | Database tables created successfully
2025-10-24 08:11:24,789 | INFO | main | Database tables initialized
2025-10-24 08:11:24,968 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-24 08:11:24,974 | INFO | main | Redis event bus started
2025-10-24 08:11:39,166 | WARNING | app.middlewares.auth_middleware | Permission denied for role user: khaerul@gmail.com
2025-10-24 08:12:14,920 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-24 08:12:14,921 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-24 08:12:14,922 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-24 08:12:14,923 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-24 08:12:15,585 | INFO | app.configs.database | Database tables created successfully
2025-10-24 08:12:15,588 | INFO | main | Database tables initialized
2025-10-24 08:12:15,601 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-24 08:12:15,606 | INFO | main | Redis event bus started
2025-10-24 08:12:23,533 | INFO | app.services.user_service | [request_id=3ad2afd6-e6a1-404d-b28b-c2f18312346b] [user=khaerul@gmail.com] Updated user plan: khaerul@gmail.com -> normal
2025-10-24 08:12:23,817 | ERROR | app.middlewares.error_handler | Unexpected error: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'name'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User plan updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'email'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User plan updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'id'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User plan updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'role'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User plan updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'created_at'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User plan updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'literal_error', 'loc': ('response', 'status'), 'msg': "Input should be 'active' or 'non-active'", 'input': 'success', 'ctx': {'expected': "'active' or 'non-active'"}}
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\middlewares\error_handler.py", line 17, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    raise app_exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\starlette\routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\routing.py", line 328, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\fastapi\routing.py", line 177, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'name'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User plan updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'email'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User plan updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'id'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User plan updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'role'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User plan updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'missing', 'loc': ('response', 'created_at'), 'msg': 'Field required', 'input': {'status': 'success', 'message': 'User plan updated successfully', 'data': <User email=khaerul@gmail.com role=user>}}
  {'type': 'literal_error', 'loc': ('response', 'status'), 'msg': "Input should be 'active' or 'non-active'", 'input': 'success', 'ctx': {'expected': "'active' or 'non-active'"}}

2025-10-24 08:18:49,169 | INFO | main | Redis event bus stopped
2025-10-24 08:18:57,102 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-24 08:18:57,106 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-24 08:18:57,114 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-24 08:18:57,174 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-24 08:18:58,629 | INFO | app.configs.database | Database tables created successfully
2025-10-24 08:18:58,642 | INFO | main | Database tables initialized
2025-10-24 08:18:58,842 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-24 08:18:58,844 | INFO | main | Redis event bus started
2025-10-24 08:19:05,899 | INFO | app.services.user_service | [request_id=01b682a4-aee4-48f9-ace3-b49193f3af3e] [user=khaerul@gmail.com] Updated user plan: khaerul@gmail.com -> normal
2025-10-24 08:19:16,158 | INFO | app.services.user_service | [request_id=4b291e2a-2df5-4891-9f8c-88eac464a6dd] [user=khaerul@gmail.com] Show user profile
2025-10-24 08:19:26,941 | WARNING | app.services.user_service | User not found for plan update: 10
2025-10-24 08:19:26,985 | ERROR | app.controllers | Unexpected error: 404: {'error': 'EMAIL_NOT_FOUND', 'message': 'User not found', 'field': 'email', 'value': 'User with ID 10 not found'}
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\user_controller.py", line 60, in update_user_plan
    updated_user = await self.user_service.update_user_plan(user_id, plan)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\app\services\user_service.py", line 135, in update_user_plan
    raise EmailNotFoundException(f"User with ID {user_id} not found")
app.exceptions.user_exceptions.EmailNotFoundException: 404: {'error': 'EMAIL_NOT_FOUND', 'message': 'User not found', 'field': 'email', 'value': 'User with ID 10 not found'}
2025-10-24 08:24:17,599 | INFO | main | Redis event bus stopped
2025-10-24 08:24:24,217 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-24 08:24:24,222 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-24 08:24:24,224 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-24 08:24:24,227 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-24 08:24:25,925 | INFO | app.configs.database | Database tables created successfully
2025-10-24 08:24:25,928 | INFO | main | Database tables initialized
2025-10-24 08:24:26,022 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-24 08:24:26,024 | INFO | main | Redis event bus started
2025-10-24 08:24:32,023 | WARNING | app.services.user_service | User not found for plan update: 10
2025-10-24 08:27:32,189 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-24 08:27:32,191 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-24 08:27:32,192 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-24 08:27:32,193 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-24 08:27:32,983 | INFO | app.configs.database | Database tables created successfully
2025-10-24 08:27:32,986 | INFO | main | Database tables initialized
2025-10-24 08:27:33,043 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-24 08:27:33,049 | INFO | main | Redis event bus started
2025-10-24 08:27:48,413 | WARNING | app.middlewares.auth_middleware | Permission denied for role user: khaerul@gmail.com
2025-10-24 08:28:37,762 | INFO | main | Redis event bus stopped
2025-10-24 08:28:47,449 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-24 08:28:47,454 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-24 08:28:47,456 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-24 08:28:47,462 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-24 08:28:48,849 | INFO | app.configs.database | Database tables created successfully
2025-10-24 08:28:48,921 | INFO | main | Database tables initialized
2025-10-24 08:28:49,042 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-24 08:28:49,045 | INFO | main | Redis event bus started
2025-10-24 08:28:54,049 | WARNING | app.services.user_service | User not found for deletion: 10
2025-10-24 08:29:01,456 | INFO | app.services.user_service | [request_id=ee24628e-2a74-448c-80b4-f8ac7accb930] [user=khaerul@gmail.com] Deleted user: khaerullutfi@gmail.com
2025-10-24 09:52:58,382 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-24 09:52:58,384 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-24 09:52:58,385 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-24 09:52:58,386 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-24 09:53:26,509 | INFO | app.configs.database | Database tables created successfully
2025-10-24 09:53:26,513 | INFO | main | Database tables initialized
2025-10-24 09:53:26,725 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-24 09:53:26,726 | INFO | main | Redis event bus started
2025-10-25 11:12:39,696 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-25 11:12:39,990 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-25 11:12:39,992 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-25 11:12:39,993 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-25 11:13:07,599 | INFO | app.configs.database | Database tables created successfully
2025-10-25 11:13:07,629 | INFO | main | Database tables initialized
2025-10-25 11:13:07,789 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-25 11:13:07,793 | INFO | main | Redis event bus started
2025-10-25 11:14:31,553 | INFO | app.services.auth_service | User authenticated successfully: khaerul@gmail.com
2025-10-25 11:14:32,332 | INFO | app.controllers | User is authenticated: email khaerul@gmail.com
2025-10-25 11:14:58,332 | INFO | app.services.user_service | [request_id=22b76527-690f-455d-8b86-3a2c66e42de2] [user=khaerul@gmail.com] Admin getting all users
2025-10-25 11:15:15,268 | ERROR | app.services.agent_service | Unexpected error during getting all agents: create_at
2025-10-25 11:15:15,487 | ERROR | app.services.agent_service | Exception type: AttributeError
2025-10-25 11:15:15,966 | ERROR | app.services.agent_service | Exception args: ('create_at',)
2025-10-25 11:15:16,684 | ERROR | app.controllers | Unexpected error: create_at
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 199, in _key_not_found
    self._key_fallback(key, None)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 138, in _key_fallback
    raise KeyError(key) from err
KeyError: 'create_at'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\agent_controller.py", line 60, in get_all_agents
    data_agents = await self.agent_service.get_all_agents(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        page=page, limit=limit
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Saas_Project\Backend\app\services\agent_service.py", line 49, in get_all_agents
    self.handle_unexpected_error("getting all agents", e)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\app\services\agent_service.py", line 33, in get_all_agents
    created_at=agent.create_at,
               ^^^^^^^^^^^^^^^
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 66, in sqlalchemy.cyextension.resultproxy.BaseRow.__getattr__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 63, in sqlalchemy.cyextension.resultproxy.BaseRow._get_by_key_impl
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 201, in _key_not_found
    raise AttributeError(ke.args[0]) from ke
AttributeError: create_at
2025-10-25 11:18:21,151 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-25 11:18:21,401 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-25 11:18:21,401 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-25 11:18:21,402 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-25 11:19:29,395 | INFO | app.configs.database | Database tables created successfully
2025-10-25 11:19:29,398 | INFO | main | Database tables initialized
2025-10-25 11:19:32,948 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-25 11:19:33,192 | INFO | main | Redis event bus started
2025-10-25 11:19:38,814 | ERROR | app.services.agent_service | Unexpected error during getting all agents: 1 validation error for AgentPaginate
created_at
  Input should be a valid string [type=string_type, input_value=datetime.datetime(2025, 10, 7, 13, 38, 23), input_type=datetime]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-25 11:19:38,815 | ERROR | app.services.agent_service | Exception type: ValidationError
2025-10-25 11:19:39,063 | ERROR | app.services.agent_service | Exception args: ()
2025-10-25 11:19:39,464 | ERROR | app.controllers | Unexpected error: 1 validation error for AgentPaginate
created_at
  Input should be a valid string [type=string_type, input_value=datetime.datetime(2025, 10, 7, 13, 38, 23), input_type=datetime]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\agent_controller.py", line 60, in get_all_agents
    data_agents = await self.agent_service.get_all_agents(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        page=page, limit=limit
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Saas_Project\Backend\app\services\agent_service.py", line 49, in get_all_agents
    self.handle_unexpected_error("getting all agents", e)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\app\services\agent_service.py", line 20, in get_all_agents
    AgentPaginate(
    ~~~~~~~~~~~~~^
        id=agent.id,
        ^^^^^^^^^^^^
    ...<11 lines>...
        created_at=agent.created_at,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 1 validation error for AgentPaginate
created_at
  Input should be a valid string [type=string_type, input_value=datetime.datetime(2025, 10, 7, 13, 38, 23), input_type=datetime]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-25 11:21:25,876 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-25 11:21:25,883 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-25 11:21:26,002 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-25 11:21:26,018 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-25 11:21:54,944 | INFO | app.configs.database | Database tables created successfully
2025-10-25 11:21:54,963 | INFO | main | Database tables initialized
2025-10-25 11:21:55,288 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-25 11:21:55,447 | INFO | main | Redis event bus started
2025-10-25 11:22:22,164 | ERROR | app.services.agent_service | Unexpected error during getting all agents: 1 validation error for AgentPaginate
avatar
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-25 11:22:22,300 | ERROR | app.services.agent_service | Exception type: ValidationError
2025-10-25 11:22:22,500 | ERROR | app.services.agent_service | Exception args: ()
2025-10-25 11:22:22,776 | ERROR | app.controllers | Unexpected error: 1 validation error for AgentPaginate
avatar
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
Traceback (most recent call last):
  File "D:\Saas_Project\Backend\app\controllers\agent_controller.py", line 60, in get_all_agents
    data_agents = await self.agent_service.get_all_agents(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        page=page, limit=limit
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Saas_Project\Backend\app\services\agent_service.py", line 49, in get_all_agents
    self.handle_unexpected_error("getting all agents", e)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Saas_Project\Backend\app\services\agent_service.py", line 20, in get_all_agents
    AgentPaginate(
    ~~~~~~~~~~~~~^
        id=agent.id,
        ^^^^^^^^^^^^
    ...<11 lines>...
        created_at=agent.created_at,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Saas_Project\Backend\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 1 validation error for AgentPaginate
avatar
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-10-25 11:24:16,502 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-25 11:24:16,506 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-25 11:24:16,555 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-25 11:24:16,560 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-25 11:24:34,403 | INFO | app.configs.database | Database tables created successfully
2025-10-25 11:24:34,427 | INFO | main | Database tables initialized
2025-10-25 11:24:34,737 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-25 11:24:34,779 | INFO | main | Redis event bus started
2025-10-25 11:24:42,259 | INFO | app.services.agent_service | [request_id=3fe0ba0f-87cb-45a4-938e-1bb52fe76953] [user=khaerul@gmail.com] admin getting all agents paginate
2025-10-25 11:25:17,121 | INFO | app.services.agent_service | [request_id=db0c36e8-845c-41e9-9c47-9eb657003db6] [user=khaerul@gmail.com] admin getting all agents paginate
2025-10-25 11:25:31,234 | INFO | app.services.agent_service | [request_id=862a5a8e-cb4c-45c7-ab55-e8056aae4462] [user=khaerul@gmail.com] admin getting all agents paginate
2025-10-25 11:28:12,590 | INFO | app.services.agent_service | [request_id=ac235a25-3710-41f1-abf2-b2daabca9a36] [user=khaerul@gmail.com] admin getting all agents paginate
2025-10-25 11:28:26,385 | INFO | app.services.agent_service | [request_id=0d15a162-74fc-402d-b1ae-e6db436fca55] [user=khaerul@gmail.com] admin getting all agents paginate
2025-10-25 11:52:43,514 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-25 11:52:43,911 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-25 11:52:43,978 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-25 11:52:44,154 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-25 11:53:20,782 | INFO | app.configs.database | Database tables created successfully
2025-10-25 11:53:20,935 | INFO | main | Database tables initialized
2025-10-25 11:53:26,217 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-25 11:53:26,711 | INFO | main | Redis event bus started
2025-10-25 11:54:30,803 | INFO | app.services.agent_service | [request_id=35cdaad5-97ec-436a-b9c6-7eb7ab05d902] [user=khaerul@gmail.com] Successfully retrieved agents for user 1
2025-10-25 21:49:14,864 | INFO | app.events.redis_event | Subscribe event type event.agent.progress
2025-10-25 21:49:14,884 | INFO | app.events.redis_event | Subscribe event type event.agent.success
2025-10-25 21:49:14,886 | INFO | app.events.redis_event | Subscribe event type event.agent.failure
2025-10-25 21:49:14,888 | INFO | app.events.redis_event | Subscribe event type event.agent.invoke
2025-10-25 21:49:44,260 | INFO | app.configs.database | Database tables created successfully
2025-10-25 21:49:44,267 | INFO | main | Database tables initialized
2025-10-25 21:49:44,370 | INFO | app.events.redis_event | Subscribe to channel: ['event.agent.progress.user:*', 'event.agent.success.user:*', 'event.agent.failure.user:*', 'event.agent.invoke.user:*']
2025-10-25 21:49:44,374 | INFO | main | Redis event bus started
2025-10-25 21:51:20,890 | INFO | app.services.auth_service | User authenticated successfully: khaerul@gmail.com
2025-10-25 21:51:20,916 | INFO | app.controllers | User is authenticated: email khaerul@gmail.com
2025-10-25 21:51:42,870 | INFO | app.services.agent_service | [request_id=e9e936bc-eb96-4f55-8a43-afdb4b21e887] [user=khaerul@gmail.com] admin getting all agents paginate
2025-10-25 21:52:08,073 | INFO | app.services.agent_service | [request_id=5ce6cc35-2fc3-4a8d-8979-4b150bd85ef2] [user=khaerul@gmail.com] Fetched 74 user agents for user_id=1
